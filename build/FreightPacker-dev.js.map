{"version":3,"sources":["webpack:///webpack/bootstrap 3ca4ee74e909c45958c0","webpack:///./src/api/utils/cik/Utils.js","webpack:///./src/api/utils/cik/Signaler.js","webpack:///./src/api/utils/cik/config/datGUIConsole.js","webpack:///./src/api/utils/cik/Logger.js","webpack:///./src/api/components/assets/Asset.js","webpack:///./src/api/components/box/BoxEntry.js","webpack:///./src/api/components/common/CargoEntry.js","webpack:///./src/api/packer/container/Container.js","webpack:///./src/api/packer/cubX/core/Math2D.js","webpack:///./src/api/components/LightDispatcher.js","webpack:///./src/api/utils/cik/config/Config.js","webpack:///./src/api/packer/cubX/core/Region.js","webpack:///./src/api/App.js","webpack:///./src/api/packer/Packer.js","webpack:///./src/api/packer/container/ContainingVolume.js","webpack:///./src/api/packer/cubX/core/Components.js","webpack:///./src/api/view/SceneSetup.js","webpack:///./src/api/scene/Camera.js","webpack:///./src/api/utils/cik/Tween.js","webpack:///./src/api/utils/cik/Pool.js","webpack:///./src/api/view/CargoBoxView.js","webpack:///./src/api/view/CargoView.js","webpack:///./src/api/UX.js","webpack:///./src/api/view/CargoListView.js","webpack:///./src/api/utils/cik/config/Smart.js","webpack:///./src/api/components/box/Dimensions.js","webpack:///./src/api/debug/RuntimeTester.js","webpack:///./src/api/Resources.js","webpack:///./src/api/packer/CargoGroup.js","webpack:///./src/api/utils/cik/config/UIUtils.js","webpack:///./src/api/utils/cik/config/Control3D.js","webpack:///./src/api/packer/CargoList.js","webpack:///./src/api/packer/PackingSpace.js","webpack:///./src/api/packer/cubX/core/OccupiedRegion.js","webpack:///./src/api/packer/cubX/core/RegionsTree.js","webpack:///./src/api/packer/cubX/CUBDebug.js","webpack:///./src/api/packer/cubX/heuristics/Heuristic.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/api/utils/cik/input/UpdateComponent.js","webpack:///./src/api/utils/cik/input/RaycastGroup.js","webpack:///./src/api/scene/Controller.js","webpack:///./src/api/view/EntryInputView.js","webpack:///./src/api/components/common/TextField.js","webpack:///./src/api/view/components/TextLabelView.js","webpack:///./src/api/Constants.js","webpack:///./src/api/utils/cik/config/datGUIExtensions.js","webpack:///./src/api/debug/Debug.js","webpack:///./src/api/packer/cubX/core/PackedComponents.js","webpack:///./src/api/view/PackingSpaceView.js","webpack:///./src/api/view/ContainerView.js","webpack:///./src/api/view/PackResultView.js","webpack:///./src/api/view/dom/DomUI.js","webpack:///./src/api/components/CargoInput.js","webpack:///./src/api/components/PackingSpaceInput.js","webpack:///./src/api/components/PackerInterface.js","webpack:///./src/dev.js","webpack:///./src/FreightPacker.js","webpack:///./src/api/utils/Capabilities.js","webpack:///./src/api/utils/cik/input/Input.js","webpack:///./src/min-dependencies/lib/keypress.js","webpack:///./src/api/utils/cik/Quality.js","webpack:///./src/api/scene/Renderer.js","webpack:///./src/min-dependencies/lib/three/controls/OrbitControls.js","webpack:///./src/api/view/HUDView.js","webpack:///./src/api/scene/Transform.js","webpack:///./src/api/components/box/PackingProperty.js","webpack:///./src/api/components/assets/ColorTemplate.js","webpack:///./src/api/utils/cik/transitions/Transition.js","webpack:///./src/api/components/Visualization.js","webpack:///./src/api/components/User.js","webpack:///./src/api/packer/Cargo.js","webpack:///./src/api/view/components/FloatingShelf.js","webpack:///./src/api/view/components/Outline.js","webpack:///./src/min-dependencies/lib/three/controls/TransformControls.js","webpack:///./src/api/packer/container/Volume.js","webpack:///./src/api/packer/cubX/CUB.js","webpack:///./src/api/packer/afit/AFitTest.js","webpack:///./src/api/packer/afit/components/Item.js","webpack:///./src/api/packer/afit/components/Container.js","webpack:///./src/api/packer/cubX/core/StackedRegion.js","webpack:///./src/api/packer/cubX/heuristics/HeuRegular.js","webpack:///./src/api/packer/cubX/heuristics/HeuParametric1.js","webpack:///./src/api/view/View.js","webpack:///./src/api/view/PackedCargoBoxView.js","webpack:///./src/api/view/components/Musipack.js","webpack:///./src/api/view/OrthoviewsNavigator.js","webpack:///./src/api/utils/cik/NaNRecovery.js"],"names":["trimVariableRegex","RegExp","twopi","Math","PI","goldenRatio","sqrt","goldenRatioConjugate","typeofObject","Utils","object","constructor","classProperties","instanceProperties","prototype","def","Object","assign","defineProperties","getOwnPropertyDescriptors","target","source","keys","forEach","key","AssignUndefined","undefined","obj","JSON","parse","stringify","element","style","window","getComputedStyle","marginLeft","parseFloat","marginTop","paddingLeft","paddingTop","x","y","input","replace","str","length","substring","i","len","divisions","callback","da","a","cos","b","sin","nc","ns","t","c","d","color","THREE","Color","r","g","z","set","base","vector","fixed","toFixed","w","Signaler","signals","dispatches","event","args","On","push","eventCallbacks","once","splice","indexOf","callbacks","index","defaultGUIParams","publish","dat","guis","controllers","Controller","label","onChangeCallback","onChange","valueProp","get","value","defineProperty","list","isFunction","step","listen","updateDisplay","GUI","params","data","__controllers","__folders","add","controller","toString","addFolder","folder","open","domElement","document","createElement","result","iKey","listProp","destroy","logType","trace","normal","warn","logTypeLabel","defaultPrintFilter","programStartTime","Date","now","messages","warnOnce","Message","type","timestamp","content","arg","json","substr","err","Logger","message","_active","AddLog","_toConsole","_traceToConsole","groupCollapsed","console","groupEnd","log","id","Log","Warn","filter","output","ToString","active","SolidMaterialType","MeshStandardMaterial","TransparentMaterialType","InvisibleMaterialType","MeshBasicMaterial","defaultGeometry","CubeGeometry","defaultMeshMaterial","objectLoader","ObjectLoader","jsonLoader","JSONLoader","castShadow","receiveShadow","colorTemplates","Map","signaler","resourcesSet","_resources","Symbol","Asset","url","material","mapName","Promise","resolve","reject","OnIncludingPrior","texture","Texture","TextureLoader","load","resources","texturesPath","roughness","metalness","geometry","mesh","Mesh","modified","setHex","getHex","reduce","clamp","opacity","transparent","texturePath","CastReceiveShadow","traverse","child","colors","template","ColorTemplate","Dispatch","CreateColorTemplate","numEntries","getDefaultLabel","epsilon","pow","numberType","BoxEntry","dimensions","Dimensions","weight","quantity","properties","stacking","StackingProperty","rotation","RotationConstraint","translation","TranslationConstraint","descriptions","TextField","Reset","defaultContent","clear","entry","Copy","field","own","Clone","Assert","CargoEntry","_weight","uid","generateUUID","has","delete","combinedVolume","ContainingVolume","Container","volumes","WarnOnce","volume","numVolumes","minX","Number","MAX_SAFE_INTEGER","minY","minZ","maxX","MIN_SAFE_INTEGER","maxY","maxZ","combinedWeightCapacity","pos","position","dim","width","height","weightCapacity","container","Set","containingVolume","FromJSON","Add","smallValue","smallValueSqrt","segmentIntersect","x1","y1","x2","y2","x3","y3","x4","y4","denominator","abs","ua","ub","linesIntersect","ax","ay","bx","by","cx","cy","dx","dy","a1","b1","c1","a2","b2","c2","determinant","rectangleContainsPoint","offset","rx","ry","rw","rh","px","py","h","rectangleContainsRectangle","ox","oy","ow","oh","rectanglesFromPoints","points","toInt","round","xs","xCat","floor","point","ys","yCat","insert","iY","sortYCat","xsKeys","iX","sort","intersectedXs","xCat1","ys1","iX2","xCat2","ys2","yIntersect","xIntersect","iY1","iY2","rectangles","iIX","intersectedX","p1","p2","p3","p4","rectangle","reduceRectangles","iRect","ra","aw","ah","jRect","rb","bw","bh","max","segmentContainsPoint","vx","vy","vxa","vya","vxb","vyb","db","_signals","_dispatches","LightDispatcher","serializeModes","none","property","min","createKeyInfo","isFolderGrouped","propertyPath","split","slice","join","shift","owner","getKey","setKey","val","endKey","download","filename","file","Blob","navigator","msSaveOrOpenBlob","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","defaultEditParams","save","debug","Shortcut","Config","shortcutsGUI","shortcuts","instances","ignoreKeys","isController","keyInfo","keyValue","ignoredKey","saveValue","isColor","parseInt","toJSON","Update","Snapshot","guiChanged","gui","require","default","autoPlace","editing","updateAll","find","addFunction","addColor","call","scope","editor","Save","Debug","Serialize","defaultsFolder","serializeMode","unrolled","subProperties","subProperty","category","shortcut","setRectangleWeights","rect","stackingCapacity","Array","maxWeightValue","Region","preferredX","SetWeights","regionA","regionB","xB","yB","zB","wB","hB","lB","xT","yT","zT","wT","hT","lT","region","l","tempCorners","tempPoints","pz","subRegion","rz","rl","other","grounded","occupiedRegions","tempRegion","OnTopOfRegions","validRegion","level","TopRegion","iRegion","regionCheck","OnTopRegion","pop","fit","weightFit","minRegionAxis","newRegions","axis","size","east","west","over","south","ptsA","GetFloorPoints","ptsB","tempPoints2","adjacent","intersections","iA","nextA","az","nax","naz","iB","nextB","bz","nbx","nbz","intersection","rectA","rectB","format","nf","n","numberFormat","start","App","containerDiv","ux","cargoInput","packingSpaceInput","packerInterface","packerParams","packer","Packer","CargoInput","boxEntry","cargoList","modify","Modify","SolveAgain","remove","Remove","PackingSpaceInput","containerLoaded","packingSpace","AddContainer","PackerInterface","solveRequest","solverParams","Solve","domUI","DomUI","sceneSetup","SceneSetup","Init","then","Start","bind","viewParams","view","View","_Bind","resetColor","show","existingEntry","GetEntry","previewColorBackup","Description","hud","Preview","hideEntryPreview","hide","onPackUpdate","packingResult","_Notify","solved","packUpdate","onPackFailed","error","failed","packFailed","autoUpdatePack","solveAgain","ClearPackingResults","CUB","typeofHeuristicParams","heuristics","HeuParametric1","Params","ItemConstructor","extractHeuristicParams","cubParams","heuristicParams","scoringWeight","score_minLength","score_minWastedSpace","scoring","minWaste","PackedCargo","orientation","UnpackedCargo","unpackedQuantity","PackingResult","numTotalItems","runtime","packed","unpacked","defaultParams","_solverParams","PackingSpace","CargoList","solverExecutionsCount","items","Items","ItemIDS","k","inititalItems","SKUs","GetSKUS","InitialSKU","SKU","JoinSKU","newitems","Initialitems","count","schema","SKU1","SKU2","SKU3","CheckPairedItemsSKU2","CheckPairedItemsSKU3","JoinedSKU","heuristic","finalSchema","finalSKU1","GetItemDetails","finalSKU2","finalSKU3","finalSKUQty","CombindedSKU","FetchItemQuantityZero","IncreementItemQuantity","tempQty","ItemQuantityRange","SetItemQuantity","results","pack","CheckPairedItems","GetPackedItemQuantity","quantitySchema","GetSchema","Sum","row","sum","SKUQty","algorithm","algorithmParams","SolveCUB","ready","Item","current","ZeroContainer","entries","itemQuant","groups","values","group","validOrientations","enabled","capacity","defaultStackingFactor","item","GetItemIds","InititalItems","startTime","performance","finalItems","PackSKUs","unpackResult","cubRuntime","cubRuntime2Dec","packedItems","packedItem","ref","Vector3","packedWidth","packedHeight","packedLength","ResolveOrientation","packedCargo","unpackedItems","unpackedItem","unpackedCargo","_weightCapacity","SetUID","Volume","typeofNumber","_maxHeight","_validOrientations","orientations","xyz","zyx","yxz","yzx","zxy","xzy","q","vo","toLowerCase","maxHeight","GetOrientedDimensions","minDimensions","iItem","numItems","iOrient","init","started","paused","stopped","quality","Quality","Common","units","controllerParams","sceneController","rendererParams","clearColor","backgroundColor","sceneRenderer","Renderer","renderer","toneMappingExposure","cameraParams","fov","aspect","near","far","cameraController","Camera","OrbitControls","Input","camera","sceneRendererRef","appCameraRef","onResize","screen","ReconfigureViewport","hudParams","hudCameraParams","HUDView","hudCameraRef","AdjustCamera","autoClear","setupParams","gridHelper","SetTarget","GridHelper","AddDefault","configure","Configure","scene1","scene","camera1","scene2","camera2","animationFrameID","requestAnimationFrame","Render","clearDepth","screenNeedsUpdate","cameraNeedsUpdate","cancelAnimationFrame","Dispose","helpers","ambientLight","AmbientLight","directionalLight","DirectionalLight","ambientContainer","directionalLightComplem","onGUIChanged","dl","shadow","updateProjectionMatrix","UpdateShadowMaps","map","mapSize","manhattanDistanceTo","copy","dispose","dlHelper","update","dlCameraHelper","Smart","Control3D","smart","MakeShortcut","lightController","shadowControllers","shadowCameraControllers","Unroll","DirectionalLightHelper","CameraHelper","global","clone","appControl3D","control","hudControl3D","toggle","toggleOrbitOwner","orbitControls","Hold","Release","hudCam","print","config","VecToString","rotationProperties","rotationControllers","Multiple","tempCoords","ownCoords","center","tempVec3","tempVec3_b","change","userChange","PerspectiveCamera","name","changed","dollyAnimation","Tween","Combo","RequestN","functions","ease","easeInOutQuad","lookAt","onDollyAnimationComplete","onComplete","Hook","fovAnimation","onFOVAnimationComplete","fpsControls","Navigation","FirstPerson","speed","speedX","speedY","damping","momentum","limitPhi","moveSpeed","keyControls","controls","lookTarget","getWorldDirection","multiplyScalar","addEventListener","e","distanceTo","v","subVectors","saveState","reset","maxDistance","maxPolarAngle","autoRotate","LerpRotation","FirstPersonControls","quat","Quaternion","applyQuaternion","getWorldQuaternion","normalize","box3","distanceMultiplier","extent","getSize","frameSize","distance","getCenter","coords","CalcFrameCoords","duration","endCoords","TransitionFromToCoords","startCoords","SetDurations","p","SetStartValues","tp","SetDeltas","Restart","deltaFOV","startValue","delta","TweenCallback","time","TweenCompletedCallback","clock","Clock","poolNewFN","poolResetFN","tween","pool","Pool","linear","easeOutElastic","ts","tc","easeOutQuad","easeOutCubic","special","pingPong","TweenComboCompletedCallback","TweenCombo","tweens","completed","Unhook","Return","startValue0","delta0","startValue1","delta1","startValue2","delta2","tween0","Request","tween1","tween2","combo","getElapsedTime","endValue","_new","_reset","fnNew","fnReset","objects","unitCubeGeometry","BoxBufferGeometry","materialTemplate","flatShading","brightnessRange","hueBase","random","nextColor","setHSL","GoldenSeries","_materialSettings","_color","typeofString","CargoBoxView","colorHex","scale","vec3","labelView","s","SetScale","RestoreMaterial","SetMaterialFocus","focus","CargoView","dummyGeometry","SphereBufferGeometry","dummyMaterial","_entry","_focus","Object3D","tlvParams","font","backColor","fontColor","textAlign","sidePadding","ratioToX","TextLabelView","rotateY","rotateX","UpdateText","cargoView","scaleRefFigure","Constants","man","UX","app","visualization","Visualization","user","User","_selectedEntryUID","labels","tempBox","Box3","tempVec","select","deselect","interact","outlineOffset","CargoListView","templatesView","cargoTemplateViews","fsParams","padding","ColorTemplates","Apply","floatingShelf","FloatingShelf","raycastGroupItems","raycastGroup","RaycastGroup","OnInteract","outline","Outline","offsetFactor","slidingAnimation","originalPosition","onAnimationComplete","templateCargoView","ticketParams","Dummy","UpdateItems","Sort","ReflectEntry","SetOutline","raycastGroupIndex","box","entryUID","GetTemplate","targetY","deltaY","CargoGroup","cargoGroup","textColor","textLabelView","SortMapBySize","updateMatrixWorld","worldToLocal","Matrix4","getInverse","matrixWorld","cargoes","next","done","setFromObject","applyMatrix4","halfSize","Compare","onFocus","onFocusLost","draggable","Draggable","closeBtn","onclick","Hide","ui","Element","Delete","UpdateGUI","visible","SetCurrent","oldPos","GetPosition","SetPosition","Show","AddStyle","styles","UIWiggleAnim","folderName","Track","Edit","iFocus","folders","_vec3","RuntimeTester","Notify","Abs","Test","tests","TestLog","successes","failures","trial","title","maximumRuns","isNaN","trials","runsCount","testFunction","expectedResult","Trial","BindTo","Execute","success","Succeeded","Failed","succeeded","TrialLog","test","TryInstance","pass","successful","skipped","testValues","testRuns","testSuccessful","Resources","Cargo","currentQuantity","stopPropagation","stylesheet","createCSS","css","getElementsByTagName","innerHTML","UIFitContent","UIHideMenu","UIDraggable","UIDHeader","UIDCloseButton","_domElement","removeEventListener","RemoveStyle","text","attributes","_span","_Span","crel","eStyle","cssText","widths","small","medium","large","dom","move","xpos","ypos","left","top","diffX","diffY","eWi","eHe","cWi","cHe","onMouseMove","evt","posX","clientX","posY","clientY","aX","aY","startMoving","parentNode","divTop","divLeft","cursor","stopMoving","domStyle","head","header","onmousedown","onmouseup","close","Close","EnableChildInput","elt","spaces","world","local","modes","translate","rotate","defaultControls","TransformControls","renderOrder","attach","detach","Detach","space","setMode","stringType","groupAdded","groupRemoved","groupModified","containerAdded","_currentIndex","containers","currentIndex","OccupiedRegions","sortByN","tempOccupiedRegion","OccupiedRegion","RegionsTree","root","regions","thisArg","numRegions","search","Subtract","regionIndex","debugUIDs","coordID","levels","neighbours","jRegion","intersects","Intersects","numNeighbours","iNeighbour","neighbourA","jNeighbour","neighbourB","connectedNeighbours","ConnectFloorRects","levelsYCats","iYCat","numYCats","regionY","regionHeight","numRects","newRegion","dummy","volumeA","volumeB","ContainsRegion","sortFunction","sleep","debugLog","keypress","debugRegion","debugClear","debugging","ListenKeys","ms","force","execute","tid","clearTimeout","solid","checkered","debugUID","Viz","DrawVolume","Boolean","uids","RemoveObjectByUID","ClearAll","numberFormatDefault","nStr","HeuristicParams","HeuristicResult","containingRegion","packedRegion","_items","_packedContainer","_regionsTree","_occupiedRegionsTree","_workingItem","HeuristicWorkingSet","packedContainer","regionsTree","occupiedRegionsTree","WeightPass","Validate","Find","FitFunction","NextItem","Error","Heuristic","workingSetType","workingSet","RemoveItem","WorkingSet","Result","UpdateComponent","interval","lastUpdateTime","collectionQuery","updateProperty","recursive","raycastItems","GetRaycastItems","rItem","Cik","raycastItem","raycaster","UpdateRaycastItems","intersectObjects","raycastItemIndex","BubbleUpForIndex","collection","nestLimit","numCollection","parent","itemsContainer","miscContainer","defaults","Scene","objName","getObjectByName","tempBox3","_scaleFigure","scaleFigure","woman","EntryInputView","preview","previewTypes","offsetX","side","DoubleSide","SetTextureMap","alphaMap","repeat","setX","refMesh","PlaneGeometry","bkgMesh","depthWrite","depthFunc","NeverDepth","transition","Transition","slideIn","Slide","slideOut","onTransitionComplete","transitionController","complete","valid","End","children","boxView","previewing","deltaTime","tlWatchTimer","tlWatchEntries","tlWatchUpdater","newValue","propertyName","savedValue","tl","addTLWatch","setInterval","_value","TextLabel","GetString","textLabel","canvas2d","context2d","getContext","fillStyle","fillRect","textBaseline","fillText","CanvasTexture","minFilter","LinearFilter","anisotropy","image","needsUpdate","OnChange","Label","guiExtensions","blockEvent","CreateCSS","datDisabled","_onGUIEvent","folderKeys","closed","onGUIEvent","hasAttribute","setAttribute","parentElement","removeAttribute","enumerable","enable","disabled","_tooltip","class","classList","setTooltip","tooltip","delay","debugGeometry","debugMaterial","wrapS","wrapT","RepeatWrapping","debugBox","DebugBox","alphaHexMask","debugObjects","tVec3","tPos","tScale","DebugViz","wireframe","packingSpaceView","packResultView","cargoViews","o","AFitTest","Box","api","PackedItem","PackedContainer","cumulatedWeight","yRotation","makeRotationY","tempMatrix4","PackingSpaceView","containerViews","containerView","ContainerView","cv","containingVolumeUID","iCView","iCVolume","FindContainingVolume","identity","makeTranslation","ContainerBox","createContainerBoxes","boxes","CreateMesh","BackSide","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","views","WeakMap","initializationBox3","StandardSceneObject","containerBoxes","platformMesh","planeGeom","BoxGeometry","planeMaterial","CreateSolidMaterialMatte","ReceiveShadow","object3d","animationDuration","packedCargoView","PackedCargoBoxView","Extend","getOrientationAngles","getOrientationEuler","rad","Euler","packVizStart","packVizEnd","cargoVizCreate","cargoVizPack","cargoVizUnpack","PackResultView","cargoListView","animatingViews","Pizzicato","musipack","matrix","GetMatrix","decompose","packedQuantities","zEntry","numPackedItems","delayPerItem","cargoViewTemplate","packedQuantity","totalQuantity","UpdateLabel","SetRotationAngles","posTweenCombo","onTweenComplete","OnCargoFirstTweenComplete","extraData","unpackedOffset","numUnpackedItems","j","OnTweenComplete","scaleTweenCombo","DisableHighlights","Highlight","numCargoViews","cvEntry","halfHeight","low","high","animatingView","fn","nodeType","textContent","attrMapString","isNodeString","isElementString","isType","isNode","Node","ownerDocument","isElement","isArray","subChild","createTextNode","arguments","settings","childIndex","argumentsLength","attributeMap","attr","Proxy","proxy","defaultFormatParams","orthoViewSelected","orthoviews","home","front","icons","margin","dispatch","icon","right","imageURL","div","onmouseover","backgroundPositionX","onmouseout","preventDefault","_cargoList","boxEntryPool","renewBoxEntry","GetNextColor","entryMirror","IsVolume","commitedEntry","existing","sliderValueChange","sliderValueStop","createContainerView","model","thickness","PlatformVisibility","jsonObject","ResultSpace","ResultEntry","packingSpaces","totalPacked","totalUnpacked","solveDuration","toInterfaceResults","getSpace","containerUID","ps","packEntry","resultEntry","isFirst","defaultSolverParams","FreightPacker","utils","devSetup","domain","fp","toConsole","traceToConsole","SetViewParent","auto","uxParams","cargoInputParams","packingSpaceInputParams","appParams","webgl","Capabilities","IsWebGLReady","canvas","gl","WebGLRenderingContext","defaultKeysListen","concat","domContainer","_camera","_mouse","mouseScreen","Vector2","mouseViewport","mouseDelta","lastMouseDownTime","ComputeScreen","Raycaster","_raycastGroups","Update25","Update10","OnMouseDown","OnDoubleClick","OnMouseUp","OnRightClick","OnClick","updateComponents","fireOnce","onMouseDown","onMouseUp","onRightClick","onDoubleClick","onClick","onDrag","onDragEvent","mouseEvent","sx","sy","minDist","onDragStatus","doubleClickTime","OnMouseMove","thisOnMouseWheel","OnMouseWheel","attachEvent","OnScroll","OnResize","keyboard","Listener","on","simple_combo","unregister","unregister_combo","register_combo","prevent_repeat","on_keydown","on_keyup","getBoundingClientRect","bottom","button","UpdateScreenAndMouse","_dridMouseDown","AbortDelayedAction","_status","DelayedAction","_mouseDownDelayed","UpdateRaycast","ExecuteDelayedMD","distanceToSquared","noMouseDrag","m","wheelDelta","detail","lerp","eventType","iCallback","FireOnce","UpdateRaycaster","iUpdate","updateComponent","OnMouseDrag","LerpZoom","action","drid","_repeats","clearInterval","intersectObject","groupID","setFromCamera","raycastGroupsKeys","numRaycastGroups","reverse","iGroup","Raycast","_change_keycodes_by_browser","_compare_arrays","_compare_arrays_sorted","_convert_key_to_readable","_convert_to_shifted_key","_decide_meta_key","_factory_defaults","_filter_array","_index_of_in_array","_is_array_in_array","_is_array_in_array_sorted","_key_is_valid","_keycode_alternate_names","_keycode_dictionary","_keycode_shifted_keys","_log_error","_metakey","_modifier_event_mapping","_modifier_keys","_validate_combo","__hasProp","hasOwnProperty","__indexOf","is_unordered","is_counting","is_exclusive","is_solitary","prevent_default","dictionary","allows_key_repeat","keyup_fired","attach_handler","jQuery","should_suppress_event_defaults","should_force_event_defaults","sequence_delay","_registered_combos","_keys_down","_active_combos","_sequence","_sequence_timer","_prevent_capture","_defaults","handler","keydown_event","_this","_receive_input","_bug_catcher","keyup_event","blur_event","_i","_len","_ref","_key_up","remove_handler","removeEvent","_ref1","keyCode","_cmd_bug_check","combo_keys","_prevent_default","should_prevent","returnValue","_get_active_combos","active_combos","keys_down","down_key","_match_combo_arrays","match","_fuzzy_match_combo_arrays","_get_potential_combos","potentials","is_sequence","_add_to_active_combos","active_combo","active_key","active_keys","already_replaced","combo_key","should_prepend","should_replace","_j","_k","_len1","unshift","_remove_from_active_combos","_get_possible_sequences","matches","sequence","_ref2","_add_key_to_sequence","sequence_combos","_get_sequence","seq_key","is_keydown","_key_down","_fire","key_event","is_autorepeat","potential_match","match_handler","source_combo","_keys_remain","keys_remain","combos","event_mod","mod","potential","potential_combos","sequence_combo","shifted_key","_handle_combo_down","is_other_exclusive","potential_combo","active_combos_length","unshifted_key","_l","_len2","_ref3","shiftKey","_handle_combo_up","keys_remaining","counting_combo","count_callback","combo_dictionary","register_many","combo_array","_results","keys_or_combo","unregister_many","get_registered_combos","stop_listening","get_meta_key","userAgent","array","prev","apply","valid_key","_","alt_name","mod_key","non_modifier_keys","validated","define","exports","testCallback","composer","antialias","shadows","renderSizeMul","OnTestComplete","shadowMapType","PCFSoftShadowMap","shadowsAutoUpdate","WebGLRenderer","shadowMap","autoUpdate","physicallyCorrectLights","gammaInput","gammaOutput","toneMapping","Uncharted2ToneMapping","maxTextureSize","context","getParameter","MAX_TEXTURE_SIZE","pixelRatio","devicePixelRatio","setPixelRatio","setClearColor","ResizeRenderer","newWidth","newHeight","setSize","render","ResizeDomElement","UseComposer","EffectComposer","renderPass","RenderPass","renderToScreen","addPass","renderPasses","UseCamera","ignoredAreas","minDistance","Infinity","minZoom","maxZoom","minPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panningMode","ScreenSpacePanning","keyPanSpeed","autoRotateSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","dispatchEvent","changeEvent","state","STATE","NONE","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","makeSafe","radius","panOffset","setFromSpherical","zoomChanged","EPS","dot","quaternion","onContextMenu","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","angle","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","panUp","HorizontalPanning","crossVectors","pan","deltaX","isPerspectiveCamera","targetDistance","tan","clientHeight","isOrthographicCamera","clientWidth","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","checkIgnoredAreas","rects","ContainsPoint","create","EventDispatcher","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","defaultCamTRS","Transform","cameraTransform","entryInputViewParams","entryInputView","_position","_rotation","transform","_enabled","PackingProperty","prop","Constraint","_allowedOrientations","allowedOrientations","allowX","allowY","allowZ","allowed","allowWH","allowLH","allowWL","findNearest","dMin","nearest","vz","tempColor","mapColor","Material","TransitionController","from","to","bounds","OnComplete","_controller","boundsView","transformView","_app","PackResults","Slice","visualizationSignals","packResults","highlightPackedInstances","Select","SelectEntry","boxEntryInteract","onCargoInteract","cargoEntry","PackingItem","cargo","targetView","cubeGeometry","outlineMaterial","depthTest","boxOutlineMaterial","offsetUnits","outlines","Disable","oChild","outlineReady","boxMaterial","boxMesh","addScalar","applyMatrix","GizmoMaterial","parameters","FrontSide","setValues","oldColor","oldOpacity","highlight","highlighted","setRGB","GizmoLineMaterial","LineBasicMaterial","linewidth","pickerMaterial","TransformGizmo","handles","pickers","planes","planeGeometry","PlaneBufferGeometry","activePlane","setupGizmos","gizmoMap","handleGizmos","pickerGizmos","updateMatrix","tempGeometry","eye","vec1","vec2","lookAtMatrix","setFromRotationMatrix","setFromEuler","TransformGizmoTranslate","arrowGeometry","Geometry","CylinderGeometry","merge","lineXGeometry","BufferGeometry","addAttribute","Float32BufferAttribute","lineYGeometry","lineZGeometry","X","Line","Y","Z","XYZ","OctahedronGeometry","XY","YZ","XZ","CylinderBufferGeometry","setActivePlane","tempMatrix","extractRotation","TransformGizmoRotate","CircleGeometry","facing","arc","vertices","E","XYZE","TorusBufferGeometry","eye2","worldRotation","tempQuaternion","unitX","unitY","unitZ","quaternionX","quaternionY","quaternionZ","makeRotationFromQuaternion","setFromAxisAngle","atan2","multiplyQuaternions","TransformGizmoScale","translationSnap","rotationSnap","_mode","_dragging","_gizmo","gizmoObj","mouseDownEvent","mouseUpEvent","mode","objectChangeEvent","ray","pointerVector","offsetRotation","tempVector","quaternionXYZ","quaternionE","oldPosition","oldScale","oldRotationMatrix","parentRotationMatrix","parentScale","worldPosition","worldRotationMatrix","camPosition","camRotation","onPointerDown","onPointerHover","onPointerMove","onPointerUp","getMode","setTranslationSnap","setRotationSnap","setSpace","setFromMatrixPosition","OrthographicCamera","pointer","changedTouches","intersect","planeIntersect","setFromMatrixScale","multiply","cross","angleTo","TouchEvent","_box3","setFromCenterAndSize","cub","SetItems","SetPackedContainer","SetRegionsTree","SetOccupiedRegionsTree","HeuRegular","firstRegion","firstOccupiedRegion","harsh","itemVolume","regionRemains","Occupy","ProcessRegionsPerPackedItem","containerWidth","containerHeight","ProcessRegionsMergeExpand","ProcessRegionsForPackedItems","ProcessRegionsForZeroRegions","ProcessRegionsEnclosed","SortDeepestSmallest","Fit","placement","OccupiedRemains","AddRegion","workingHeuristic","final","nextItem","ProcessRegions","FitUsingHeuristic","unpackItem","packItem","fitWith","Unpack","Pack","toItems","TestData","containerData","ID","Name","Length","Width","Height","itemsData","Quantity","WeightCapacity","StackingCapacity","almost","n1","n2","dim1","dim2","dim3","IsPacked","Dim1","Dim2","Dim3","CoordX","CoordY","CoordZ","PackDimX","PackDimY","PackDimZ","StackedRegions","stackCount","SetStack","HeuRegularParams","HeuRegularSet","VolumeSort","stackedRegionsTree","Topregion","stack","checkRegionTop","workingItem","regionFitTest","FitTest","validItem","SetWorkingItem","ScoringParams","HeuParametric1Params","scoreConstructor","orientationScoreTable","HeuParametric1Set","GetMinDimensions","minDimensionsNoWasteFactor","regionScoreTable","containerLength","minZScore","minYScore","minXScore","minWasteScore","scoreW","scoreH","scoreL","minZWeight","minWasteWeight","score","dummyRegion","RateFit","orientationScore","regionScore","ItemIDs","highestScore","transitionDuration","paddingZ","paddingY","orthoviewsNavigator","Navigate","OrthoviewsNavigator","DisplayPackingResult","CreateOrthoViewsIcons","OnOrthoViewSelected","lights","DefaultLights","light","dlData","Load","dlComp","orthoviewsNavParams","onContainerAdded","TransitionToFrame","containerSize","AddRaycastGroup","onCargoListViewChanged","listViewCenterX","getWorldPosition","centerX","onCargoGroupAdded","onCargoGroupRemoved","onCargoGroupModified","UpdateGroup","boundingView","HUDSetup","Clear","viewType","Toggle","unitCubeEdgeGeometry","EdgesGeometry","wireframeMaterialTemplate","_wireMaterialSettings","meshMaterial","blending","NormalBlending","wireMesh","LineSegments","tempRange","Range","halfLength","range","frequency","_playing","_iid","Note","wave","Sound","options","play","onNoteComplete","Stop","stop","note","Toner","ranges","divs","divLength","Evaluate","GetNote","Play","RelaseNote","Musipack","toner","Once","OnItemPacked","OnItemUnpacked","EvaluateItem","Coords","tempCamOffset","_cargoListView","_boundingView","_recovery","nanRecovery","NaNRecovery","changeFOV","neededRecovery","AssertUpdateRecover","slideDown","SlideUp","SlideDown","TransitionToFOV","Watch"],"mappings":"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","file":"FreightPacker-dev.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 55);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3ca4ee74e909c45958c0","\r\nconst trimVariableRegex = new RegExp(/(?:\\d|_|-)+$/);\r\nconst twopi = 2 * Math.PI;\r\nconst goldenRatio = (1 + Math.sqrt(5)) / 2;\r\nconst goldenRatioConjugate = goldenRatio - 1;\r\n\r\nconst typeofObject = 'object';\r\n\r\nclass Utils {\r\n\r\n    static Redefine(object, constructor){\r\n        var classProperties = object;\r\n        var instanceProperties = object.prototype;\r\n    \r\n        var def = constructor(instanceProperties);\r\n    \r\n        Object.assign(def, classProperties);\r\n        Object.assign(def.prototype, instanceProperties);\r\n        Object.defineProperties(def, Object.getOwnPropertyDescriptors(classProperties));\r\n        Object.defineProperties(def.prototype, Object.getOwnPropertyDescriptors(instanceProperties));\r\n\r\n        return def;\r\n    }\r\n\r\n    /**\r\n     * @template T\r\n     * @param {T} target \r\n     * @param {Object} source \r\n     * @returns {T}\r\n     */\r\n    static AssignUndefined(target, source){\r\n        if(typeof target !== typeofObject){\r\n            target = {};\r\n            Object.assign(target, source);\r\n            return target;\r\n        }\r\n\r\n        var keys = Object.keys(source);\r\n        keys.forEach(key => {\r\n            if(typeof source[key] === typeofObject) Utils.AssignUndefined(target[key], source[key]);\r\n            if(target[key] === undefined) target[key] = source[key];\r\n        });\r\n        return target;\r\n    }\r\n\r\n    static Snapshot(obj){\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n    static GetRectOffset(element){\r\n        var style = window.getComputedStyle(element),\r\n            marginLeft = parseFloat(style.marginLeft),\r\n            marginTop = parseFloat(style.marginTop),\r\n            paddingLeft = parseFloat(style.paddingLeft),\r\n            paddingTop = parseFloat(style.paddingTop);\r\n        return {x: marginLeft + paddingLeft, y: marginTop + paddingTop};\r\n    }\r\n\r\n    static TrimVariable(input){\r\n        return input.replace(trimVariableRegex, '');\r\n    }\r\n\r\n    static LimitString(str, length){\r\n        if(str.length > length) str = str.substring(str.length - length);\r\n        return str;\r\n    }\r\n\r\n    static LoopIndex(i, len){\r\n        i = i % len;\r\n        if(i < 0) i = len + i;\r\n        return i;\r\n    }\r\n\r\n    static FastCircleLoop(divisions, callback){\r\n        // ref: http://iquilezles.org/www/articles/sincos/sincos.htm\r\n        var da = twopi / divisions;\r\n        var a = Math.cos(da);\r\n        var b = Math.sin(da);\r\n        var cos = 1;\r\n        var sin = 0;\r\n        for( var i = 0; i < divisions; i++ )\r\n        {\r\n            var nc = a*cos - b*sin;\r\n            var ns = b*cos + a*sin;\r\n            cos = nc;\r\n            sin = ns;\r\n            callback(cos, sin);\r\n        }\r\n    }\r\n\r\n    static ColorPaletteAsVec3(t, a, b, c, d, color){\r\n        // ref: http://iquilezles.org/www/articles/palettes/palettes.htm\r\n        // return a + b * cos( 6.28318 * ( c * t + d ) );\r\n        color = color || new THREE.Color();\r\n        var r = a.x + b.x * Math.cos( twopi * (c.x * t + d.x) ), \r\n            g = a.y + b.y * Math.cos( twopi * (c.y * t + d.y) ),\r\n            b = a.z + b.z * Math.cos( twopi * (c.z * t + d.z) );\r\n        return color.set(r, g, b);\r\n    }\r\n\r\n    /**\r\n     * Returns the next value [0, 1] in the golden series\r\n     * @param {Number} base \r\n     */\r\n    static GoldenSeries(base){\r\n\t\treturn (base + goldenRatioConjugate) % 1;\r\n    }\r\n\r\n    static VecToString(vector, fixed){\r\n        fixed = fixed || 8;\r\n        return vector.x.toFixed(fixed) + ', ' + vector.y.toFixed(fixed) + (vector.z !== undefined ? ', ' + vector.z.toFixed(fixed) + (vector.w !== undefined ? ', ' + vector.w.toFixed(fixed) : '') : '');\r\n    }\r\n}\r\n\r\nexport default Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils.js","\r\n/** SignalerCallback \r\n * @callback SignalerCallback\r\n * @param {Array<*>} args\r\n */\r\n\r\nclass Signaler {\r\n    constructor(){\r\n        /** @type {Array<SignalerCallback>} */\r\n        this.signals = {};\r\n        /** @type {Array<string>} */\r\n        this.dispatches = {};\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    OnIncludingPrior(event, callback){\r\n        let args = this.dispatches[event];\r\n        if(args){\r\n            callback(...args);\r\n        }\r\n        else{\r\n            this.On(event, callback);\r\n        }\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    On(event, callback){\r\n        if(this.signals[event] === undefined){\r\n            this.signals[event] = [];\r\n        }\r\n        this.signals[event].push(callback);\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    Once(event, callback){\r\n        if(this.signals[event] === undefined){\r\n            this.signals[event] = [];\r\n        }\r\n        let eventCallbacks = this.signals[event];\r\n        let once;\r\n        once = function(...args){\r\n            eventCallbacks.splice(eventCallbacks.indexOf(once), 1);\r\n            callback(...args);\r\n        };\r\n        eventCallbacks.push(once);\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    Off(event, callback){\r\n        let callbacks = this.signals[event];\r\n        if(callbacks){\r\n            let index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {string} event @param {Array<*>} [args] */\r\n    Dispatch(event, ...args){\r\n        this.dispatches[event] = args;\r\n        let callbacks = this.signals[event];\r\n        if(callbacks){\r\n            for(let i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Signaler;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Signaler.js","\r\n// dat.GUI console mirroring\r\n// Access with >> dat.list\r\n\r\nimport Utils from \"../Utils\";\r\n\r\nvar defaultGUIParams = {publish: true, key: ''};\r\n\r\nvar dat = {\r\n    guis: [],\r\n\r\n    controllers: {\r\n        Controller: function(target, key){\r\n\r\n            this.label = key;\r\n\r\n            var onChangeCallback;\r\n            this.onChange = function(callback){\r\n                onChangeCallback = callback;\r\n            };\r\n\r\n            let valueProp = {\r\n                get: function(){\r\n                    return target[key];\r\n                },\r\n                set: function(value){\r\n                    target[key] = value;\r\n                    if(onChangeCallback)\r\n                        onChangeCallback();\r\n                }\r\n            };\r\n            Object.defineProperty(this, 'value', valueProp);\r\n\r\n            Object.defineProperties(this, {\r\n                list: {\r\n                    get: (function(){\r\n                        let isFunction = typeof target[key] === 'function';\r\n                        if(isFunction){\r\n                            return function(){\r\n                                return {\r\n                                    get: function(){\r\n                                        target[key]();\r\n                                        return target[key];\r\n                                    }\r\n                                };\r\n                            };\r\n                        }\r\n                        else{\r\n                            return function(){\r\n                                return valueProp;\r\n                            };\r\n                        }\r\n                    })()\r\n                }\r\n            });\r\n\r\n            this.step = function(){return this;};\r\n            this.listen = function(){return this;};\r\n            this.updateDisplay = function(){return this;};\r\n        }\r\n    },\r\n\r\n    GUI: function(params){\r\n        this.i = 0;\r\n        this.data = {};\r\n        this.__controllers = [];\r\n        this.__folders = [];\r\n\r\n        params = Utils.AssignUndefined(params, defaultGUIParams);\r\n\r\n        this.label = params.label;\r\n\r\n        if(params.publish)\r\n            dat.guis.push(this);\r\n\r\n        this.add = function(target, key){\r\n            let controller = new dat.controllers.Controller(target, key);\r\n            this.__controllers.push(controller);\r\n            let isFunction = typeof target[key] === 'function';\r\n            this.data[(this.i++).toString() + ') ' + controller.label + (isFunction ? '()' : '')] = controller;\r\n            return controller;\r\n        };\r\n\r\n        this.addFolder = function(label){\r\n            let folder = new dat.GUI({publish: false, key: label});\r\n            this.__folders.push(folder);\r\n            this.data[(this.i++).toString() + ') >> ' + label] = folder;\r\n            return folder;\r\n        };\r\n\r\n        this.open = function(){return this;};\r\n\r\n        Object.defineProperties(this, {\r\n            domElement: {\r\n                get: function(){\r\n                    return document.createElement('div');\r\n                }\r\n            },\r\n            list: {\r\n                get: function(){\r\n                    let result = {};\r\n                    let keys = Object.keys(this.data);\r\n                    let data = this.data;\r\n                    for(var iKey = 0; iKey < keys.length; iKey++){\r\n                        let key = keys[iKey];\r\n                        let listProp = data[key].list;\r\n                        Object.defineProperty(result, key, listProp.get ? \r\n                            listProp :\r\n                            {\r\n                                get: function(){\r\n                                    return listProp;\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                    return result;\r\n                }\r\n            }\r\n        });\r\n\r\n        this.destroy = function(){\r\n            var index = dat.guis.indexOf(this);\r\n            if(index !== -1)\r\n                dat.guis.splice(index, 1);\r\n        };\r\n    }\r\n};\r\n\r\nObject.defineProperties(dat, {\r\n    list: {\r\n        get: function(){\r\n            let result = [];\r\n            for(var i = 0; i < this.guis.length; i++){\r\n                result[i] = this.guis[i].list;\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n});\r\n\r\nexport default dat;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIConsole.js","import Utils from \"./Utils\";\r\n\r\nconst logType = {\r\n    trace: 0,\r\n    normal: 1,\r\n    warn: 2\r\n};\r\n\r\nconst logTypeLabel = {\r\n    0: 'Trace',\r\n    1: 'Log',\r\n    2: 'Warn'\r\n};\r\n\r\nconst defaultPrintFilter = {\r\n    0: true,\r\n    1: true,\r\n    2: true\r\n};\r\n\r\nvar programStartTime = Date.now();\r\nvar messages = [];\r\nvar warnOnce = {};\r\n\r\nclass Message {\r\n    constructor(type, ...args){\r\n        this.type = type;\r\n        this.timestamp = Date.now();\r\n        this.content = [];\r\n        args.forEach(arg => {\r\n            if(typeof arg === 'string'){\r\n                this.content.push(arg);\r\n            }\r\n            else{\r\n                try{\r\n                    var json = JSON.stringify(arg).substr(0, 2000);\r\n                    this.content.push(json);\r\n                }\r\n                catch(err){\r\n                    this.content.push('  parse error: ' + err);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    ToString(){\r\n        return ((this.timestamp - programStartTime) / 1000).toFixed(2) + ' ' + logTypeLabel[this.type];\r\n    }\r\n}\r\n\r\nclass Logger {\r\n\r\n    static set active(value){\r\n        this._active = value;\r\n    }\r\n\r\n    static set toConsole(value){\r\n        this._toConsole = value;\r\n    }\r\n\r\n    static set traceToConsole(value){\r\n        this._traceToConsole = value;\r\n    }\r\n\r\n    static AddLog(message){\r\n        messages.push(message);\r\n    }\r\n\r\n    static Trace(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.trace, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole || this._traceToConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Log(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.normal, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole){\r\n                console.log(...args);\r\n            }\r\n        }\r\n    }\r\n\r\n    static Warn(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.warn, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole) console.warn(...args);\r\n        }\r\n    }\r\n\r\n    static LogOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Log(...args);\r\n        }\r\n    }\r\n\r\n    static WarnOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Warn(...args);\r\n        }\r\n    }\r\n\r\n    static Print(filter){\r\n        Utils.AssignUndefined(filter, defaultPrintFilter);\r\n\r\n        var output = 'Log:\\n';\r\n        messages.forEach(message => {\r\n            if(filter[message.type]){\r\n                output += message.ToString() + '\\n';\r\n            }\r\n        });\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nLogger.active = true;\r\n\r\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Logger.js","import ColorTemplate from \"./ColorTemplate\";\r\nimport Signaler from \"../../utils/cik/Signaler\";\r\nimport Resources from \"../../Resources\";\r\n\r\nconst SolidMaterialType = THREE.MeshStandardMaterial;\r\nconst TransparentMaterialType = THREE.MeshStandardMaterial;\r\nconst InvisibleMaterialType = THREE.MeshBasicMaterial;\r\n\r\nconst defaultGeometry = new THREE.CubeGeometry(1, 1, 1);\r\nconst defaultMeshMaterial = new SolidMaterialType({color: 0xaaaaaa});\r\n\r\nconst objectLoader = new THREE.ObjectLoader();\r\nconst jsonLoader = new THREE.JSONLoader();\r\n\r\nconst castShadow = true;\r\nconst receiveShadow = true;\r\n\r\n/** @type {Map<string, ColorTemplate>} */\r\nvar colorTemplates = new Map();\r\n\r\nvar signaler = new Signaler();\r\nconst signals = {\r\n    resourcesSet: 'resourcesSet'\r\n};\r\n\r\nconst _resources = Symbol('resources');\r\n\r\nclass Asset {\r\n    constructor(){\r\n\r\n    }\r\n\r\n    /** @param {Resources} value */\r\n    static set resources(value){\r\n        Asset[_resources] = value;\r\n        signaler.Dispatch(signals.resourcesSet);\r\n    }\r\n\r\n    static get resources(){ return Asset[_resources]; }\r\n\r\n    /**\r\n     * @param {string} url \r\n     * @param {THREE.Material} material \r\n     * @param {string} mapName \r\n     * @returns {Promise<THREE.Texture>}\r\n     */\r\n    static SetTextureMap(url, material, mapName){\r\n        return new Promise( (resolve, reject) => {\r\n            signaler.OnIncludingPrior(signals.resourcesSet, () => {\r\n                let texture = material[mapName];\r\n                if(texture instanceof THREE.Texture || texture === null){\r\n                    material[mapName] = new THREE.TextureLoader().load(Asset.resources.texturesPath + url, resolve, undefined, reject);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {Number} color hex\r\n     */\r\n    static CreateSolidMaterialMatte(color){\r\n        return new Asset.SolidMaterialType({color: color, roughness: 1, metalness: .2});\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Geometry|THREE.BufferGeometry} geometry \r\n     * @param {THREE.Material} [material]\r\n     */\r\n    static CreateMesh(geometry, material){\r\n        geometry = geometry || defaultGeometry;\r\n        material = material || defaultMeshMaterial;\r\n\r\n        var mesh = new THREE.Mesh(geometry, material);\r\n        return mesh;\r\n    }\r\n\r\n    static RestoreMaterial(material, modified){\r\n        if(modified === undefined) return;\r\n\r\n        let keys = Object.keys(modified);\r\n        for(let i = 0; i < keys.length; i++){\r\n            let key = keys[i];\r\n            if(material[key] !== undefined){\r\n                if(material[key].setHex){\r\n                    /** @type {THREE.Color} */\r\n                    let color = material.color;\r\n                    color.setHex(modified[key]);\r\n                }\r\n                else{\r\n                    material[key] = modified[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static SetMaterialFocus(material, value, modified){\r\n\r\n        /** @type {THREE.Color} */\r\n        let color = material.color;\r\n        if(color !== undefined){\r\n            if(modified) modified.color = color.getHex();\r\n\r\n            let reduce = (value - 1) / 4;\r\n            color.r = THREE.Math.clamp(color.r - reduce, 0, 1);\r\n            color.g = THREE.Math.clamp(color.g - reduce, 0, 1);\r\n            color.b = THREE.Math.clamp(color.b - reduce, 0, 1);\r\n        }\r\n\r\n        /** @type {Number} */\r\n        let opacity = material.opacity;\r\n        if(opacity !== undefined){\r\n            if(modified){\r\n                modified.opacity = opacity;\r\n                modified.transparent = material.transparent;\r\n            }\r\n\r\n            material.opacity = THREE.Math.clamp(material.opacity * value, 0, 1);;\r\n            material.transparent = material.opacity < 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @typedef GeometryJSONReturn\r\n     * @property {THREE.Geometry|THREE.BufferGeometry} geometry\r\n     * @property {Array<THREE.Material>} [materials]\r\n     * \r\n     * @param {Object} json - Representing Geometry or BufferGeometry json data\r\n     * @param {string} [texturePath] - optional texture url \r\n     * @returns {GeometryJSONReturn}\r\n     */\r\n    static FromGeometryJSON(json, texturePath){\r\n        return jsonLoader.parse(json, texturePath);\r\n    }\r\n\r\n    /**\r\n     * @param {Object} json \r\n     * @returns {THREE.Object3D}\r\n     */\r\n    static FromJSON(json){\r\n        return objectLoader.parse(json);\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object */\r\n    static StandardSceneObject(object){\r\n        Asset.CastReceiveShadow(object);\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\r\n    static CastReceiveShadow(object, value){\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.castShadow = value === undefined ? castShadow : value;\r\n                child.receiveShadow = value === undefined ? receiveShadow : value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\r\n    static ReceiveShadow(object, value){\r\n        if(value === undefined) value = receiveShadow;\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.receiveShadow = value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\r\n    static CastShadow(object, value){\r\n        if(value === undefined) value = castShadow;\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.castShadow = value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {string} key \r\n     * @param {Array<string|THREE.Color>} colors \r\n     */\r\n    static CreateColorTemplate(key, ...colors){\r\n        var template = new ColorTemplate(...colors);\r\n        colorTemplates.set(key, template);\r\n    }\r\n\r\n    /**\r\n     * @param {string} key \r\n     */\r\n    static ColorTemplates(key){\r\n        return colorTemplates.get(key);\r\n    }\r\n\r\n}\r\n\r\nAsset.SolidMaterialType = SolidMaterialType;\r\nAsset.TransparentMaterialType = TransparentMaterialType;\r\nAsset.InvisibleMaterialType = InvisibleMaterialType;\r\n\r\nAsset.CreateColorTemplate('Containers', 0x020202, 0x7f7f7f, 0xffffff);\r\n\r\nexport default Asset;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/Asset.js","import { StackingProperty, RotationConstraint, TranslationConstraint } from \"./PackingProperty\";\r\nimport Dimensions from \"./Dimensions\";\r\nimport TextField from \"../common/TextField\";\r\nimport CargoEntry from \"../common/CargoEntry\";\r\n\r\n/**\r\n * @typedef {Object} BoxEntryProperties\r\n * @property {StackingProperty} stacking\r\n * @property {RotationConstraint} rotation\r\n * @property {TranslationConstraint} translation\r\n */\r\n\r\nvar numEntries = 0;\r\nfunction getDefaultLabel(){\r\n    return 'Box ' + numEntries.toString();\r\n}\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass BoxEntry extends CargoEntry {\r\n    constructor(){\r\n        numEntries++;\r\n\r\n        super();\r\n        this.type = 'BoxEntry';\r\n\r\n        this.dimensions = new Dimensions(0, 0, 0);\r\n\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n        \r\n        /**\r\n         * @type {BoxEntryProperties}\r\n         */\r\n        this.properties;\r\n\r\n        this.properties.stacking    = new StackingProperty();\r\n        this.properties.rotation    = new RotationConstraint();\r\n        this.properties.translation = new TranslationConstraint();\r\n        \r\n        this.descriptions.set('label', new TextField('label', getDefaultLabel()));\r\n    }\r\n\r\n    set weight(value){ super.weight = value; }\r\n    get weight(){\r\n        return super.weight;\r\n    }\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    get label(){\r\n        var field = this.descriptions.get('label');\r\n        return field ? field.content : undefined;\r\n    }\r\n\r\n    set label(value){\r\n        var field = this.descriptions.get('label');\r\n        if(field)\r\n            field.content = value;\r\n        else\r\n            this.descriptions.set('label', new TextField('label', value));\r\n    }\r\n\r\n    Reset(){\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n\r\n        this.properties.stacking.Reset();\r\n        this.properties.rotation.Reset();\r\n        this.properties.translation.Reset();\r\n\r\n        var label = this.descriptions.get('label');\r\n        label.content = TextField.defaultContent;\r\n        this.descriptions.clear();\r\n        this.descriptions.set('label', label);\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    Copy(entry){\r\n        this.dimensions.Copy(entry.dimensions);\r\n        this.weight = entry.weight;\r\n        this.quantity = entry.quantity;\r\n\r\n        this.properties.stacking.Copy(entry.properties.stacking);\r\n        this.properties.rotation.Copy(entry.properties.rotation);\r\n        this.properties.translation.Copy(entry.properties.translation);\r\n\r\n        for(var [key, field] of entry.descriptions){\r\n            let own = this.descriptions.get(key);\r\n            if(own)\r\n                own.Copy(field);\r\n            else\r\n                this.descriptions.set(key, field.Clone());\r\n        }\r\n    }\r\n\r\n    Clone(){\r\n        var entry = new BoxEntry();\r\n        \r\n        entry.dimensions = this.dimensions.Clone();\r\n\r\n        entry.weight = this.weight;\r\n        entry.quantity = this.quantity;\r\n\r\n        entry.properties.stacking      = this.properties.stacking.Clone();\r\n        entry.properties.rotation       = this.properties.rotation.Clone();\r\n        entry.properties.translation    = this.properties.translation.Clone();\r\n\r\n        for(var [key, field] of this.descriptions){\r\n            entry.descriptions.set(key, field.Clone());\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    ToString(){\r\n        return '\\'' + this.descriptions.get('label').content + '\\': ' + this.dimensions.ToString();\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    static Assert(entry){\r\n        return entry instanceof BoxEntry\r\n            && Dimensions.Assert(entry.dimensions)\r\n            && entry.properties\r\n            && entry.descriptions\r\n            && entry.weight !== undefined\r\n            && entry.quantity !== undefined\r\n                && typeof entry.weight === numberType\r\n                && typeof entry.quantity === numberType\r\n                && StackingProperty.Assert(entry.properties.stacking)\r\n                && RotationConstraint.Assert(entry.properties.rotation)\r\n                && TranslationConstraint.Assert(entry.properties.translation)\r\n        ;\r\n    }\r\n}\r\n\r\nBoxEntry.StackingProperty = StackingProperty;\r\nBoxEntry.RotationConstraint = RotationConstraint;\r\nBoxEntry.TranslationConstraint = TranslationConstraint;\r\n\r\nexport default BoxEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/BoxEntry.js","import TextField from \"./TextField\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst _weight = Symbol('weight');\r\n\r\nclass CargoEntry {\r\n    constructor(){\r\n        this.type = 'CargoEntry';\r\n\r\n        this.quantity = 0;\r\n        this.properties = {};\r\n        this.uid = '';\r\n        this[_weight] = 0;\r\n\r\n        /**\r\n         * @type {Map<string, TextField>}\r\n         */\r\n        this.descriptions = new Map();\r\n    }\r\n\r\n    /** @returns {Number} */\r\n    get weight(){ return this[_weight]; }\r\n    set weight(value){ this[_weight] = value; }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    /** @param {string} key @param {string} [value] ommit value param to get description content instead of setting it */\r\n    Description(key, value){\r\n        let d = this.descriptions.get(key);\r\n        if(d){\r\n            if(value === undefined) return d.content;\r\n\r\n            d.content = value;\r\n        }\r\n        else{\r\n            if(value === undefined) return false;\r\n\r\n            d = new TextField(key, value);\r\n            this.descriptions.set(key, d);\r\n        }\r\n    }\r\n\r\n    /** @param {string} key */\r\n    DeleteDescription(key){\r\n        if( this.descriptions.has(key) ) this.descriptions.delete(key);\r\n    }\r\n\r\n    Copy(entry){\r\n        Logger.Warn('CargoEntry.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('CargoEntry.Clone is not implemented');\r\n    }\r\n\r\n    ToString(){\r\n        \r\n    }\r\n}\r\n\r\nexport default CargoEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/CargoEntry.js","import ContainingVolume from \"./ContainingVolume\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst type = 'Container';\r\n\r\nvar combinedVolume = new ContainingVolume();\r\n\r\nclass Container {\r\n    constructor(){\r\n        /**\r\n         * Containing volumes array\r\n         * @type {Array<ContainingVolume>}\r\n         */\r\n        this.volumes = [];\r\n\r\n        Logger.WarnOnce('Container.constructor', 'label not implemented');\r\n    }\r\n\r\n    /** @param {ContainingVolume} volume */\r\n    Add(volume){\r\n        this.volumes.push(volume);\r\n    }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    get combinedVolume(){\r\n        let minX = Number.MAX_SAFE_INTEGER,\r\n            minY = Number.MAX_SAFE_INTEGER,\r\n            minZ = Number.MAX_SAFE_INTEGER;\r\n\r\n        let maxX = Number.MIN_SAFE_INTEGER,\r\n            maxY = Number.MIN_SAFE_INTEGER,\r\n            maxZ = Number.MIN_SAFE_INTEGER;\r\n\r\n        let combinedWeightCapacity = 0;\r\n        \r\n        this.volumes.forEach(volume => {\r\n            let pos = volume.position;\r\n            let dim = volume.dimensions;\r\n            if(pos.x < minX) minX = pos.x;\r\n            if(pos.y < minY) minY = pos.y;\r\n            if(pos.z < minZ) minZ = pos.z;\r\n            if(pos.x + dim.width > maxX) maxX = pos.x + dim.width;\r\n            if(pos.y + dim.height > maxY) maxY = pos.y + dim.height;\r\n            if(pos.z + dim.length > maxZ) maxZ = pos.z + dim.length;\r\n\r\n            combinedWeightCapacity += volume.weightCapacity;\r\n        });\r\n\r\n        combinedVolume.container = this;\r\n        combinedVolume.dimensions.Set(maxX - minX, maxZ - minZ, maxY - minY);\r\n        combinedVolume.position.set((maxX + minX) / 2, (maxZ + minZ) / 2, (maxY + minY) / 2);\r\n        combinedVolume.weightCapacity = combinedWeightCapacity;\r\n        \r\n        return combinedVolume;\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            volumes: this.volumes\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        var result = type + '[';\r\n        for(var i = 0, numVolumes = this.volumes.length; i < numVolumes; i++){\r\n            result += this.volumes[i].ToString() + (i < numVolumes - 1 ? ', ' : ']');\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var container = new Container();\r\n        for(var i = 0, numVolumes = data.volumes.length; i < numVolumes; i++){\r\n            var containingVolume = ContainingVolume.FromJSON(data.volumes[i]);\r\n            containingVolume.container = container;\r\n            container.Add(containingVolume);\r\n        }\r\n\r\n        return container;\r\n    }\r\n\r\n    get volume(){\r\n        var index = this.volumes.length - 1;\r\n        return this.volumes[index];\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Container.js","\r\n/** @typedef Vec2 @property {Number} x @property {Number} y */\r\n/** @typedef Rectangle @property {Vec2} p1 @property {Vec2} p2 @property {Vec2} p3 @property {Vec2} p4 */\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst smallValue = .000001;\r\nconst smallValueSqrt = .001;\r\n\r\n// line intercept math by Paul Bourke http://paulbourke.net/geometry/pointlineplane/\r\n// Determine the intersection point of two line segments\r\n// Return FALSE if the lines don't intersect\r\nfunction segmentIntersect(x1, y1, x2, y2, x3, y3, x4, y4) {\r\n\r\n    // Check if none of the lines are of length 0\r\n    if ((x1 === x2 && y1 === y2) || (x3 === x4 && y3 === y4)) {\r\n        return false;\r\n    }\r\n  \r\n    var denominator = ((y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1));\r\n  \r\n    // Lines are parallel\r\n    if (Math.abs(denominator) < epsilon) {\r\n        return false;\r\n    }\r\n  \r\n    var ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denominator;\r\n    var ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denominator;\r\n  \r\n    // is the intersection along the segments\r\n    if (ua > 0 || ua < 1 || ub > 0 || ub < 1) return false;\r\n  \r\n    // Return a object with the x and y coordinates of the intersection\r\n    var x = x1 + ua * (x2 - x1);\r\n    var y = y1 + ua * (y2 - y1);\r\n\r\n    return {x, y};\r\n}\r\n\r\nfunction linesIntersect(ax, ay, bx, by, cx, cy, dx, dy){\r\n    // Line AB represented as a1x + b1y = c1\r\n    var a1 = by - ay,\r\n        b1 = ax - bx;\r\n    var c1 = a1 * ax + b1 * ay;\r\n  \r\n    // Line CD represented as a2x + b2y = c2\r\n    var a2 = dy - cy,\r\n        b2 = cx - dx;\r\n    var c2 = a2 * cx + b2 * cy;\r\n  \r\n    var determinant = a1 * b2 - a2 * b1;\r\n  \r\n    // The lines are parallel\r\n    if (Math.abs(determinant) < smallValue) return false;\r\n\r\n    var x = (b2 * c1 - b1 * c2) / determinant;\r\n    var y = (a1 * c2 - a2 * c1) / determinant;\r\n    return {x: x, y: y};\r\n}\r\n\r\nfunction rectangleContainsPoint(offset, rx, ry, rw, rh, px, py){\r\n    var x = rx - offset, y = ry - offset, w = rw + offset * 2, h = rh + offset * 2;\r\n    return px > x && px < x + w\r\n        && py > y && py < y + h;\r\n}\r\n\r\n/** @param {Number} offset offsets the region by this before checking * @param {Region} subRegion */\r\nfunction rectangleContainsRectangle(offset, rx, ry, rw, rh, ox, oy, ow, oh){\r\n    var x = rx - offset, y = ry - offset, w = rw + offset * 2, h = rh + offset * 2;\r\n    return ox > x && ox + ow < x + w\r\n        && oy > y && oy + oh < y + h;\r\n}\r\n\r\n/**\r\n * @param {Array<Vec2>} points\r\n */\r\nfunction rectanglesFromPoints(points){\r\n    // Separate points in lists of 'y' coordinate, grouped by 'x' coordinate\r\n    const toInt = Math.round(1 / smallValue);\r\n    var xs = {};\r\n    points.forEach(point => {\r\n        let xCat = Math.floor(point.x * toInt);\r\n        if(xs[xCat] === undefined) xs[xCat] = {x: point.x, ys: []};\r\n        let ys = xs[xCat].ys;\r\n        let yCat = Math.floor(point.y * toInt);\r\n        let insert = true;\r\n        for(let iY = 0; iY < ys.length; iY++){\r\n            if(ys[iY].yCat === yCat) insert = false;\r\n        }\r\n        if(insert) ys.push({yCat: yCat, y: point.y});\r\n    });\r\n\r\n    //console.log('xs:', xs);\r\n\r\n    // Intersect lists\r\n    function sortYCat(a, b){\r\n        if(a.yCat < b.yCat) return -1;\r\n        if(a.yCat > b.yCat) return 1;\r\n        return 0;\r\n    }\r\n    var xsKeys = Object.keys(xs);\r\n    for(let iX = 0; iX < xsKeys.length; iX++){\r\n        let xCat = xs[xsKeys[iX]];\r\n        xCat.ys.sort(sortYCat);\r\n    }\r\n\r\n    /** @typedef IntersectedX @property {Number} x1 @property {Number} x2 @property {Array<Number>} ys */\r\n    /** @type {Array<IntersectedX>} */\r\n    var intersectedXs = [];\r\n    for(let iX = 0; iX < xsKeys.length; iX++){\r\n        let xCat1 = xs[xsKeys[iX]];\r\n        let ys1 = xCat1.ys;\r\n        for(let iX2 = iX + 1; iX2 < xsKeys.length; iX2++){\r\n            let xCat2 = xs[xsKeys[iX2]];\r\n            let ys2 = xCat2.ys;\r\n\r\n            let yIntersect = [];\r\n            let xIntersect = {x1: xCat1.x, x2: xCat2.x, ys: yIntersect};\r\n            for(let iY1 = 0; iY1 < ys1.length; iY1++){\r\n                for(let iY2 = 0; iY2 < ys2.length; iY2++){\r\n                    if(ys1[iY1].yCat === ys2[iY2].yCat){\r\n                        yIntersect.push(ys1[iY1].y);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if(yIntersect.length > 1) intersectedXs.push(xIntersect);\r\n        }\r\n    }\r\n\r\n    //console.log(intersectedXs);\r\n\r\n    /** @type {Array<Rectangle>} */\r\n    var rectangles = [];\r\n    for(let iIX = 0; iIX < intersectedXs.length; iIX++){\r\n        let intersectedX = intersectedXs[iIX];\r\n        let ys = intersectedX.ys;\r\n        let x1 = intersectedX.x1, x2 = intersectedX.x2;\r\n        for(let iY1 = 0; iY1 < ys.length; iY1++){\r\n            for(let iY2 = iY1 + 1; iY2 < ys.length; iY2++){\r\n                let p1 = {x: x1, y: ys[iY1]},\r\n                    p2 = {x: x2, y: ys[iY1]},\r\n                    p3 = {x: x2, y: ys[iY2]},\r\n                    p4 = {x: x1, y: ys[iY2]};\r\n                \r\n                let rectangle = {p1: p1, p2: p2, p3: p3, p4: p4};\r\n                rectangles.push(rectangle);\r\n            }\r\n        }\r\n    }\r\n\r\n    return rectangles;\r\n}\r\n\r\n/**\r\n * @param {Array<Rectangle>} rectangles \r\n * @returns {Array<Rectangle>} the array is edited in-place\r\n */\r\nfunction reduceRectangles(rectangles){\r\n    for(let iRect = 0; iRect < rectangles.length; iRect++){\r\n        let ra = rectangles[iRect];\r\n        let ax = ra.p1.x, ay = ra.p1.y;\r\n        let aw = ra.p3.x - ax, ah = ra.p3.y - ay;\r\n        for(let jRect = 0; jRect < rectangles.length; jRect++){\r\n            if(iRect !== jRect){\r\n                let rb = rectangles[jRect];\r\n                let bx = rb.p1.x, by = rb.p1.y;\r\n                let bw = rb.p3.x - bx, bh = rb.p3.y - by;\r\n                if(rectangleContainsRectangle(smallValue, ax, ay, aw, ah, bx, by, bw, bh)){\r\n                    rectangles.splice(jRect, 1);\r\n                    jRect--;\r\n                    iRect = Math.max(0, jRect - 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return rectangles;\r\n}\r\n\r\n/** @param {Number} ax @param {Number} ay @param {Number} bx @param {Number} by @param {Number} x @param {Number} y */\r\nfunction segmentContainsPoint(ax, ay, bx, by, x, y){\r\n    var vx = bx - ax, vy = by - ay,\r\n        vxa = x - ax, vya = y - ay,\r\n        vxb = x - bx, vyb = y - by;\r\n    var d = Math.sqrt(vx * vx + vy * vy),\r\n        da = Math.sqrt(vxa * vxa + vya * vya),\r\n        db = Math.sqrt(vxb * vxb + vyb * vyb);\r\n    return Math.abs( d - (da + db) ) < smallValueSqrt;\r\n}\r\n\r\nexport {\r\n    epsilon,\r\n    smallValue,\r\n    smallValueSqrt,\r\n    linesIntersect,\r\n    rectangleContainsPoint,\r\n    rectangleContainsRectangle,\r\n    reduceRectangles,\r\n    rectanglesFromPoints\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/Math2D.js","\r\n/** SignalerCallback \r\n * @callback SignalerCallback\r\n * @param {Array<*>} args\r\n */\r\n\r\nconst _signals = Symbol('signals');\r\nconst _dispatches = Symbol('dispatches');\r\n\r\nclass LightDispatcher {\r\n    constructor(){\r\n        this[_signals] = {};\r\n        this[_dispatches] = {};\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    On(event, callback){\r\n        if(this[_signals][event] === undefined){\r\n            this[_signals][event] = [];\r\n        }\r\n        this[_signals][event].push(callback);\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    Off(event, callback){\r\n        var callbacks = this[_signals][event];\r\n        if(callbacks){\r\n            var index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {string} event @param {Array<*>} [args] */\r\n    Dispatch(event, ...args){\r\n        this[_dispatches][event] = args;\r\n        var callbacks = this[_signals][event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default LightDispatcher;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/LightDispatcher.js","import Utils from \"../Utils\";\r\n\r\nconst serializeModes = {\r\n    none: 'none',\r\n    json: 'json'\r\n};\r\n\r\n/**\r\n * @typedef ConfigParams\r\n * @property {Boolean} debug\r\n * @property {Boolean} save\r\n * @property {serializeModes} serializeMode\r\n */\r\n\r\n\r\nclass Controller {\r\n    constructor(property, min, max, step, onChange){\r\n        this.property = property;\r\n        this.min = min;\r\n        this.max = max;\r\n        this.step = step;\r\n        this.onChange = onChange;\r\n    }\r\n\r\n    /**\r\n     * @returns {Array<Controller>}\r\n     */\r\n    static Multiple(properties, min, max, step, onChange){\r\n        var controllers = [];\r\n        properties.forEach(property => {\r\n            controllers.push(new Controller(property, min, max, step, onChange));\r\n        });\r\n        return controllers;\r\n    }\r\n}\r\n\r\nfunction createKeyInfo(obj, key){\r\n    var isFolderGrouped = key[0] == \"#\";\r\n    if(isFolderGrouped)\r\n        key = key.substr(1);\r\n    \r\n    var propertyPath = key;\r\n    \r\n    key = key.split('.');\r\n    var folder = isFolderGrouped ? key.slice(0, key.length - 1).join('.') : undefined;\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    return {\r\n        id: (folder ? folder + '.' : '') + key[0],\r\n        folder: folder,\r\n        owner: obj,\r\n        key: key[0],\r\n        propertyPath: propertyPath\r\n    };\r\n}\r\n\r\nfunction getKey(obj, key){\r\n    return key.split('.').reduce(function(a, b){\r\n        return a && a[b];\r\n    }, obj);\r\n}\r\n\r\nfunction setKey(obj, key, val){\r\n    key = key.split('.');\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    var endKey = key.shift();\r\n    if(obj[endKey].setHex){\r\n        obj[endKey].setHex(val);\r\n    }\r\n    else{\r\n        obj[endKey] = val;\r\n    }\r\n    return obj[endKey];\r\n}\r\n\r\nfunction download(data, filename, type) {\r\n    // https://stackoverflow.com/a/30832210/1712403\r\n    var file = new Blob([data], {type: (type || 'text/plain')});\r\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n        window.navigator.msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        var a = document.createElement(\"a\"),\r\n                url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nconst defaultEditParams = {\r\n    save: true, debug: true\r\n};\r\n\r\n/** \r\n * @typedef GUI\r\n * @property {HTMLElement} domElement\r\n */\r\n\r\nclass Shortcut{\r\n    /**\r\n     * @param {string} label \r\n     */\r\n    constructor(label){\r\n        this.label = label;\r\n\r\n        ///** @type {Map<string, GUI>} */\r\n        //this.folders = new Map();\r\n\r\n        this.controller = {};\r\n    }\r\n\r\n    Add(label, target){\r\n        label = label.replace(new RegExp(' ', 'g'), '_');\r\n        this.controller[label] = target;\r\n        Config.shortcutsGUI.add(this.controller, label);\r\n        //console.log('added ' + label + ' shortcut to ' + this.label);\r\n    }\r\n}\r\n\r\n/** @type {GUI} */\r\nvar shortcutsGUI;\r\n\r\n/** @type {Map<string, Shortcut>} */\r\nvar shortcuts = new Map();\r\n\r\n/** @type {Map<Object, Config>} */\r\nvar instances = new Map();\r\n\r\n\r\nclass Config {\r\n    constructor(target){\r\n        if(!Config.debug) \r\n            Config.debug = instances;\r\n        instances.set(target, this);\r\n\r\n        this.target = target;\r\n        this.keys = [];\r\n    }\r\n\r\n    Track(...args){\r\n        var keys = this.keys;\r\n        args.forEach(key => {\r\n            keys.push(key);\r\n        });\r\n    }\r\n\r\n    Snapshot(ignoreKeys){\r\n        var data = {};\r\n        var target = this.target;\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            var keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                data[keyInfo.id] = keyValue;\r\n            }\r\n            else if(ignoreKeys !== undefined){\r\n                var warn = true;\r\n                ignoreKeys.forEach(ignoredKey => {\r\n                    if(ignoredKey === keyInfo.id){\r\n                        warn = false;\r\n                    }\r\n                });\r\n                if(warn) console.log('Config.Snapshot warning: \"' + keyInfo.id + '\" changes will be lost');\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Serialize(){\r\n        var data = {};\r\n        this.keys.forEach(key => {\r\n            let isController = key instanceof Controller;\r\n            let keyInfo = createKeyInfo(this.target, isController ? key.property : key);\r\n            let keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                var saveValue = keyInfo.owner[keyInfo.key].isColor ? '0x' + Number.parseInt(keyValue.toJSON()).toString(16) : keyValue;\r\n                data[keyInfo.propertyPath] = saveValue;\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Save(){\r\n        if(this.Update){\r\n            this.Update();\r\n            this.data = this.Snapshot();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Function} guiChanged \r\n     * @param {string} label \r\n     * @param {string} gui - or a dat.GUI object\r\n     * @param {ConfigParams} params \r\n     */\r\n    Edit(guiChanged, label, gui, params){\r\n\r\n        params = Utils.AssignUndefined(params, defaultEditParams);\r\n\r\n        var controllers = [];\r\n        var target = this.target;\r\n        if(gui === undefined) {\r\n            \r\n            gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n                autoPlace: true\r\n            });\r\n        }\r\n        else if(label){\r\n            gui = gui.addFolder(label);\r\n        }\r\n\r\n        if(this.editing === undefined){\r\n            this.editing = {};\r\n \r\n            this.Update = function(){\r\n                require(\"./datGUIExtensions\");\r\n                \r\n                gui.updateAll();\r\n                guiChanged();\r\n            };\r\n \r\n            gui.add(this, 'Update');\r\n        }\r\n\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            if(this.editing[keyInfo.id] !== true){\r\n                var folder = gui;\r\n                if(keyInfo.folder){\r\n                    require(\"./datGUIExtensions\");\r\n\r\n                    if(gui.find)\r\n                        folder = gui.find(keyInfo.folder);\r\n                    else\r\n                        console.warn('gui extensions not found!');\r\n                        \r\n                    if(!folder)\r\n                        folder = gui.addFolder(keyInfo.folder);\r\n                }\r\n                var addFunction = keyInfo.owner[keyInfo.key].isColor ? folder.addColor : folder.add;\r\n                controllers.push(\r\n                    ( isController && key.min !== undefined ? \r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key, key.min, key.max, key.step\r\n                        ) :\r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key\r\n                        )\r\n                    ) .onChange(key.onChange === undefined ? guiChanged : \r\n                        (function(){\r\n                            key.onChange.call(keyInfo.owner);\r\n                            guiChanged();\r\n                        })\r\n                    )\r\n                );\r\n                this.editing[keyInfo.id] = true;\r\n            }\r\n        });\r\n\r\n        var scope = this;\r\n        var editor = {\r\n            Save: function(){\r\n                scope.Save();\r\n                var filename = label !== undefined ? (label + (label.indexOf('.json') === -1 ? '.json' : '')) : 'config.json';\r\n                download(scope.data, filename);\r\n            },\r\n\r\n            Debug: function(){\r\n                console.log(scope.target);\r\n            },\r\n\r\n            Serialize: function(){\r\n                if(scope.Update){\r\n                    scope.Update();\r\n                    var data = scope.Serialize();\r\n                    var json = JSON.stringify(data);\r\n                    console.log(data, json);\r\n                }\r\n            }\r\n        }\r\n        if(params.save){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Save'] !== true){\r\n                this.defaultsFolder.add(editor, 'Save');\r\n                this.editing['editor.Save'] = true;\r\n            }\r\n        }\r\n        if(params.debug){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Debug'] !== true){\r\n                this.defaultsFolder.add(editor, 'Debug');\r\n                this.editing['editor.Debug'] = true;\r\n            }\r\n        }\r\n\r\n        switch(params.serializeMode){\r\n            default: break;\r\n            case serializeModes.json:\r\n                if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n                if(this.editing['editor.Serialize'] !== true){\r\n                    this.defaultsFolder.add(editor, 'Serialize');\r\n                    this.editing['editor.Serialize'] = true;\r\n                }\r\n                break;\r\n        }\r\n\r\n        this.gui = gui;\r\n    }\r\n\r\n    toJSON(){\r\n        if(this.data === undefined) console.warn(this.target, 'is being saved with undefined data.');\r\n        return this.data;\r\n    }\r\n\r\n    static get serializeModes(){\r\n        return serializeModes;\r\n    }\r\n\r\n    static get shortcuts(){\r\n        return shortcuts;\r\n    }\r\n\r\n    static get shortcutsGUI(){\r\n        if(shortcutsGUI === undefined) shortcutsGUI = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n            autoPlace: false\r\n        });\r\n        return shortcutsGUI;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {string} property - #property marks a folder\r\n     * @param {Array<string>} subProperties \r\n     * @returns returns the subProperties full paths\r\n     */\r\n    static Unroll(property, ...subProperties){\r\n        var unrolled = [];\r\n        subProperties.forEach(subProperty => {\r\n            unrolled.push(property + '.' + subProperty);\r\n        });\r\n        return unrolled;\r\n    }\r\n\r\n    /**\r\n     * @param {*} target \r\n     * @param {*} data \r\n     */\r\n    static Load(target, data){\r\n        var keys = Object.keys(data);\r\n        keys.forEach(key => {\r\n            setKey(target, key, data[key]);\r\n        });\r\n\r\n        if(instances.has(target) && instances.get(target).Update)\r\n            instances.get(target).Update();\r\n    }\r\n\r\n    /**\r\n     * @param {string} category\r\n     * @param {string} label \r\n     * @param {Function} target \r\n     */\r\n    static MakeShortcut(category, label, target){\r\n        if(shortcuts.has(category) === false) shortcuts.set(category, new Shortcut(category));\r\n        var shortcut = shortcuts.get(category);\r\n        shortcut.Add(label, target);\r\n    }\r\n}\r\n\r\nConfig.Controller = Controller;\r\n\r\nexport default Config;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Config.js","import { epsilon, smallValue, smallValueSqrt, rectanglesFromPoints, linesIntersect, rectangleContainsPoint, reduceRectangles } from \"./Math2D\";\r\n\r\n/** @typedef Rectangle @property {Vec2} p1 @property {Vec2} p2 @property {Vec2} p3 @property {Vec2} p4 \r\n * @property {Number} weight @property {Number} weightCapacity @property {Number} stackingCapacity \r\n */\r\n\r\n/**\r\n * @param {Rectangle | Array<Rectangle>} rect \r\n * @param {Number} weight \r\n * @param {Number} weightCapacity \r\n * @param {Number} stackingCapacity \r\n */\r\nfunction setRectangleWeights(rect, weight, weightCapacity, stackingCapacity){\r\n    if(rect instanceof Array){\r\n        for(let i = 0; i < rect.length; i++){\r\n            rect[i].weight = weight;\r\n            rect[i].weightCapacity = weightCapacity;\r\n            rect[i].stackingCapacity = stackingCapacity;\r\n        }\r\n    }\r\n    else{\r\n        rect.weight = weight;\r\n        rect.weightCapacity = weightCapacity;\r\n        rect.stackingCapacity = stackingCapacity;\r\n    }\r\n}\r\n\r\nconst maxWeightValue = Number.MAX_SAFE_INTEGER;\r\n\r\nclass Region{\r\n    /**\r\n     * @param {Number} x * @param {Number} y * @param {Number} z * @param {Number} width * @param {Number} height * @param {Number} length * @param {Number} preferredX \r\n     */\r\n    constructor(x, y, z, width, height, length, preferredX){\r\n        this.Set(x, y, z, width, height, length, preferredX);\r\n        this.SetWeights(0, maxWeightValue, maxWeightValue);\r\n        return this;\r\n    }\r\n    \r\n    OnTopRegion(regionA, regionB){\r\n        var xB = regionB.x, yB = regionB.y, zB = regionB.z;\r\n        var wB = regionB.width, hB = regionB.height, lB = regionB.length;\r\n        var xT = regionA.x, yT = regionA.y, zT = regionA.z;\r\n        var wT = regionA.width, hT = regionA.height, lT = regionA.length;\r\n        if (xT > xB - wT  && xT < xB + wB + wT  && zT > zB - lT  && zT < zB + lB + lT && yT === yB + hB) return true;\r\n        else return false;       \r\n    }\r\n    \r\n    /**\r\n     * @param {Number} x * @param {Number} y * @param {Number} z * @param {Number} width * @param {Number} height * @param {Number} length * @param {Number} preferredX \r\n     */\r\n    Set(x, y, z, width, height, length, preferredX){\r\n        this.x = x; this.y = y; this.z = z;\r\n        this.width = width; this.height = height; this.length = length;\r\n        this.preferredX = preferredX;        \r\n        return this;\r\n    }\r\n    \r\n    /**\r\n     * @param {Number} weight \r\n     * @param {Number} weightCapacity \r\n     * @param {Number} stackingCapacity \r\n     */\r\n    SetWeights(weight, weightCapacity, stackingCapacity){\r\n        this.weight = weight;\r\n        this.weightCapacity = weightCapacity;\r\n        this.stackingCapacity = stackingCapacity;\r\n    }\r\n\r\n    /** @param {Region} region */\r\n    Copy(region){\r\n        this.Set(region.x, region.y, region.z, region.width, region.height, region.length, region.preferredX);\r\n        this.SetWeights(this.weight, this.weightCapacity, this.stackingCapacity);\r\n        return this;\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} offset offsets the region by this before calculating corners \r\n     * @returns {Array<Number>} 8 corners, length = 24 + center point [24, 25, 26]\r\n     */\r\n    GetCorners(offset){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n\r\n        tempCorners[0] = x;       tempCorners[1] = y;       tempCorners[2] = z;         // 0:\r\n        tempCorners[3] = x + w;   tempCorners[4] = y;       tempCorners[5] = z;         // 0:w\r\n        tempCorners[6] = x;       tempCorners[7] = y + h;   tempCorners[8] = z;         // 0:h\r\n        tempCorners[9] = x + w;   tempCorners[10] = y + h;  tempCorners[11] = z;        // 0:wh\r\n\r\n        tempCorners[12] = x;      tempCorners[13] = y;      tempCorners[14] = z + l;    // 1:\r\n        tempCorners[15] = x + w;  tempCorners[16] = y;      tempCorners[17] = z + l;    // 1:w\r\n        tempCorners[18] = x;      tempCorners[19] = y + h;  tempCorners[20] = z + l;    // 1:h\r\n        tempCorners[21] = x + w;  tempCorners[22] = y + h;  tempCorners[23] = z + l;    // 1:wh\r\n\r\n        tempCorners[24] = x + w/2;tempCorners[25] = y + h/2;tempCorners[26] = z + l/2;  // center\r\n\r\n        return tempCorners;\r\n    }\r\n\r\n    /**\r\n     * @param {Array} result\r\n     * @returns {Array<Number>} 4 corners, length = 12\r\n     */\r\n    GetFloorPoints(result){\r\n        if(result === undefined) result = tempPoints;\r\n        var x = this.x, y = this.y, z = this.z, w = this.width, l = this.length;\r\n\r\n        result[0] = x;         result[1] = y;     result[2] = z;\r\n        result[3] = x + w;     result[4] = y;     result[5] = z;\r\n        result[6] = x + w;     result[7] = y;     result[8] = z + l;\r\n        result[9] = x;         result[10] = y;    result[11] = z + l;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} offset offsets the region by this before checking * @param {Number} px * @param {Number} py * @param {Number} pz \r\n     */\r\n    ContainsPoint(offset, px, py, pz){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n        return px > x && px < x + w\r\n            && py > y && py < y + h\r\n            && pz > z && pz < z + l;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Region} subRegion */\r\n    ContainsRegion(offset, subRegion){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n        var rx = subRegion.x, ry = subRegion.y, rz = subRegion.z, rw = subRegion.width, rh = subRegion.height, rl = subRegion.length;\r\n        return rx > x && rx + rw < x + w\r\n            && ry > y && ry + rh < y + h\r\n            && rz > z && rz + rl < z + l;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Region} other */\r\n    Intersects(offset, other){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n    \r\n        return x <= other.x + other.width && x + w >= other.x\r\n                && y <= other.y + other.height && y + h >= other.y \r\n                && z <= other.z + other.length && z + l >= other.z;\r\n    }    \r\n\r\n    \r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Number} width * @param {Number} height * @param {Number} length\r\n     * @param {Number} weight @param {Boolean} grounded\r\n     * @param {Region} [result]\r\n     */\r\n    FitTest(offset, width, height, length, weight, grounded, occupiedRegions, category){\r\n        let result = tempRegion;\r\n        let OnTopOfRegions = [];\r\n        let validRegion = true;\r\n        let level = 0;\r\n        let TopRegion = new Region(this.x, this.y, this.z, width, height, length, 0);\r\n        for(let iRegion = 0; iRegion < occupiedRegions.length; iRegion++){\r\n            let regionCheck = new Region(occupiedRegions[iRegion].x, occupiedRegions[iRegion].y, occupiedRegions[iRegion].z, occupiedRegions[iRegion].width, occupiedRegions[iRegion].height, occupiedRegions[iRegion].length, 0);\r\n            if(this.OnTopRegion(TopRegion, regionCheck))\r\n                {\r\n                    OnTopOfRegions.push(occupiedRegions[iRegion].level);\r\n                }\r\n        }\r\n        if(OnTopOfRegions.length>0){\r\n            OnTopOfRegions.sort(function(a,b) {\r\n                return a - b;\r\n            }\r\n            )\r\n            level = OnTopOfRegions.pop();\r\n        }\r\n              \r\n        if(level > 3 ){\r\n            if(category === 'O2' || category === 'O3' || category === 'S1') validRegion = false;\r\n                      \r\n        } \r\n      \r\n        if(grounded && this.y > smallValue) return false;\r\n\r\n        // Check that all dimensions fit\r\n        let fit = width < this.width + offset * 2 && height < this.height + offset * 2 && length < this.length + offset * 2;\r\n\r\n        if(fit && validRegion){\r\n\r\n            let weightFit = weight <= this.weightCapacity;\r\n            if(weightFit){\r\n\r\n                // Calculate x based on preferred side\r\n                let x = this.x ;\r\n                result.Set(x, this.y, this.z, width, height, length, 0);\r\n                result.SetWeights(weight, 0, maxWeightValue);\r\n                return result;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Region} region * @param {Number} minRegionAxis */\r\n    Subtract(region, minRegionAxis){   //minRegionAxis = smallValue;\r\n        /** @type {Array<Region>} */\r\n        var newRegions;\r\n        \r\n        // Calculate a new east region\r\n        let axis = region.x + region.width;\r\n        let size = this.x + this.width - axis;\r\n        if(size > minRegionAxis){\r\n            let east = new Region(axis, this.y, this.z, size, this.height, this.length, 0);\r\n            east.SetWeights(0, this.weightCapacity, this.stackingCapacity);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(east);\r\n        }\r\n\r\n        // Calculate a new west region\r\n        axis = this.x;\r\n        size = region.x - axis;\r\n        if(size > minRegionAxis){\r\n            let west = new Region(axis, this.y, this.z, size, this.height, this.length, 1);\r\n            west.SetWeights(0, this.weightCapacity, this.stackingCapacity);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(west);\r\n        }\r\n\r\n        // Calculate a new over/up region        \r\n        axis = region.y + region.height;\r\n        size = this.y + this.height - axis;\r\n        if(size > minRegionAxis){\r\n            let over = new Region(region.x, axis, region.z, region.width, size, region.length, 0); // todo: add overhang var? // togglePreferredX based on pre-packed weight distribution?\r\n            over.SetWeights(0, region.stackingCapacity, region.stackingCapacity);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(over);\r\n        }\r\n\r\n        // Calculate a new south region\r\n        axis = this.z;\r\n        size = region.z - axis;\r\n        if(false && size > minRegionAxis){\r\n            let south = new Region(this.x, this.y, axis, this.width, this.height, size, 0); // todo togglePreferredX based on pre-packed weight distribution?\r\n            south.SetWeights(0, this.weightCapacity, this.stackingCapacity);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(south);\r\n        }\r\n\r\n        // Set this as new north/front region\r\n        axis = region.z + region.length;\r\n        size = this.z + this.length - axis;\r\n        this.z = axis;\r\n        this.length = size;\r\n        this.SetWeights(0, this.weightCapacity, this.stackingCapacity);\r\n\r\n        return newRegions;\r\n    }\r\n\r\n    /** @param {Region} other */\r\n    ConnectFloorRects(other){\r\n        var ptsA = this.GetFloorPoints(tempPoints),\r\n            ptsB = other.GetFloorPoints(tempPoints2);\r\n\r\n        var adjacent = 0;\r\n        var intersections = [];\r\n        for(let iA = 0; iA < 12; iA += 3){\r\n            let nextA = iA + 3 === 12 ? 0 : iA + 3;\r\n            let ax = ptsA[iA], az = ptsA[iA + 2], nax = ptsA[nextA], naz = ptsA[nextA + 2];\r\n\r\n            for(let iB = 0; iB < 12; iB += 3){\r\n                let nextB = iB + 3 === 12 ? 0 : iB + 3;\r\n                let bx = ptsB[iB], bz = ptsB[iB + 2], nbx = ptsB[nextB], nbz = ptsB[nextB + 2];\r\n\r\n                if(\r\n                    rectangleContainsPoint(smallValue, ptsA[0], ptsA[2], ptsA[6] - ptsA[0], ptsA[8] - ptsA[2], bx, bz)\r\n                    || rectangleContainsPoint(smallValue, ptsB[0], ptsB[2], ptsB[6] - ptsB[0], ptsB[8] - ptsB[2], ax, az)\r\n                ){\r\n                    adjacent++;\r\n                }\r\n\r\n                let intersection = linesIntersect(ax, az, nax, naz, bx, bz, nbx, nbz);\r\n                if(intersection &&\r\n                    (\r\n                        rectangleContainsPoint(smallValue, ptsA[0], ptsA[2], ptsA[6] - ptsA[0], ptsA[8] - ptsA[2], intersection.x, intersection.y)\r\n                        || rectangleContainsPoint(smallValue, ptsB[0], ptsB[2], ptsB[6] - ptsB[0], ptsB[8] - ptsB[2], intersection.x, intersection.y)\r\n                    )\r\n                ){\r\n                    intersections.push(intersection);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(adjacent > 1){\r\n            for(let i = 0; i < 12; i += 3) intersections.push({x: ptsA[i], y: ptsA[i + 2]}, {x: ptsB[i], y: ptsB[i + 2]});\r\n        }\r\n        else{\r\n            intersections.length = 0;\r\n        }\r\n\r\n        var rectangles = rectanglesFromPoints(intersections);\r\n\r\n        let rectA = { p1: {x: ptsA[0], y: ptsA[2]}, p2: {x: ptsA[3], y: ptsA[5]}, p3: {x: ptsA[6], y: ptsA[8]}, p4: {x: ptsA[9], y: ptsA[11]} };\r\n        let rectB = { p1: {x: ptsB[0], y: ptsB[2]}, p2: {x: ptsB[3], y: ptsB[5]}, p3: {x: ptsB[6], y: ptsB[8]}, p4: {x: ptsB[9], y: ptsB[11]} };\r\n        rectangles.push(rectA, rectB);\r\n\r\n        reduceRectangles(rectangles);\r\n\r\n        setRectangleWeights(rectangles, this.weight + other.weight, this.weightCapacity + other.weightCapacity, this.stackingCapacity + other.stackingCapacity);\r\n        \r\n        return rectangles;\r\n    }\r\n\r\n    ToString(){\r\n        return format('R(p:[@, @, @], d:[@, @, @], w:@, wCap:@, sCap:@)', {nf: function(n){\r\n                return numberFormat(n, 2);\r\n            }},\r\n            this.x, this.y, this.z,\r\n            this.width, this.height, this.length,\r\n            this.weight, this.weightCapacity, this.stackingCapacity\r\n        );\r\n    }\r\n    \r\n    /**\r\n     * Deepest to front, smallest to largest\r\n     * @param {Region} a * @param {Region} b \r\n     */\r\n    static SortDeepestSmallest(a, b){\r\n        if(a.z < b.z) return -1;\r\n        if(a.z > b.z)return 1;\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nvar tempRegion = new Region();\r\nvar tempCorners = [0];\r\nvar tempPoints = [0];\r\nvar tempPoints2 = [0];\r\n\r\nexport default Region;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/Region.js","\r\nimport SceneSetup from './view/SceneSetup';\r\nimport Packer, { PackerParams } from './packer/Packer';\r\nimport View from './view/View';\r\nimport CargoInput from './components/CargoInput';\r\nimport PackingSpaceInput from './components/PackingSpaceInput';\r\nimport UX from './UX';\r\nimport Logger from './utils/cik/Logger';\r\nimport Signaler from './utils/cik/Signaler';\r\nimport PackerInterface, { SolverParams } from './components/PackerInterface';\r\nimport BoxEntry from './components/box/BoxEntry';\r\nimport Container from './packer/container/Container';\r\nimport Resources from './Resources';\r\nimport Asset from './components/assets/Asset';\r\nimport DomUI from './view/dom/DomUI';\r\n\r\nconst signals = {\r\n    start: 'start'\r\n};\r\n\r\n/**\r\n * @typedef AppParams\r\n * @property {UX} ux\r\n * @property {CargoInput} cargoInput\r\n * @property {PackingSpaceInput} packingSpaceInput\r\n * @property {PackerInterface} packerInterface\r\n * @property {Resources} resources\r\n */\r\n\r\nclass App extends Signaler{\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv\r\n     * @param {AppParams} params\r\n     */\r\n    constructor(containerDiv, params) {\r\n\r\n        super();\r\n\r\n        let scope = this;\r\n\r\n        this.ux = params.ux;\r\n        this.cargoInput = params.cargoInput;\r\n        this.packingSpaceInput = params.packingSpaceInput;\r\n        this.packerInterface = params.packerInterface;\r\n        this.resources = params.resources;\r\n        Asset.resources = this.resources;\r\n\r\n        /** @type {PackerParams} */\r\n        let packerParams = this.packerInterface.params;\r\n        packerParams.ux = this.ux;\r\n        this.packer = new Packer(packerParams);\r\n        \r\n        this.cargoInput.On(CargoInput.signals.insert, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                scope.packer.cargoList.Add(boxEntry);\r\n            });\r\n\r\n        this.cargoInput.On(CargoInput.signals.modify, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                scope.packer.cargoList.Modify(boxEntry);\r\n                scope.SolveAgain();\r\n            });\r\n\r\n        this.cargoInput.On(CargoInput.signals.remove, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                scope.packer.cargoList.Remove(boxEntry.uid);\r\n                scope.SolveAgain();\r\n            });\r\n        \r\n        this.packingSpaceInput.On(PackingSpaceInput.signals.containerLoaded, \r\n            /** @param {Container} container */\r\n            function(container){\r\n                scope.packer.packingSpace.AddContainer(container);\r\n            });\r\n\r\n        this.packerInterface.On(PackerInterface.signals.solveRequest, \r\n            /** @param {SolverParams} solverParams */\r\n            function(solverParams){\r\n                scope.Solve(solverParams);\r\n            });\r\n\r\n        this.domUI = new DomUI(containerDiv, this.ux);\r\n        this.sceneSetup = new SceneSetup(this.domUI.domElement ? this.domUI.domElement : containerDiv, this.ux);\r\n        this.sceneSetup.Init().then(this.Start.bind(this));\r\n    }\r\n\r\n\r\n    Start(){\r\n        let scope = this;\r\n        let packerInterface = this.packerInterface;\r\n\r\n        /** @type {import('./view/View').ViewParams} */\r\n        let viewParams = { ux: this.ux };\r\n        this.view = new View(this.packer, this.sceneSetup, this.domUI, viewParams);\r\n        this.sceneSetup.Start();\r\n\r\n        this.ux._Bind(this);\r\n        this.cargoInput._Bind(this);\r\n        this.packingSpaceInput._Bind(this);\r\n\r\n        let resetColor = function(){};\r\n        this.cargoInput.On(CargoInput.signals.show, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                let existingEntry = scope.cargoInput.GetEntry(boxEntry.uid);\r\n                if(existingEntry){\r\n                    resetColor();\r\n                    let previewColorBackup = boxEntry.Description('color');\r\n                    resetColor = function(){ boxEntry.Description('color', previewColorBackup); }\r\n                    boxEntry.Description('color', existingEntry.Description('color'));\r\n                }\r\n                scope.view.sceneSetup.hud.Preview(boxEntry);\r\n            });\r\n\r\n        function hideEntryPreview(){\r\n            resetColor();\r\n            scope.view.sceneSetup.hud.Preview(false);\r\n        }\r\n        this.cargoInput.On(CargoInput.signals.hide, hideEntryPreview);\r\n        this.cargoInput.On(CargoInput.signals.insert, hideEntryPreview);\r\n        this.cargoInput.On(CargoInput.signals.modify, hideEntryPreview);\r\n        this.cargoInput.On(CargoInput.signals.remove, hideEntryPreview);\r\n\r\n        /** @param {Packer.PackingResult} packingResult */\r\n        function onPackUpdate(packingResult){\r\n            packerInterface._Notify(PackerInterface.signals.solved, packingResult);\r\n        }\r\n        this.packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n\r\n        /** @param {*} error */\r\n        function onPackFailed(error){\r\n            packerInterface._Notify(PackerInterface.signals.failed, error);\r\n        }\r\n        this.packer.On(Packer.signals.packFailed, onPackFailed);\r\n\r\n        this.Dispatch(signals.start);\r\n    }\r\n\r\n    SolveAgain(){\r\n        if(this.ux.params.autoUpdatePack && this.packer.solveAgain) this.Solve();\r\n    }\r\n\r\n    /** @param {SolverParams} [solverParams] */\r\n    Solve(solverParams){\r\n        this.view.ClearPackingResults();\r\n        this.packer.Solve(solverParams);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n  \r\n}\r\n\r\nexport default App;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/App.js","import CargoList from \"./CargoList\";\r\nimport PackingSpace from \"./PackingSpace\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport ContainingVolume from \"./container/ContainingVolume\";\r\n\r\nconst CUB = require('./cubX/CUB');\r\n\r\n/** @typedef CUBParams\r\n * @property {Number} score_minLength [0, 1] influence position of cargo in length\r\n * \r\n * (higher values means the algorithm will try to pack as tightly as possible in length)\r\n * \r\n * @property {Number} score_minWastedSpace [0, 1] influence orientation of cargo \r\n * \r\n * (higher values means the algorithm will try to minimize orientation that results in 'unuseable' unpacked volumes)\r\n */\r\n\r\nconst typeofHeuristicParams = CUB.heuristics.HeuParametric1.Params;\r\n\r\nfunction ItemConstructor(category, quantity){ return { category: category, quantity: quantity}; }\r\n\r\n/** @param {CUBParams} cubParams @param {typeofHeuristicParams} heuristicParams */\r\nfunction extractHeuristicParams(cubParams, heuristicParams){\r\n    if(heuristicParams === undefined) heuristicParams = new typeofHeuristicParams();\r\n\r\n    let scoringWeight = cubParams.score_minLength + cubParams.score_minWastedSpace;\r\n\r\n    heuristicParams.scoring.minZ = cubParams.score_minLength / scoringWeight;\r\n    heuristicParams.scoring.minWaste = cubParams.score_minWastedSpace / scoringWeight;\r\n    return heuristicParams;\r\n}\r\n\r\n/**\r\n * @typedef {Object} PackerParams\r\n * @property {import('../UX').default} ux\r\n * @property {Number} defaultStackingFactor\r\n */ \r\n\r\n/** @typedef SolverParams\r\n * @property {CUBParams} algorithmParams\r\n * @property {string} algorithm default = 'cub'\r\n */\r\n\r\nclass PackedCargo {\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     * @param {ContainingVolume} containingVolume \r\n     * @param {THREE.Vector3} position \r\n     * @param {Number} orientation \r\n     */\r\n    constructor(entry, containingVolume, position, orientation){\r\n        this.entry = entry;\r\n        this.containingVolume = containingVolume;\r\n        this.position = position;\r\n        this.orientation = orientation;\r\n    }\r\n}\r\n\r\nclass UnpackedCargo {\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     * @param {Number} unpackedQuantity\r\n     */\r\n    constructor(entry, unpackedQuantity){\r\n        this.entry = entry;\r\n        this.unpackedQuantity = unpackedQuantity;\r\n    }\r\n}\r\n\r\nclass PackingResult{\r\n    /** @param {Number} numTotalItem @param {Number} runtime */\r\n    constructor(numTotalItems, runtime){\r\n        /** @type {Array<PackedCargo>} */\r\n        this.packed = [];\r\n\r\n        /** @type {Array<UnpackedCargo>} */\r\n        this.unpacked = [];\r\n\r\n        this.numTotalItems = numTotalItems || 0;\r\n\r\n        this.runtime = runtime || -1;\r\n    }\r\n}\r\n\r\n/** @type {PackerParams} */\r\nconst defaultParams = {};\r\nconst signals = {\r\n    packUpdate: 'packUpdate',\r\n    packFailed: 'packFailed'\r\n};\r\n\r\nconst _solverParams = Symbol('solverParams');\r\n\r\nconst epsilon = Math.pow(2, -52);\r\n\r\nclass Packer extends Signaler {\r\n    /** @param {PackerParams} params */\r\n    constructor(params){\r\n        super();\r\n\r\n        /** Shared object with PackerInterface's params  */\r\n        this.params = params;\r\n\r\n        this.packingSpace = new PackingSpace();\r\n        this.cargoList = new CargoList();\r\n\r\n        this.solverExecutionsCount = 0;\r\n    }     \r\n\r\n    GetItemDetails(items){\r\n\r\n        let Items = []\r\n        for(let i=0;i<items.length;i++){ \r\n            \r\n            Items.push(ItemConstructor(items[i].category ,items[i].quantity))\r\n            \r\n        }\r\n        return Items;\r\n\r\n    }\r\n\r\n    GetItemIds(items){\r\n        let ItemIDS = []\r\n        for(let i=items.length-1;i>=0;i--) {             \r\n            ItemIDS.push(items[i].id)            \r\n        }\r\n        return ItemIDS\r\n\r\n    }\r\n\r\n    CheckPairedItemsSKU2(items){\r\n        let k = items.length/2;\r\n        for(let i = items.length-1; i>=k; i -- )\r\n        {\r\n            if(items[i].quantity!=items[i-k].quantity) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    CheckPairedItemsSKU3(items){\r\n        let k = items.length / 3;\r\n        for (let i = 0; i < k; i++) {\r\n            if (items[i].quantity != items[i + k].quantity || items[i].quantity != items[i + 2 * k].quantity || items[i + k].quantity != items[i + 2 * k].quantity) return false;\r\n        }\r\n        return true;\r\n\r\n    }\r\n    IncreementItemQuantity(items, inititalItems){\r\n        let SKUs = this.GetSKUS(items);\r\n        let InitialSKU = this.GetSKUS(inititalItems);\r\n        for(let i = 0; i<SKUs[2].length/3; i++ ){\r\n            let k = SKUs[2].length/3;\r\n            if(SKUs[2][i].quantity < InitialSKU[2][i].quantity)\r\n            {\r\n                SKUs[2][i].quantity += 1;\r\n                SKUs[2][i + k].quantity += 1;\r\n                SKUs[2][i + 2 * k].quantity += 1;\r\n                \r\n                let SKU = this.JoinSKU(SKUs[0],SKUs[1],SKUs[2]);\r\n                return SKU;\r\n            }\r\n        }\r\n        for(let i = 0; i<SKUs[1].length/2; i++ ){\r\n            let k = SKUs[1].length/2;\r\n            if(SKUs[1][i].quantity < InitialSKU[1][i].quantity)\r\n            {\r\n                SKUs[1][i].quantity += 1;\r\n                SKUs[1][i + k].quantity += 1;\r\n                \r\n                \r\n                let SKU = this.JoinSKU(SKUs[0],SKUs[1],SKUs[2]);\r\n                return SKU;\r\n            }\r\n        } \r\n        for(let i = 0; i<SKUs[0].length; i++ ){\r\n            if(SKUs[0][i].quantity < InitialSKU[0][i].quantity)\r\n            {\r\n                SKUs[0][i].quantity += 1;\r\n                let SKU = this.JoinSKU(SKUs[0],SKUs[1],SKUs[2]);\r\n                return SKU;\r\n            }\r\n        }\r\n        \r\n               \r\n        return false;       \r\n    }\r\n    FindMinQuantitySKU2(items, inititalItems){ \r\n        let k = items.length/2;       \r\n        for(let i = items.length-1; i>=k; i -- ){      \r\n        \r\n                if(items[i-k].quantity > items[i].quantity){\r\n                    items[i].quantity= inititalItems[i].quantity-items[i-k].quantity;\r\n                    items[i-k].quantity= inititalItems[i-k].quantity-items[i-k].quantity;\r\n                    if(items[i-k].quantity>items[i].quantity){\r\n                        items[i-k].quantity=items[i].quantity;\r\n                    }\r\n                    else{\r\n                        items[i].quantity=items[i-k].quantity;\r\n                    }                    \r\n    \r\n                }         \r\n                else if (items[i-k].quantity < items[i].quantity){\r\n                    items[i].quantity= inititalItems[i].quantity-items[i].quantity;\r\n                    items[i-k].quantity= inititalItems[i-k].quantity-items[i].quantity;\r\n                    if(items[i-k].quantity>items[i].quantity){\r\n                        items[i-k].quantity=items[i].quantity;\r\n                    }\r\n                    else{\r\n                        items[i].quantity=items[i-k].quantity;\r\n                    }        \r\n                }            \r\n        }\r\n        return items   \r\n    }\r\n\r\n    FindMinQuantitySKU3(items, inititalItems) {\r\n        let k = items.length / 3;\r\n        for (let i = items.length - 1; i >= 2 * k; i--) {\r\n\r\n            if (items[i - k].quantity >= items[i].quantity && items[i - k].quantity >= items[i - 2 * k].quantity) {\r\n                items[i].quantity = inititalItems[i].quantity - items[i - k].quantity;\r\n                items[i - k].quantity = inititalItems[i - k].quantity - items[i - k].quantity;\r\n                items[i - 2 * k].quantity = inititalItems[i - k].quantity - items[i - k].quantity;\r\n                if (items[i - k].quantity <= items[i].quantity && items[i - k].quantity <= items[i - 2 * k].quantity) {\r\n                    items[i - 2 * k].quantity = items[i - k].quantity;\r\n                    items[i].quantity  = items[i - k].quantity;\r\n                    \r\n                }\r\n                else if (items[i - 2 * k].quantity <= items[i].quantity && items[i - 2 * k].quantity <= items[i - k].quantity) {\r\n                    items[i].quantity = items[i - 2 * k].quantity;\r\n                    items[i - k].quantity = items[i - 2 * k].quantity;\r\n                }\r\n                else if (items[i].quantity <= items[i - k].quantity && items[i].quantity <= items[i - 2 * k].quantity) {\r\n                    items[i - 2 * k].quantity = items[i].quantity;\r\n                    items[i - k].quantity = items[i].quantity;\r\n                   \r\n                }\r\n\r\n            }\r\n            else if (items[i].quantity >= items[i - k].quantity  && items[i].quantity >= items[i - 2 * k].quantity) {\r\n                items[i].quantity = inititalItems[i].quantity - items[i].quantity;\r\n                items[i - k].quantity = inititalItems[i - k].quantity - items[i].quantity;\r\n                items[i - 2 * k].quantity = inititalItems[i - k].quantity - items[i].quantity;\r\n                if (items[i - k].quantity <= items[i].quantity && items[i - k].quantity <= items[i - 2 * k].quantity) {\r\n                    items[i - 2 * k].quantity = items[i - k].quantity;\r\n                    items[i].quantity  = items[i - k].quantity;\r\n                    \r\n                }\r\n                else if (items[i - 2 * k].quantity <= items[i].quantity && items[i - 2 * k].quantity <= items[i - k].quantity) {\r\n                    items[i].quantity = items[i - 2 * k].quantity;\r\n                    items[i - k].quantity = items[i - 2 * k].quantity;\r\n                }\r\n                else if (items[i].quantity <= items[i - k].quantity && items[i].quantity <= items[i - 2 * k].quantity) {\r\n                    items[i - 2 * k].quantity = items[i].quantity;\r\n                    items[i - k].quantity = items[i].quantity;\r\n                   \r\n                }\r\n\r\n                \r\n            }\r\n            else if (items[i - 2 * k].quantity >= items[i].quantity && items[i - k].quantity <= items[i - 2 * k].quantity) {\r\n                items[i].quantity = inititalItems[i].quantity - items[i - 2 * k].quantity;\r\n                items[i - k].quantity = inititalItems[i - k].quantity - items[i - 2 * k].quantity;\r\n                items[i - 2 * k].quantity = inititalItems[i - k].quantity - items[i - 2 * k].quantity;\r\n                if (items[i - k].quantity <= items[i].quantity && items[i - k].quantity <= items[i - 2 * k].quantity) {\r\n                    items[i - 2 * k].quantity = items[i - k].quantity;\r\n                    items[i].quantity  = items[i - k].quantity;\r\n                    \r\n                }\r\n                else if (items[i - 2 * k].quantity <= items[i].quantity && items[i - 2 * k].quantity <= items[i - k].quantity) {\r\n                    items[i].quantity = items[i - 2 * k].quantity;\r\n                    items[i - k].quantity = items[i - 2 * k].quantity;\r\n                }\r\n                else if (items[i].quantity <= items[i - k].quantity && items[i].quantity <= items[i - 2 * k].quantity) {\r\n                    items[i - 2 * k].quantity = items[i].quantity;\r\n                    items[i - k].quantity = items[i].quantity;\r\n                   \r\n                }\r\n            }\r\n        }\r\n        return items\r\n    }\r\n    GetPackedItemQuantity(newitems, items, Initialitems){\r\n        for(let i = 0; i<newitems.length; i++ ){\r\n            newitems[i].quantity = Initialitems[i].quantity - items[i].quantity;                \r\n        }\r\n        return newitems;\r\n\r\n    }\r\n\r\n    FetchItemQuantityZero( newitems )\r\n    {\r\n        for(let i = 0; i<newitems.length; i++ ){\r\n\r\n            newitems[i].quantity = 0;                \r\n        }\r\n        return newitems;\r\n    }\r\n\r\n    FetchItemQuantity( newitems, items )\r\n    {\r\n        for(let i = 0; i<items.length; i++ ){\r\n\r\n            newitems[i].quantity = items[i].quantity;                \r\n        }\r\n        return newitems;\r\n    }\r\n\r\n    SetItemQuantity(items, newitems){\r\n        for(let i = 0; i<items.length; i++ ){           \r\n\r\n            items[i].quantity = newitems[i].quantity;                 \r\n        }\r\n        return items;\r\n    }\r\n    ItemQuantityRange( items, inititalItems){\r\n        let count = 0;\r\n        for(let i = 0; i<items.length; i++ ){\r\n            if(items[i].quantity <= inititalItems[i].quantity) return true;\r\n        }\r\n        //if(count>0) \r\n        return false;\r\n    }\r\n    GetSchema(items){\r\n        var schema = []\r\n        for(let i = 0; i<items.length; i++ ){\r\n            schema.push(items[i].quantity);         \r\n        }\r\n        // for(let i = 0; i<SKU2.length; i++ ){\r\n        //     schema.push(SKU2[i].quantity);         \r\n        // }\r\n        // for(let i = 0; i<SKU3.length; i++ ){\r\n        //     schema.push(SKU3[i].quantity);         \r\n        // }\r\n        return schema;\r\n    }\r\n    GetSKUS(items){\r\n        var SKU1 = [];\r\n        var SKU2 = [];\r\n        var SKU3 = []; \r\n        for(let i = 0; i < items.length; i++){\r\n            if(items[i].category === 'O1' || items[i].category === 'S1') SKU1.push(items[i]);\r\n            if(items[i].category === 'O2' || items[i].category === 'I2') SKU2.push(items[i]);\r\n            if(items[i].category === 'O3' || items[i].category === 'I3' || items[i].category === 'S3') SKU3.push(items[i]);\r\n        }\r\n        return [SKU1, SKU2, SKU3];\r\n    }\r\n    CheckPairedItems(items){\r\n       let SKUs = this.GetSKUS(items);\r\n      // console.log(SKUs[1],'SKU2', SKUs[2], 'SKU3');\r\n       if(SKUs[1].length> 0){\r\n           if(!this.CheckPairedItemsSKU2(SKUs[1]))  return false;\r\n       }\r\n       if(SKUs[2].length> 0){\r\n           if(!this.CheckPairedItemsSKU3(SKUs[2]))  return false;\r\n       }\r\n       return true;  \r\n\r\n    }\r\n    JoinSKU(SKU1, SKU2, SKU3)\r\n    {\r\n        let JoinedSKU = [];\r\n        if(SKU1){\r\n            for(let i = 0; i<SKU1.length; i++ ){\r\n                JoinedSKU.push(SKU1[i]);         \r\n            }\r\n        }\r\n        if(SKU2){\r\n        for(let i = 0; i<SKU2.length; i++ ){\r\n            JoinedSKU.push(SKU2[i]);         \r\n        }\r\n        }\r\n        if(SKU1){\r\n        for(let i = 0; i<SKU3.length; i++ ){\r\n            JoinedSKU.push(SKU3[i]);         \r\n        }\r\n    }\r\n        return JoinedSKU;\r\n    }\r\n    async PackSKUs(container, items, heuristic)\r\n    {\r\n        \r\n        let SKUs = this.GetSKUS(items);\r\n        let finalSchema = [];\r\n        //let InititalSKU1 = this.GetItemDetails(SKUs[0]);\r\n        let finalSKU1 = this.GetItemDetails(SKUs[0]);\r\n        let finalSKU2 = this.GetItemDetails(SKUs[1]);               \r\n        let finalSKU3 = this.GetItemDetails(SKUs[2]);\r\n        let finalSKUQty = this.JoinSKU(finalSKU1, finalSKU2, finalSKU3);\r\n        let CombindedSKU = this.JoinSKU(SKUs[0], SKUs[1], SKUs[2]);        \r\n        let Initialitems = this.GetItemDetails(finalSKUQty);\r\n        // var results = await CUB.pack(container, SKUs[0], heuristic);\r\n        // finalSKU1 = this.GetPackedItemQuantity(finalSKU1, SKUs[0], InititalSKU1);\r\n        finalSKU1 = this.FetchItemQuantityZero(finalSKU1);\r\n        finalSKU2 = this.FetchItemQuantityZero(finalSKU2);\r\n        finalSKU3 = this.FetchItemQuantityZero(finalSKU3);\r\n        finalSKUQty = this.JoinSKU(finalSKU1, finalSKU2, finalSKU3);        \r\n        finalSKUQty = this.IncreementItemQuantity(finalSKUQty, Initialitems);        \r\n        let tempQty = this.GetItemDetails(CombindedSKU);\r\n        while(this.ItemQuantityRange(finalSKUQty, Initialitems)){\r\n            CombindedSKU = this.SetItemQuantity(CombindedSKU, finalSKUQty)\r\n                    var results = await CUB.pack(container, CombindedSKU, heuristic);\r\n\r\n                    if(this.CheckPairedItems(CombindedSKU) === true ){\r\n                        tempQty = this.GetPackedItemQuantity(tempQty, CombindedSKU, finalSKUQty)\r\n                        var quantitySchema = this.GetSchema(tempQty)\r\n                        finalSchema.push(quantitySchema)\r\n                    } \r\n                    finalSKUQty = this.IncreementItemQuantity(finalSKUQty, Initialitems)\r\n                    \r\n            }\r\n        //console.log(finalSchema)\r\n        finalSchema.sort(function(a, b) {\r\n            //console.log(a);\r\n            function Sum(row){\r\n                let sum = 0;\r\n                for(let i=0; i<row.length; i++){\r\n                    sum +=  row[i]\r\n                }\r\n                return sum;\r\n            }\r\n            if(Sum(a) < Sum(b)) return -1;\r\n            if(Sum(a) > Sum(b)) return 1;\r\n            return 0;        \r\n        })\r\n        \r\n        let SKUQty =  finalSchema.pop();        \r\n        return SKUQty;\r\n            \r\n\r\n\r\n\r\n    }\r\n\r\n    \r\n    \r\n    /** @param {SolverParams} params */\r\n    Solve(params){\r\n        params = params || this[_solverParams];\r\n        this[_solverParams] = params;\r\n\r\n        this.solverExecutionsCount++;\r\n\r\n        let algorithm = params.algorithm;\r\n        let algorithmParams = params.algorithmParams;\r\n        if(algorithm === 'cub')\r\n            this.SolveCUB(algorithmParams);\r\n    }\r\n\r\n    /** @param {CUBParams} params */\r\n    async SolveCUB(params){\r\n\r\n        if(this.packingSpace.ready === false){\r\n            this.Dispatch(signals.packFailed, 'Packing space not ready');\r\n            return;\r\n        }\r\n\r\n        if(this.cargoList.ready === false){\r\n            this.Dispatch(signals.packFailed, 'Cargo list not ready');\r\n            return;\r\n        }\r\n\r\n        const Container = CUB.Container;\r\n        const Item = CUB.Item;\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        var d = containingVolume.dimensions;\r\n        var container = new Container(containingVolume.uid, d.width, d.height, d.length, containingVolume.weightCapacity);\r\n        var ZeroContainer = new Container(containingVolume.uid, d.width, d.height, d.length, 0);\r\n        \r\n        var numTotalItems = 0;\r\n\r\n         /** @type {Array<Item>} */\r\n         var items = [];                 \r\n         var entries = {};\r\n         var itemQuant=[];\r\n        //  var ItemInfo=[];\r\n\r\n         for(let group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            \r\n            let entry = group.entry;\r\n            entries[entry.uid] = entry;\r\n            d = entry.dimensions;\r\n            let validOrientations = ['xyz'];\r\n            let stackingCapacity = entry.properties.stacking.enabled ? entry.properties.stacking.capacity : (entry.weight > epsilon ? entry.weight * this.params.defaultStackingFactor : Number.MAX_SAFE_INTEGER - 10);\r\n            let grounded = entry.properties.translation.enabled ? entry.properties.translation.grounded : false;\r\n            let item = new Item(entry.uid, entry.label, d.width, d.height, d.length, entry.weight, entry.quantity, validOrientations, stackingCapacity, grounded);\r\n            items.push(item);\r\n            itemQuant.push(item.quantity);        \r\n            numTotalItems += entry.quantity;\r\n            // ItemInfo.push([item.id,item.quantity,entry.label.toLowerCase().replace(\" \", \"\")])\r\n        }\r\n        \r\n        let ItemIDS = this.GetItemIds(items)\r\n        let InititalItems = this.GetItemDetails(items)\r\n        var startTime = performance.now();\r\n        let heuristicParams = extractHeuristicParams({score_minLength: 0.9, score_minWastedSpace: 0.09999999999999998});\r\n        let heuristic = new CUB.heuristics.HeuParametric1(heuristicParams, ItemIDS);\r\n        let finalItems = await this.PackSKUs(container, items, heuristic)\r\n        console.log(finalItems);\r\n            for(let i = 0; i<items.length; i++ ){\r\n                items[i].quantity = finalItems[i];   \r\n            }      \r\n            \r\n        var results = await CUB.pack(container, items, heuristic); \r\n\r\n            for(let i = 0; i<items.length; i++ ){\r\n                items[i].quantity = InititalItems[i].quantity-finalItems[i];   \r\n            }\r\n        \r\n        var unpackResult = await CUB.pack(ZeroContainer, items, heuristic);\r\n                   \r\n        \r\n\r\n        \r\n        var cubRuntime = performance.now() - startTime;\r\n        var cubRuntime2Dec = Math.round(cubRuntime / 1000 * 100) / 100;\r\n        var packingResult = new PackingResult(numTotalItems, cubRuntime2Dec);\r\n        \r\n        results.packedItems.forEach(packedItem => {\r\n            let entry = entries[packedItem.ref.id];\r\n            let position = new THREE.Vector3(\r\n                packedItem.x + packedItem.packedWidth / 2,\r\n                packedItem.y + packedItem.packedHeight / 2,\r\n                packedItem.z + packedItem.packedLength / 2\r\n            );\r\n            let orientation = Item.ResolveOrientation(packedItem.orientation);\r\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n            packingResult.packed.push(packedCargo);\r\n        });\r\n\r\n        unpackResult.unpackedItems.forEach(unpackedItem => {\r\n            let entry = entries[unpackedItem.id];\r\n            let unpackedQuantity = unpackedItem.quantity;\r\n            let unpackedCargo = new UnpackedCargo(entry, unpackedQuantity);\r\n            packingResult.unpacked.push(unpackedCargo);\r\n        });\r\n\r\n        console.log(packingResult,\"Output\");\r\n        \r\n        this.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    get solveAgain(){\r\n        return this.solverExecutionsCount > 0;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nPacker.PackingResult = PackingResult;\r\nPacker.PackedCargo = PackedCargo;\r\nPacker.UnpackedCargo = UnpackedCargo;\r\n\r\nexport default Packer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Packer.js","import Volume from \"./Volume\";\r\nimport Container from \"./Container\";\r\n\r\nconst _weightCapacity = Symbol('weightCapacity');\r\nconst type = 'ContainingVolume';\r\n\r\nclass ContainingVolume extends Volume {\r\n    /** @param {Container} container */\r\n    constructor(container){\r\n        super();\r\n        \r\n        this.container = container;\r\n        this.weightCapacity = 0;\r\n\r\n        this.SetUID();\r\n    }\r\n\r\n    set weightCapacity(value){ this[_weightCapacity] = value; }\r\n    get weightCapacity(){ return this[_weightCapacity]; }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    toJSON(){\r\n        var json = super.toJSON();\r\n        json.type = type;\r\n        json.weightCapacity = this.weightCapacity;\r\n        return json;\r\n    }\r\n\r\n    ToString(){\r\n        return super.ToString();\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var containingVolume = new ContainingVolume();\r\n        containingVolume.weightCapacity = data.weightCapacity;\r\n        Volume.FromJSON(data, containingVolume);\r\n\r\n        return containingVolume;\r\n    }\r\n}\r\n\r\nexport default ContainingVolume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/ContainingVolume.js","\r\nconst typeofNumber = 'number';\r\n\r\nconst _maxHeight = Symbol('maxHeight');\r\nconst _validOrientations = Symbol('validOrientations');\r\n\r\nconst orientations = [ 'xyz', 'zyx', 'yxz', 'yzx', 'zxy', 'xzy' ];\r\nvar dimensions = [0, 0, 0];\r\n\r\nclass Item{\r\n    /**\r\n     * @param {string} id \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     * @param {Number} length \r\n     * @param {Number} weight \r\n     * @param {Number} quantity \r\n     * @param {Array<Number|string>} validOrientations\r\n     * @param {Number} stackingCapacity \r\n     * @param {Boolean} grounded \r\n     */\r\n    constructor(id, label, width, height, length, weight, quantity, validOrientations, stackingCapacity, grounded){\r\n        this.id = id;\r\n        this.category = label,\r\n        this.width = width;\r\n        this.height = height;\r\n        this.length = length;\r\n        this.weight = weight;\r\n        /** @type {Number} */\r\n        this.volume = width * height * length;\r\n        this.quantity = quantity;\r\n\r\n        this.validOrientations = validOrientations;\r\n\r\n        this.stackingCapacity = stackingCapacity;\r\n        this.grounded = grounded;\r\n    }\r\n\r\n    /** @returns {Array<Number>} */\r\n    get validOrientations(){ return this[_validOrientations]; }\r\n    set validOrientations(value){\r\n        if(!value) value = orientations;\r\n\r\n        let validOrientations = [];\r\n        for(let i = 0; i < value.length; i++){\r\n            let vo = value[i];\r\n            let orientation = (typeof vo === typeofNumber) ? vo : orientations.indexOf(vo.toLowerCase());\r\n            if(orientation !== -1) validOrientations.push(orientation);\r\n        }   \r\n        if(validOrientations.length === 0) validOrientations[0] = 'xyz' || orientations[0];\r\n\r\n        this[_validOrientations] = validOrientations;\r\n        this[_maxHeight] = undefined;\r\n    }\r\n\r\n    get xyz(){ dimensions[0] = this.width; dimensions[1] = this.height; dimensions[2] = this.length; return dimensions; }\r\n    get zyx(){ dimensions[0] = this.length; dimensions[1] = this.height; dimensions[2] = this.width; return dimensions; }\r\n    get yxz(){ dimensions[0] = this.height; dimensions[1] = this.width; dimensions[2] = this.length; return dimensions; }\r\n    get yzx(){ dimensions[0] = this.height; dimensions[1] = this.length; dimensions[2] = this.width; return dimensions; }\r\n    get zxy(){ dimensions[0] = this.length; dimensions[1] = this.width; dimensions[2] = this.height; return dimensions; }\r\n    get xzy(){ dimensions[0] = this.width; dimensions[1] = this.length; dimensions[2] = this.height; return dimensions; }\r\n\r\n    /** @returns {Number} */\r\n    get maxHeight(){\r\n        if(this[_maxHeight] === undefined){\r\n            let maxHeight = 0;\r\n            for(let i = 0; i < this.validOrientations.length; i++){\r\n                let dimensions = this.GetOrientedDimensions(this.validOrientations[i]);\r\n                if(dimensions[1] > maxHeight) maxHeight = dimensions[1];\r\n            }\r\n            this[_maxHeight] = maxHeight;\r\n        }\r\n        \r\n        return this[_maxHeight];\r\n    }\r\n\r\n    /** @param {Number} orientation */\r\n    GetOrientedDimensions(orientation){\r\n        switch(orientation){\r\n            case 0: return this.xyz;\r\n            case 1: return this.zyx;\r\n            case 2: return this.yxz;\r\n            case 3: return this.yzx;\r\n            case 4: return this.zxy;\r\n            case 5: return this.xzy;\r\n        }\r\n    }\r\n\r\n    ToString(){\r\n        let q = this.quantity, \r\n            d = this.width.toFixed(2) + 'x' + this.height.toFixed(2) + 'x' + this.length.toFixed(2),\r\n            id = this.id;\r\n        return q + 'x (' + d + ') - ' + id;\r\n    }\r\n\r\n    /** @param {Number} orientation */\r\n    static ResolveOrientation(orientation){\r\n        return orientations[orientation];\r\n    }\r\n\r\n    /** @param {Array<Item>} items */\r\n    static GetMinDimensions(items){\r\n        var minDimensions = [Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER];\r\n\r\n        for(let iItem = 0, numItems = items.length; iItem < numItems; iItem++){\r\n            let item = items[iItem];\r\n            var validOrientations = item.validOrientations;\r\n            for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\r\n                let orientation = validOrientations[iOrient];\r\n                let dimensions = item.GetOrientedDimensions(orientation);\r\n                if(dimensions[0] < minDimensions[0]) minDimensions[0] = dimensions[0];\r\n                if(dimensions[1] < minDimensions[1]) minDimensions[1] = dimensions[1];\r\n                if(dimensions[2] < minDimensions[2]) minDimensions[2] = dimensions[2];\r\n            }\r\n        }\r\n\r\n        return minDimensions;\r\n    }\r\n\r\n    /**\r\n     * @param {Item} a \r\n     * @param {Item} b \r\n     */\r\n    static VolumeSort(a, b){\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Item} a \r\n     * @param {Item} b \r\n     */\r\n    static HeightSort(a, b){\r\n        if(a.maxHeight < b.maxHeight) return -1;\r\n        if(a.maxHeight > b.maxHeight) return 1;\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nclass Container{\r\n    /**\r\n     * @param {string} id \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     * @param {Number} length \r\n     * @param {Number} weightCapacity \r\n     */\r\n    constructor(id, width, height, length, weightCapacity){\r\n        this.id = id;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.length = length;\r\n        this.weightCapacity = weightCapacity;\r\n    }\r\n}\r\n\r\nexport {\r\n    Item,\r\n    Container\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/Components.js","\r\nimport Input from '../utils/cik/input/Input';\r\nimport Quality from '../utils/cik/Quality';\r\nimport Controller from '../scene/Controller';\r\nimport Renderer from '../scene/Renderer';\r\nimport Camera from '../scene/Camera';\r\nimport HUDView from './HUDView';\r\nimport UX from '../UX';\r\nimport Utils from '../utils/cik/Utils';\r\nimport Signaler from '../utils/cik/Signaler';\r\n\r\nconst signals = {\r\n    init: 'init',\r\n    started: 'started',\r\n    paused: 'paused',\r\n    stopped: 'stopped'\r\n};\r\n\r\nclass SceneSetup extends Signaler {\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv \r\n     * @param {UX} ux \r\n     */\r\n    constructor(containerDiv, ux){\r\n        super();\r\n        \r\n        this.domElement = containerDiv;\r\n        this.ux = ux;\r\n    }\r\n\r\n    Init(){\r\n        \r\n        var quality = new Quality().Common(2);\r\n\r\n        var units = this.ux.params.units;\r\n        var controllerParams = {};\r\n        this.sceneController = new Controller(controllerParams);\r\n\r\n        /** @type {import('../scene/Renderer').RendererParams} */\r\n        var rendererParams = {clearColor: this.ux.params.backgroundColor};\r\n        Object.assign(rendererParams, quality);\r\n        this.sceneRenderer = new Renderer(rendererParams);\r\n        this.sceneRenderer.renderer.toneMappingExposure = 1.6;\r\n        this.domElement.appendChild(this.sceneRenderer.renderer.domElement);\r\n\r\n        /** @type {import('./Camera').CameraParams} */\r\n        var cameraParams = {fov: this.ux.params.fov, aspect: 1, near: 1 * units, far: 6000 * units};\r\n        this.cameraController = new Camera(cameraParams);\r\n        this.cameraController.OrbitControls(this.sceneRenderer.renderer.domElement);\r\n\r\n        this.input = new Input(this.domElement);\r\n        this.input.camera = this.cameraController.camera;\r\n\r\n        var sceneRendererRef = this.sceneRenderer;\r\n        var appCameraRef = this.cameraController.camera;\r\n        this.input.onResize.push(function(screen){\r\n            sceneRendererRef.ReconfigureViewport(screen, appCameraRef);\r\n        });\r\n\r\n        // hud\r\n        if(this.ux.params.hud){\r\n            /** @type {import('../view/HUDView').HUDViewParams} */\r\n            var hudParams = {ux: this.ux, sceneSetup: this, container: this.sceneRenderer.renderer.domElement};\r\n            /** @type {import('./Camera').CameraParams} */\r\n            var hudCameraParams = Utils.AssignUndefined({fov: 15}, cameraParams);\r\n            this.hud = new HUDView(hudParams, hudCameraParams);\r\n            var hudCameraRef = this.hud.cameraController.camera;\r\n            this.input.onResize.push(function(screen){\r\n                sceneRendererRef.AdjustCamera(screen, hudCameraRef);\r\n            });\r\n\r\n            this.sceneRenderer.renderer.autoClear = false;\r\n        }\r\n        // /hud\r\n\r\n        // Comeplete setup\r\n        var setupParams = {\r\n            gridHelper: false,\r\n        }\r\n\r\n        // Initial camera move\r\n\t\tthis.cameraController.position.x = 100 * units;\r\n\t\tthis.cameraController.position.y = 100 * units;\r\n        this.cameraController.position.z = 100 * units;\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n\r\n        // Env\r\n        if(setupParams.gridHelper){\r\n            var gridHelper = new THREE.GridHelper(200 * units, 20);\r\n            this.sceneController.AddDefault(gridHelper);\r\n        }\r\n\r\n        if(this.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n\r\n        var scope = this;\r\n        return new Promise((resolve, reject) => {\r\n            scope.Dispatch(signals.init);\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        if(this.Update === undefined){\r\n            let scope = this;\r\n            let sceneRenderer = this.sceneRenderer;\r\n            let scene1 = this.sceneController.scene,\r\n                camera1 = this.cameraController.camera;\r\n                \r\n            if(this.ux.params.hud){\r\n                let hud = this.hud;\r\n                let scene2 = hud.scene,\r\n                    camera2 = hud.cameraController.camera;\r\n            \r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n                    hud.Update(timestamp);\r\n\r\n                    sceneRenderer.renderer.clear();\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                    sceneRenderer.renderer.clearDepth();\r\n                    sceneRenderer.Render(scene2, camera2);\r\n                };\r\n            }\r\n            else{\r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                };\r\n            }\r\n        }\r\n\r\n        this.Update();\r\n        this.input.screenNeedsUpdate = true;\r\n        this.input.cameraNeedsUpdate = true;\r\n\r\n        this.Dispatch(signals.started);\r\n    }\r\n\r\n    Pause(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n\r\n        this.Dispatch(signals.paused);\r\n    }\r\n\r\n    Stop(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n        this.input.Dispose();\r\n        this.sceneRenderer.Dispose();\r\n\r\n        this.Dispatch(signals.stopped);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n    DefaultLights(controller, configure, helpers){\r\n\r\n        var units = this.ux.params.units;\r\n\r\n        var ambientLight = new THREE.AmbientLight( 0x404040 );\r\n\r\n        var directionalLight = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLight.position.set(300 * units, 300 * units, 125 * units);\r\n        \r\n        controller.ambientContainer.add(ambientLight);\r\n        controller.ambientContainer.add(directionalLight);\r\n\r\n        var directionalLightComplem = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLightComplem.position.set(-200 * units, 175 * units, 125 * units);\r\n        \r\n        controller.ambientContainer.add(directionalLightComplem);\r\n\r\n        if(this.ux.params.configure && configure){\r\n            let Smart = require('../utils/cik/config/Smart').default;\r\n            let Config = require('../utils/cik/config/Config').default;\r\n            let Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n            let dl = directionalLight;\r\n            let smart = new Smart(dl, 'Directional light');\r\n            smart.MakeShortcut('Configure');\r\n            \r\n            let lightController = ['color', 'intensity', 'castShadow'];\r\n            let shadowControllers = ['shadow.bias', 'shadow.radius', 'shadow.mapSize.x', 'shadow.mapSize.y'];\r\n            //let sc = dl.shadow.camera as THREE.OrthographicCamera;\r\n            let shadowCameraControllers = Config.Unroll('#shadow.camera', 'left', 'top', 'right', 'bottom', 'near', 'far');\r\n\r\n            let dlHelper, dlCameraHelper;\r\n            if(helpers){\r\n                dlHelper = new THREE.DirectionalLightHelper(dl, 5);\r\n                this.sceneController.AddDefault(dlHelper);\r\n                dlCameraHelper = new THREE.CameraHelper(dl.shadow.camera);\r\n                this.sceneController.AddDefault(dlCameraHelper);\r\n            }\r\n\r\n            let sceneRenderer = this.sceneRenderer;\r\n            global.sceneRenderer = sceneRenderer;\r\n            let mapSize = dl.shadow.mapSize.clone();\r\n            function onGUIChanged(){\r\n                dl.shadow.camera.updateProjectionMatrix();\r\n                sceneRenderer.UpdateShadowMaps();\r\n                if(dl.shadow.map){\r\n                    if(dl.shadow.mapSize.manhattanDistanceTo(mapSize) > 0.0001){\r\n                        mapSize.copy(dl.shadow.mapSize);\r\n                        dl.shadow.map.dispose();\r\n                        dl.shadow.map = null;\r\n                    }\r\n                }\r\n\r\n                if(helpers){\r\n                    dlHelper.update();\r\n                    dlCameraHelper.update();\r\n                }\r\n            }\r\n\r\n            smart.Config('Directional light + shadow', dl, onGUIChanged, Smart.serializeModes.json,\r\n                ...lightController,\r\n                ...shadowControllers,\r\n                ...shadowCameraControllers\r\n            );\r\n        }\r\n\r\n        return [ambientLight, directionalLight, directionalLightComplem];\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n\r\n        var appControl3D = Control3D.Configure('app', this.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n        this.sceneController.AddDefault(appControl3D.control);\r\n\r\n        if(this.ux.params.hud){\r\n            var hudControl3D = Control3D.Configure('hud', this.hud.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n            this.hud.AddDefault(hudControl3D.control);\r\n\r\n            var hud = this.hud;\r\n            function onGUIChanged(){\r\n                console.log('Camera changed');\r\n            }\r\n\r\n            var toggle = false;\r\n            var control = {\r\n                toggleOrbitOwner: function(){\r\n                    if(toggle){\r\n                        if(!hud.cameraController.orbitControls){\r\n                            hud.cameraController.OrbitControls(scope.sceneRenderer.renderer.domElement);\r\n                        }\r\n                        scope.cameraController.Hold();\r\n                        hud.cameraController.Release();\r\n                    }\r\n                    else{\r\n                        scope.cameraController.Release();\r\n                        hud.cameraController.Hold();\r\n                    }\r\n                    toggle = !toggle;\r\n                },\r\n                hudCam: hud.cameraController,\r\n                print: function(){\r\n                    smart.config.Update();\r\n                    console.group('hudCam properties');\r\n                    console.log('position', Utils.VecToString(hud.cameraController.position, 1));\r\n                    console.log('rotation', Utils.VecToString(hud.cameraController.rotation, 3));\r\n                    console.groupEnd();\r\n                }\r\n            };\r\n\r\n            control.toggleOrbitOwner();\r\n            \r\n            var smart = new Smart(this, 'HUDView');\r\n            smart.MakeShortcut('Configure');\r\n            var rotationProperties = Config.Unroll('#hudCam.rotation', 'x', 'y', 'z');\r\n            var rotationControllers = Config.Controller.Multiple(rotationProperties, 0, 2 * Math.PI, 2 * Math.PI / 360);\r\n            smart.Config(null, control, onGUIChanged, Smart.serializeModes.none,\r\n                'toggleOrbitOwner',\r\n                'print',\r\n                'hudCam.camera.fov', \r\n                ...Config.Unroll('#hudCam.position', 'x', 'y', 'z'), \r\n                ...rotationControllers\r\n            );\r\n\r\n            console.log('HUDView config', smart.config.gui.list || smart);\r\n        }\r\n    }\r\n}\r\n\r\nexport default SceneSetup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/SceneSetup.js","import Tween from \"../utils/cik/Tween\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\n\r\nrequire('../../min-dependencies/lib/three/controls/OrbitControls');\r\n\r\nconst epsilon = Math.pow(2, -52);\r\n\r\n/**\r\n * @typedef {Object} CameraParams\r\n * @property {Number} fov\r\n * @property {Number} aspect\r\n * @property {Number} near\r\n * @property {Number} far\r\n */\r\n\r\n/** @typedef FrameCoords @property {THREE.Vector3} position @property {THREE.Vector3} center */\r\n\r\n/** @type {FrameCoords} */\r\nvar tempCoords = {};\r\n/** @type {FrameCoords} */\r\nvar ownCoords = {position: new THREE.Vector3(), center: new THREE.Vector3()};\r\n\r\nvar tempVec3 = new THREE.Vector3(),\r\n    tempVec3_b = new THREE.Vector3();\r\n\r\nconst signals = {\r\n    change: 'change',\r\n    userChange: 'userChange'\r\n};\r\n\r\nclass Camera extends Signaler {\r\n    /**\r\n     * @param {CameraParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = params;\r\n\r\n        this.camera = new THREE.PerspectiveCamera(this.params.fov, this.params.aspect, this.params.near, this.params.far);\r\n        this.camera.name = 'UserCamera';\r\n\r\n        this.changed = false;\r\n\r\n        this.dollyAnimation = {\r\n            enabled: false,\r\n            position: Tween.Combo.RequestN(Tween.functions.ease.easeInOutQuad, .5, 0, 0, 0, 0, 0, 0),\r\n            lookAt: Tween.Combo.RequestN(Tween.functions.ease.easeInOutQuad, .5, 0, 0, 0, 0, 0, 0)\r\n        };\r\n\r\n        let scope = this;\r\n        function onDollyAnimationComplete(){\r\n            scope.dollyAnimation.enabled = false;\r\n        }\r\n        this.dollyAnimation.position.onComplete = onDollyAnimationComplete;\r\n        this.dollyAnimation.lookAt.onComplete = onDollyAnimationComplete;\r\n\r\n        this.dollyAnimation.position.Hook(this.position, 'x', 'y', 'z');\r\n\r\n        this.fovAnimation = {\r\n            enabled: false,\r\n            fov: new Tween(Tween.functions.ease.easeInOutQuad, 0, 0, 0)\r\n        };\r\n\r\n        function onFOVAnimationComplete(){\r\n            scope.fovAnimation.enabled = false;\r\n        }\r\n        this.fovAnimation.fov.onComplete = onFOVAnimationComplete;\r\n        this.fovAnimation.fov.Hook(this.camera, 'fov');\r\n    }\r\n\r\n    get position(){ return this.camera.position; }\r\n    set position(value){ this.camera.position.copy(value); this.changed = true; }\r\n    get rotation(){ return this.camera.rotation; }\r\n    set rotation(value){ this.camera.rotation.copy(value); this.changed = true; }\r\n\r\n    FirstPersonControls(container, params){\r\n        if(this.fpsControls === undefined && container !== undefined){\r\n            this.fpsControls = new App.Navigation.FirstPerson(this.camera, container);\r\n\r\n            this.fpsControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.fpsControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n        \r\n        if(this.fpsControls !== undefined){\r\n            if(params !== undefined){\r\n                this.fpsControls.speed.set(params.speedX, params.speedY);\r\n                this.fpsControls.damping = params.damping;\r\n                this.fpsControls.momentum = params.momentum;\r\n                this.fpsControls.limitPhi = params.limitPhi;\r\n                this.fpsControls.moveSpeed = params.moveSpeed;\r\n                this.fpsControls.keyControls = true;\r\n            }\r\n\r\n            this.controls = this.fpsControls;\r\n        }\r\n    }\r\n\r\n    OrbitControls(container, params){\r\n        if(this.orbitControls === undefined && container !== undefined){\r\n\r\n            var lookTarget = new THREE.Vector3();\r\n            this.camera.getWorldDirection(lookTarget);\r\n            lookTarget.multiplyScalar(200).add(this.camera.position);\r\n\r\n            /** @type {THREE.EventDispatcher} */\r\n            this.orbitControls = new THREE.OrbitControls(this.camera, container);\r\n            this.orbitControls.target.copy(lookTarget);\r\n\r\n            this.dollyAnimation.lookAt.Hook(this.orbitControls.target, 'x', 'y', 'z');\r\n\r\n            let scope = this;\r\n            this.orbitControls.addEventListener('change', function(e){\r\n                scope.changed = true;\r\n            });\r\n            this.orbitControls.addEventListener('start', function(e){\r\n                scope.Dispatch(signals.userChange);\r\n            });\r\n            \r\n            this.orbitControls.Update = function(){\r\n                if(this.enabled){\r\n                    if(this.object.position.distanceTo(this.target) < 50){\r\n                        var v = new THREE.Vector3().subVectors(this.target, this.object.position).multiplyScalar(.5);\r\n                        this.target.add(v);\r\n                    }\r\n                    this.update();\r\n                }\r\n            };\r\n            this.orbitControls.Hold = function(){\r\n                this.saveState();\r\n                this.enabled = false;\r\n            };\r\n            this.orbitControls.Release = function(){\r\n                this.reset();\r\n                this.enabled = true;\r\n            };\r\n        }\r\n\r\n        \r\n        params = params || {\r\n            maxDistance: 9000.0 * /*units*/1,\r\n            maxPolarAngle: Math.PI * 0.895\r\n        }\r\n        if(params !== undefined){\r\n            this.orbitControls.maxDistance = params.maxDistance;\r\n            this.orbitControls.maxPolarAngle = params.maxPolarAngle;\r\n            this.orbitControls.autoRotate = false;\r\n        }\r\n\r\n        this.controls = this.orbitControls;\r\n    }\r\n\r\n    ToggleControls(){\r\n        this.Hold();\r\n\r\n        if(this.controls === this.orbitControls){\r\n            if(this.fpsControls){\r\n                this.fpsControls.LerpRotation(this.camera, 1);\r\n                this.FirstPersonControls();\r\n            }\r\n        }\r\n        else{\r\n            if(this.orbitControls){\r\n                this.OrbitControls();\r\n\r\n                // target\r\n                var maxDistance = 100;\r\n\r\n                var point = new THREE.Vector3(0, 0, -1);\r\n                var quat = new THREE.Quaternion();\r\n                point.applyQuaternion(this.camera.getWorldQuaternion(quat)).normalize().multiplyScalar(maxDistance * .5).add(this.camera.position);\r\n\r\n                this.SetTarget(point);\r\n            }\r\n        }\r\n\r\n        this.Release();\r\n    }\r\n\r\n    /** @param {THREE.Vector3} position */\r\n    SetTarget(position){\r\n        if(this.controls instanceof THREE.OrbitControls){\r\n            this.controls.target.copy(position);\r\n            this.changed = true;\r\n        }\r\n        else {\r\n            console.warn('SetTarget not implemented for control type:', this.controls);\r\n        }\r\n    }\r\n\r\n    /** @returns {THREE.Vector3} */\r\n    GetTarget(){\r\n        if(this.controls instanceof THREE.OrbitControls){\r\n            return this.controls.target;\r\n        }\r\n        else {\r\n            console.warn('GetTarget not implemented for control type:', this.controls);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        if(this.dollyAnimation.enabled){\r\n            this.dollyAnimation.position.Update();\r\n            this.dollyAnimation.lookAt.Update();\r\n            this.changed = true;\r\n        }\r\n\r\n        if(this.fovAnimation.enabled){\r\n            this.fovAnimation.fov.Update();\r\n            this.camera.updateProjectionMatrix();\r\n            this.changed = true;\r\n        }\r\n\r\n        if(this.controls !== undefined){\r\n            this.controls.Update();\r\n        }\r\n    }\r\n\r\n    Hold(){\r\n        if(this.enabled && this.controls !== undefined && this.controls.Hold){\r\n            this.controls.Hold();\r\n        }\r\n    }\r\n\r\n    Release(){\r\n        if(!this.enabled && this.controls !== undefined && this.controls.Release){\r\n            this.controls.Release();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     * @param {Number} [distanceMultiplier]\r\n     * @param {THREE.Vector3} [orientation]\r\n     * @param {Number} [fov] fov in degrees\r\n     * @returns {FrameCoords}\r\n     */\r\n    CalcFrameCoords(box3, distanceMultiplier, orientation, fov){\r\n       if(distanceMultiplier === undefined) distanceMultiplier = .75;\r\n\r\n       fov = (fov || this.camera.fov) * (Math.PI / 180);\r\n\r\n       let extent = tempVec3;\r\n       box3.getSize(extent);\r\n       let frameSize = Math.max(extent.x, extent.y, extent.z, 1);\r\n       let distance = Math.abs(frameSize / Math.sin(fov / 2)) * distanceMultiplier;\r\n       \r\n       let center = tempVec3_b;\r\n       box3.getCenter(center);\r\n       \r\n       let position = tempVec3;\r\n       orientation = orientation ? orientation : position.subVectors(this.camera.position, center); \r\n       position.copy(orientation).normalize().multiplyScalar(distance).add(center);\r\n       position.y = Math.abs(position.y);\r\n\r\n       tempCoords.position = position;\r\n       tempCoords.center = center;\r\n       return tempCoords;\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     * @param {Number} [distanceMultiplier]\r\n     */\r\n    Frame(box3, distanceMultiplier){\r\n        let coords = this.CalcFrameCoords(box3, distanceMultiplier);\r\n\r\n        this.camera.position.copy(coords.position);\r\n        this.SetTarget(coords.center);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} duration\r\n     * @param {THREE.Box3} box3 \r\n     * @param {Number} [distanceMultiplier]\r\n     */\r\n    TransitionToFrame(duration, box3, distanceMultiplier){\r\n        let endCoords = this.CalcFrameCoords(box3, distanceMultiplier);\r\n        this.TransitionFromToCoords(duration, undefined, endCoords);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} duration\r\n     * @param {FrameCoords} startCoords \r\n     * @param {FrameCoords} endCoords \r\n     */\r\n    TransitionFromToCoords(duration, startCoords, endCoords){\r\n\r\n        if(!startCoords){\r\n            startCoords = ownCoords;\r\n            startCoords.position.copy(this.position);\r\n            startCoords.center.copy(this.orbitControls.target);\r\n        }\r\n\r\n        this.dollyAnimation.position.SetDurations(duration, duration, duration);\r\n        this.dollyAnimation.lookAt.SetDurations(duration, duration, duration);\r\n\r\n        let p = startCoords.position;\r\n        this.dollyAnimation.position.SetStartValues(p.x, p.y, p.z);\r\n        let tp = endCoords.position;\r\n        this.dollyAnimation.position.SetDeltas(tp.x - p.x, tp.y - p.y, tp.z - p.z);\r\n\r\n        p = startCoords.center;\r\n        this.dollyAnimation.lookAt.SetStartValues(p.x, p.y, p.z);\r\n        tp = endCoords.center;\r\n        this.dollyAnimation.lookAt.SetDeltas(tp.x - p.x, tp.y - p.y, tp.z - p.z);\r\n\r\n        this.dollyAnimation.position.Restart();\r\n        this.dollyAnimation.lookAt.Restart();\r\n        this.dollyAnimation.enabled = true;\r\n    }\r\n\r\n    /** @param {Number} duration @param {Number} fov */\r\n    TransitionToFOV(duration, fov){\r\n        let deltaFOV = fov - this.camera.fov;\r\n        if(Math.abs(deltaFOV) < epsilon) return;\r\n\r\n        this.fovAnimation.fov.duration = duration;\r\n        this.fovAnimation.fov.startValue = this.camera.fov;\r\n        this.fovAnimation.fov.delta = deltaFOV;\r\n        this.fovAnimation.fov.Restart();\r\n        this.fovAnimation.enabled = true;\r\n    }\r\n\r\n    /**\r\n     * @returns {Boolean}\r\n     */\r\n    get enabled(){\r\n        return this.controls && this.controls.enabled;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default Camera;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Camera.js","import Pool from \"./Pool\";\r\n\r\n/** \r\n * Tween update function\r\n * @param {Number} time \r\n * @param {Number} startValue \r\n * @param {Number} delta \r\n * @param {Number} duration\r\n * @returns {Number} value\r\n */\r\nfunction TweenCallback(time, startValue, delta, duration){}\r\n\r\n/**\r\n * On completed callback\r\n * @param {Tween} target\r\n */\r\nfunction TweenCompletedCallback(target){}\r\n\r\nvar clock = new THREE.Clock();\r\n\r\nfunction poolNewFN(){\r\n    return new Tween();\r\n}\r\n/** @param {Tween} tween */\r\nfunction poolResetFN(tween){\r\n    return tween;\r\n}\r\nvar pool = new Pool(poolNewFN, poolResetFN);\r\n\r\nconst functions = {\r\n    /** @type {TweenCallback} */\r\n    linear: function(t, b, c, d){\r\n        return b + c * (t / d);\r\n    },\r\n\r\n    ease: {\r\n        /** @type {TweenCallback} */\r\n        easeOutElastic: function(t, b, c, d) {\r\n            var ts=(t/=d)*t;\r\n            var tc=ts*t;\r\n            return b+c*(33*tc*ts + -106*ts*ts + 126*tc + -67*ts + 15*t);\r\n        },\r\n\r\n        /** @type {TweenCallback} */\r\n        easeOutQuad: function (t, b, c, d) {\r\n            return -c *(t/=d)*(t-2) + b;\r\n        },\r\n\r\n        /** @type {TweenCallback} */\r\n        easeOutCubic: function (t, b, c, d) {\r\n            return c*((t=t/d-1)*t*t + 1) + b;\r\n        },\r\n\r\n        easeInOutQuad: function (t, b, c, d) {\r\n            if ((t/=d/2) < 1) return c/2*t*t + b;\r\n            return -c/2 * ((--t)*(t-2) - 1) + b;\r\n        }\r\n    },\r\n\r\n    special: {\r\n        /** @type {TweenCallback} */\r\n        pingPong: function (t, b, c, d) {\r\n            return Math.sin(t / d * Math.PI) * c + b;\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * On completed callback\r\n * @param {TweenCombo} target\r\n */\r\nfunction TweenComboCompletedCallback(target){}\r\n\r\nclass TweenCombo{\r\n    /**\r\n     * \r\n     * @param {Array<Tween>} tweens \r\n     */\r\n    constructor(...tweens){\r\n        this.tweens = tweens;\r\n\r\n        /** @type {TweenComboCompletedCallback} */\r\n        this.onComplete;\r\n        this.completed = false;\r\n    }\r\n\r\n    /** @param {Array<Number>} args */\r\n    SetDurations(...args){ for(var i = 0; i < this.tweens.length; i++) this.tweens[i].duration = args[i]; }\r\n\r\n    /** @param {Array<Number>} args */\r\n    SetDeltas(...args){ for(var i = 0; i < this.tweens.length; i++) this.tweens[i].delta = args[i]; }\r\n\r\n    /** @param {Array<Number>} args */\r\n    SetStartValues(...args){ for(var i = 0; i < this.tweens.length; i++) this.tweens[i].startValue = args[i]; }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {Array<string>} properties \r\n     */\r\n    Hook(object, ...properties){\r\n        for(var i = 0; i < this.tweens.length; i++){\r\n            this.tweens[i].Hook(object, properties[i]);\r\n        };\r\n    }\r\n\r\n    Unhook(){\r\n        this.tweens.forEach(tween => tween.Unhook());\r\n    }\r\n\r\n    /** Restarts time */\r\n    Restart(){\r\n        this.tweens.forEach(tween => tween.Restart());\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} [t] [0, duration]\r\n     */\r\n    Update(t){\r\n        var completed = true;\r\n        this.tweens.forEach(tween => {\r\n            if(tween.completed === false)\r\n                tween.Update(t);\r\n\r\n            completed = completed && tween.completed;\r\n        });\r\n\r\n        this.completed = completed;\r\n        if(this.completed && this.onComplete)\r\n            this.onComplete(this);\r\n    }\r\n\r\n    /**\r\n     * Returns tweens to pool\r\n     */\r\n    Return(){\r\n        this.tweens.forEach(tween => {\r\n            pool.Return(tween);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} startValue0\r\n     * @param {Number} startValue1\r\n     * @param {Number} startValue2\r\n     * @param {Number} delta0\r\n     * @param {Number} delta1\r\n     * @param {Number} delta2\r\n     * @param {Number} duration\r\n     */\r\n    static Request3(callback, duration, startValue0, delta0, startValue1, delta1, startValue2, delta2){\r\n        var tween0 = pool.Request();\r\n        tween0.Reset(callback, startValue0, delta0, duration);\r\n\r\n        var tween1 = pool.Request();\r\n        tween1.Reset(callback, startValue1, delta1, duration);\r\n\r\n        var tween2 = pool.Request();\r\n        tween2.Reset(callback, startValue2, delta2, duration);\r\n\r\n        var combo = new TweenCombo(tween0, tween1, tween2);\r\n        return combo;\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} duration \r\n     * @param {Array<Number>} args startValueN, deltaN\r\n     */\r\n    static RequestN(callback, duration, ...args){\r\n\r\n        let tweens = [];\r\n        for(let i = 0; i < args.length; i += 2){\r\n            let tween = pool.Request();\r\n            tween.Reset(callback, args[i], args[i + 1], duration);\r\n            tweens.push(tween);\r\n        }\r\n\r\n        let combo = new TweenCombo(...tweens);\r\n        return combo;\r\n    }\r\n}\r\n\r\nclass Tween{\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue] \r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    constructor(callback, startValue, delta, duration){\r\n        this.Reset(callback, startValue, delta, duration);\r\n        \r\n        /** @type {TweenCompletedCallback} */\r\n        this.onComplete;\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    Reset(callback, startValue, delta, duration){\r\n        this.callback = callback;\r\n        this.startValue = startValue;\r\n        this.delta = delta;\r\n        this.duration = duration;\r\n\r\n        if(this.startValue === undefined && this.object && this.property){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n\r\n        this.Restart();\r\n    }\r\n\r\n    /** Restarts time */\r\n    Restart(){\r\n        this.completed = false;\r\n        this.startTime = clock.getElapsedTime();\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {string} property \r\n     */\r\n    Hook(object, property){\r\n        this.object = object;\r\n        this.property = property;\r\n\r\n        if(this.startValue === undefined){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n    }\r\n\r\n    Unhook(){\r\n        this.object = this.property = undefined;\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} [t] [0, duration]\r\n     */\r\n    Update(t){\r\n        if(t === undefined) t = clock.getElapsedTime() - this.startTime;\r\n\r\n        if(t >= this.duration){\r\n            this.completed = true;\r\n            let endValue = this.startValue + this.delta;\r\n        \r\n            if(this.object)\r\n                this.object[this.property] = endValue;\r\n            \r\n            if(this.onComplete)\r\n                this.onComplete(this);\r\n            \r\n            return endValue;\r\n        }\r\n\r\n        var x = this.callback(t, this.startValue, this.delta, this.duration);\r\n        if(this.object)\r\n            this.object[this.property] = x;\r\n        \r\n        return x;\r\n    }\r\n\r\n    Return(){\r\n        pool.Return(this);\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    static Request(callback, startValue, delta, duration){\r\n        var tween = pool.Request();\r\n        tween.Reset(callback, startValue, delta, duration);\r\n\r\n        return tween;\r\n    }\r\n\r\n    static get functions(){\r\n        return functions;\r\n    }\r\n}\r\n\r\nTween.Combo = TweenCombo;\r\n\r\nexport default Tween;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Tween.js","\r\nconst _new = Symbol('new'),\r\n    _reset = Symbol('reset');\r\n\r\n/**\r\n * @template {T}\r\n */\r\nclass Pool{\r\n    /**\r\n     * @param {function(...args)=>T} fnNew \r\n     * @param {function(T, ...args)=>T} [fnReset]\r\n     */\r\n    constructor(fnNew, fnReset){\r\n        this.objects = [];\r\n\r\n        this[_new] = fnNew;\r\n        this[_reset] = fnReset;\r\n    }\r\n\r\n    /** Get a clean object (fnNew & fnReset) from the pool\r\n     * @returns {T}\r\n     */\r\n    Request(...args){\r\n        var object;\r\n\r\n        if(this.objects.length === 0){\r\n            object = this[_new](...args);\r\n        }\r\n        else{\r\n            object = this.objects[this.objects.length - 1];\r\n            --this.objects.length;\r\n        }\r\n\r\n        return this[_reset](object, ...args);\r\n    }\r\n\r\n    /** Make object available again\r\n     * @param {T} object \r\n     */\r\n    Return(object){\r\n        this.objects[this.objects.length] = object;\r\n    }\r\n}\r\n\r\nexport default Pool;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Pool.js","import CargoView from \"./CargoView\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Asset from \"../components/assets/Asset\";\r\n\r\nconst unitCubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst materialTemplate = new Asset.SolidMaterialType({roughness: 1, metalness: 0, flatShading: true});\r\n\r\nconst brightnessRange = [.45, .55];\r\nvar hueBase = Math.random();\r\nfunction nextColor(){\r\n    let color = new THREE.Color();\r\n    color.setHSL(hueBase, 1, brightnessRange[0] + Math.random() * (brightnessRange[1] - brightnessRange[0]));\r\n    hueBase = Utils.GoldenSeries(hueBase);\r\n    return color;\r\n}\r\n\r\nconst _materialSettings = Symbol('matSet');\r\nconst _color = Symbol('color');\r\n\r\nconst typeofNumber = 'number',\r\n    typeofString = 'string';\r\n\r\nclass CargoBoxView extends CargoView {\r\n    /**\r\n     * \r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var material = materialTemplate.clone();\r\n\r\n        let colorHex = boxEntry.Description('color');\r\n        this[_color] = colorHex ? new THREE.Color(colorHex) : nextColor();\r\n        boxEntry.Description('color', this.color.getHex());\r\n\r\n        material.color = this.color;\r\n        this.mesh = new THREE.Mesh(unitCubeGeometry, material);\r\n        this.mesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view.add(this.mesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        var s = value.dimensions.vec3;\r\n        this.SetScale(s.x, s.y, s.z);\r\n\r\n        let colorHex = value.Description('color');\r\n        if(colorHex) this.color = colorHex;\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    set focus(value){\r\n        super.focus = value;\r\n\r\n        if(this[_materialSettings]) Asset.RestoreMaterial(this.mesh.material, this[_materialSettings]);\r\n\r\n        if(Math.abs(1 - value) > .0001){\r\n            if(this[_materialSettings] === undefined){\r\n                this.mesh.material = this.mesh.material.clone();\r\n                this[_materialSettings] = {};\r\n                Asset.SetMaterialFocus(this.mesh.material, value, this[_materialSettings]);\r\n            }\r\n            else{\r\n                Asset.SetMaterialFocus(this.mesh.material, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    get focus(){ return super.focus; }\r\n\r\n    /** @returns {THREE.Color} */\r\n    get color(){ return this[_color]; }\r\n\r\n    /** @param {Number} value hex */\r\n    set color(value){\r\n        /** @type {THREE.Color} */\r\n        let c = this[_color];\r\n        if(typeof value === typeofNumber) c.setHex(value);\r\n        else if(typeof value === typeofString) c.setHex(Number.parseInt(value));\r\n        else c.copy(value);\r\n        if(this[_materialSettings]) this[_materialSettings].color = c.getHex();\r\n        else this.mesh.material.color = c;\r\n        this.focus = super.focus;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n\r\n        if(this.labelView) this.labelView.view.position.z = params.width / 2 + this.entry.dimensions.length / 2;\r\n    }\r\n\r\n    ReflectEntry(){\r\n        this.entry = this.entry;\r\n    }\r\n\r\n    /** \r\n     * @param {string} value \r\n     * @param {import('./CargoView').CargoViewLabelParams} params */\r\n    SetLabel(value, params){\r\n        super.SetLabel(value, params);\r\n\r\n        this.labelView.view.scale.y = params.height;\r\n        this.labelView.view.scale.x = params.width;\r\n        this.labelView.view.position.z = params.width / 2 + this.entry.dimensions.length / 2;\r\n        this.labelView.view.position.y = .001;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x in radians\r\n     * @param {Number} y in radians\r\n     * @param {Number} z in radians\r\n     */\r\n    SetRotationAngles(x, y, z){\r\n        this.mesh.rotation.set(x, y, z);\r\n    }\r\n\r\n    static GetNextColor(){\r\n        return nextColor();\r\n    }\r\n}\r\n\r\nexport default CargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoBoxView.js","import CargoEntry from \"../components/common/CargoEntry\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport TextLabelView from \"./components/TextLabelView\";\r\n\r\n/**\r\n * @typedef CargoViewLabelParams\r\n * @property {Number} width\r\n * @property {Number} height\r\n */\r\n\r\nconst dummyGeometry = new THREE.SphereBufferGeometry(1, 4, 4);\r\nconst dummyMaterial = new Asset.TransparentMaterialType({color: 0xff0000, transparent: true, opacity: .5});\r\n\r\nconst _entry = Symbol('entry');\r\nconst _focus = Symbol('focus');\r\n\r\nclass CargoView {\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    constructor(entry){\r\n\r\n        this[_entry] = entry;\r\n\r\n        /** @type {THREE.Mesh} */\r\n        this.mesh;\r\n\r\n        this.view = new THREE.Object3D();\r\n\r\n        this[_focus] = 1;\r\n    }\r\n\r\n    /** @returns {CargoEntry} */\r\n    get entry(){ return this[_entry]; }\r\n    set entry(value){\r\n        this[_entry] = value;\r\n    }\r\n\r\n    get position(){\r\n        return this.view.position;\r\n    }\r\n\r\n    set position(value){\r\n        this.view.position.copy(value);\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    set focus(value){\r\n        this[_focus] = value;\r\n    }\r\n\r\n    get focus(){ return this[_focus]; }\r\n\r\n    ReflectEntry(){\r\n        \r\n    }\r\n\r\n    /** @param {string} value @param {CargoViewLabelParams} params */\r\n    SetLabel(value, params){\r\n        const height = 64;\r\n        let width = Math.floor( params.width / params.height * height );\r\n        if(this.labelView === undefined){\r\n            /** @type {import('./TextLabelView').TLVParams} */\r\n            let tlvParams = { font: '32px sans serif', backColor: 'rgb(0, 0, 0)', fontColor: 'rgb(255, 255, 255)', \r\n                textAlign: 'right', sidePadding: 16, width: width, height: height\r\n            };\r\n            let ratioToX = 64\r\n\r\n            this.labelView = new TextLabelView(tlvParams);\r\n            this.labelView.view.rotateY( 90 * Math.PI / 180 );\r\n            this.labelView.view.rotateX( -90 * Math.PI / 180 );\r\n            this.view.add(this.labelView.view);\r\n        }\r\n\r\n        this.labelView.UpdateText(value);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    static Dummy(entry){\r\n        var cargoView = new CargoView(entry);\r\n        cargoView.view = new THREE.Mesh(dummyGeometry, dummyMaterial);\r\n        return cargoView;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoView.js","import Utils from \"./utils/cik/Utils\";\r\nimport Visualization from \"./components/Visualization\";\r\nimport User from \"./components/User\";\r\nimport App from \"./App\";\r\nimport Constants from \"./Constants\";\r\n\r\n/**\r\n * @typedef UXParams\r\n * @property {Boolean} hud default = true, create hud (hud currently disabled in api)\r\n * @property {Boolean} configure default = false, execute helpers that allow configuration\r\n * @property {Number} units default = 1, conversion to unit employed, default=1 for inches, for meters: units=0.0254\r\n * @property {Boolean} autoUpdatePack default = true, will auto-update the packing if entries are modified or deleted\r\n * @property {Number} backgroundColor default = 0xfefefe\r\n * @property {Constants.scaleRefFigure} scaleRefFigure default = man, human figure to show as scale reference\r\n * @property {Number} fov camera perspective fov\r\n */\r\nconst defaultParams = {\r\n    hud: true,\r\n    configure: false,\r\n    units: 1,\r\n    autoUpdatePack: true,\r\n    backgroundColor: 0xfefefe,\r\n    scaleRefFigure: Constants.scaleRefFigure.man,\r\n    fov: 15\r\n};\r\n\r\nclass UX{\r\n    /**\r\n     * \r\n     * @param {UXParams} params \r\n     */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Bind(value){\r\n        /** @type {App} */\r\n        let app = value;\r\n    \r\n        /** Interface with visual elements */\r\n\t\tthis.visualization = new Visualization(app);\r\n\r\n\t\t/** Interface with user input/output */\r\n        this.user = new User(app);\r\n    }\r\n\r\n}\r\n\r\nUX.User = User;\r\nUX.Visualization = Visualization;\r\n\r\nexport default UX;\n\n\n// WEBPACK FOOTER //\n// ./src/api/UX.js","import Logger from \"../utils/cik/Logger\";\r\nimport CargoBoxView from \"./CargoBoxView\";\r\nimport CargoView from \"./CargoView\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport CargoGroup from \"../packer/CargoGroup\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport FloatingShelf from \"./components/FloatingShelf\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport TextLabelView from \"./components/TextLabelView\";\r\nimport RaycastGroup, { RaycastCallback } from \"../utils/cik/input/RaycastGroup\";\r\nimport Outline from \"./components/Outline\";\r\nimport Tween from \"../utils/cik/Tween\";\r\n\r\n/**\r\n * @typedef {Object} CargoListViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Number} outlineOffset\r\n */\r\n\r\n/**\r\n * @typedef SortResult\r\n * @property {Number} min\r\n * @property {Number} max\r\n * @property {Number} cargoes\r\n */\r\n\r\nconst typeofString = 'string';\r\nconst epsilon = Math.pow(2, -52);\r\n\r\nconst _selectedEntryUID = Symbol('seUID');\r\n\r\n/** @type {Map<CargoView, TextLabelView>} */\r\nvar labels = new Map();\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nconst signals = {\r\n    sort: 'sort',\r\n    select: 'select',\r\n    deselect: 'deselect',\r\n    interact: 'interact'\r\n};\r\n\r\n/** @type {CargoListViewParams} */\r\nconst defaultParams = {\r\n    outlineOffset: 4\r\n};\r\n\r\nclass CargoListView extends Signaler {\r\n    /**\r\n     * @param {CargoListViewParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view = new THREE.Object3D();\r\n        this.templatesView = new THREE.Object3D();\r\n        this.view.add(this.templatesView);\r\n\r\n        /** @type {Map<CargoGroup, CargoView>} */\r\n        this.cargoTemplateViews = new Map();\r\n\r\n        let units = this.params.ux.params.units;\r\n\r\n        // Shelf\r\n        /** @type {import('./components/FloatingShelf').FloatingShelfParams} */\r\n        let fsParams = {padding: new THREE.Vector3(10 * units, (this.params.outlineOffset + 1) * units, 10 * units), colorHex: Asset.ColorTemplates('Containers').Apply(0x000000)};\r\n        this.floatingShelf = new FloatingShelf(this.templatesView, fsParams);\r\n        this.view.add(this.floatingShelf.view);\r\n\r\n        // Interaction\r\n        this.raycastGroupItems = [];\r\n        this.raycastGroup = new RaycastGroup(this.raycastGroupItems, this.OnInteract.bind(this), \r\n            /** @param {CargoView} item */\r\n            function(item){\r\n                return item.view;\r\n            },\r\n            false,\r\n            true);\r\n\r\n        this.outline = new Outline({color: 0xffffff, opacity: 1, offsetFactor: this.params.outlineOffset * units});\r\n        this.view.add(this.outline.view);\r\n\r\n        // Transition\r\n        this.slidingAnimation = {\r\n            enabled: false,\r\n            position: Tween.Combo.RequestN(Tween.functions.ease.easeOutCubic, .5, 0, 0),\r\n            originalPosition: new THREE.Vector3(0, 0, 0)\r\n        };\r\n\r\n        let scope = this;\r\n        function onAnimationComplete(){\r\n            scope.slidingAnimation.enabled = false;\r\n        }\r\n        this.slidingAnimation.position.onComplete = onAnimationComplete;\r\n\r\n        this.slidingAnimation.position.Hook(this.view.position, 'y');\r\n    }\r\n\r\n    /**\r\n     * @param {CargoGroup} group \r\n     */\r\n    Add(group){\r\n        let units = this.params.ux.params.units;\r\n\r\n        let templateCargoView;\r\n        switch(group.entry.type){\r\n            case 'BoxEntry': {\r\n                templateCargoView = new CargoBoxView(group.entry);\r\n\r\n                let ticketParams = { width: 50 * units, height: 20 * units };\r\n\r\n                const height = 96;\r\n                let width = Math.floor( ticketParams.width / ticketParams.height * height );\r\n                /** @type {import('./TextLabelView').TLVParams} */\r\n                let tlvParams = { font: '64px sans-serif', backColor: 'rgb(0, 0, 0)', fontColor: 'rgb(255, 255, 255)', \r\n                    textAlign: 'left', sidePadding: 30, width: width, height: height\r\n                };\r\n\r\n                let labelView = new TextLabelView(tlvParams);\r\n                labelView.view.rotateY( 90 * Math.PI / 180 );\r\n                labelView.view.rotateX( -90 * Math.PI / 180 );\r\n                labelView.view.scale.y = ticketParams.height;\r\n                labelView.view.scale.x = ticketParams.width;\r\n                /** @type {BoxEntry} */\r\n                let boxEntry = group.entry;\r\n                labelView.view.position.z = ticketParams.width / 2;\r\n                this.view.add(labelView.view);\r\n\r\n                labelView.UpdateText(boxEntry.quantity);\r\n\r\n                labels.set(templateCargoView, labelView);\r\n                \r\n                break;\r\n            }\r\n\r\n            default :\r\n                templateCargoView = CargoView.Dummy(group.entry);\r\n                Logger.Warn('group.entry.type not supported by viewer,', group);\r\n                break;\r\n        }\r\n\r\n        this.cargoTemplateViews.set(group, templateCargoView);\r\n        this.templatesView.add(templateCargoView.view);\r\n\r\n        this.raycastGroupItems.push(templateCargoView);\r\n        this.raycastGroup.UpdateItems(this.raycastGroupItems);\r\n\r\n        this.Sort();\r\n        this.floatingShelf.Update();\r\n    }\r\n\r\n    /**\r\n     * @param {CargoGroup} group \r\n     */\r\n    UpdateGroup(group){\r\n        let templateCargoView = this.cargoTemplateViews.get(group);\r\n        templateCargoView.ReflectEntry();\r\n\r\n        this.Sort();\r\n        this.floatingShelf.Update();\r\n\r\n        if(this[_selectedEntryUID] === group.entry.uid) this.SetOutline(templateCargoView);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoGroup} group \r\n     */\r\n    Remove(group){\r\n        var templateCargoView = this.cargoTemplateViews.get(group);\r\n        if(templateCargoView){\r\n\r\n            let raycastGroupIndex = this.raycastGroupItems.indexOf(templateCargoView);\r\n            if(raycastGroupIndex !== -1) this.raycastGroupItems.splice(raycastGroupIndex, 1);\r\n            this.raycastGroup.UpdateItems(this.raycastGroupItems);\r\n\r\n            this.cargoTemplateViews.delete(group);\r\n            this.templatesView.remove(templateCargoView.view);\r\n\r\n            if(this[_selectedEntryUID] === group.entry.uid) this.outline.box = false;\r\n\r\n            this.Sort();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * RaycastCallback\r\n     * @param {CargoView} cargoView\r\n     * @param {THREE.Intersection} intersection\r\n     */\r\n    OnInteract(cargoView, intersection){\r\n        this.Dispatch(signals.interact, cargoView.entry);\r\n    }\r\n\r\n    /** @param {CargoView} cargoView */\r\n    Select(entryUID){\r\n\r\n        this[_selectedEntryUID] = entryUID;\r\n\r\n        if(!entryUID){\r\n            this.outline.box = false;\r\n            this.Dispatch(signals.deselect);\r\n        }\r\n        else{\r\n            let cargoView = this.GetTemplate(entryUID);\r\n            this.SetOutline(cargoView);\r\n            this.Dispatch(signals.select, cargoView.entry);\r\n        }\r\n    }\r\n\r\n    /** @param {CargoView} target */\r\n    SetOutline(target){\r\n        this.outline.box = target instanceof CargoBoxView ? target.mesh : target.view;\r\n    }\r\n\r\n    SlideUp(targetY, duration){\r\n        let deltaY = targetY - this.view.position.y;\r\n        if(Math.abs(deltaY) < epsilon) return;\r\n\r\n        this.slidingAnimation.position.SetDurations(duration);\r\n        this.slidingAnimation.position.SetStartValues(this.view.position.y);\r\n        this.slidingAnimation.position.SetDeltas(deltaY);\r\n        this.slidingAnimation.position.Restart();\r\n        this.slidingAnimation.enabled = true;\r\n    }\r\n\r\n    SlideDown(duration){\r\n        let deltaY = this.slidingAnimation.originalPosition.y - this.view.position.y;\r\n        if(Math.abs(deltaY) < epsilon) return;\r\n\r\n        this.slidingAnimation.position.SetDurations(duration);\r\n        this.slidingAnimation.position.SetStartValues(this.view.position.y);\r\n        this.slidingAnimation.position.SetDeltas(deltaY);\r\n        this.slidingAnimation.position.Restart();\r\n        this.slidingAnimation.enabled = true;\r\n    }\r\n\r\n    Update(){\r\n        if(this.slidingAnimation.enabled){\r\n            this.slidingAnimation.position.Update();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup|CargoEntry|string|Number} id \r\n     */\r\n    GetTemplate(id){\r\n        var group;\r\n        if(id instanceof CargoGroup){\r\n            group = id;\r\n        }\r\n        else if(id instanceof CargoEntry){\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry === id) group = cargoGroup;\r\n            }\r\n        }\r\n        else{\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry.uid === id) group = cargoGroup;\r\n            }\r\n        }\r\n\r\n        return this.cargoTemplateViews.get(group);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoView} cargoView \r\n     * @param {string} value \r\n     * @param {string} textColor css\r\n     */\r\n    UpdateLabel(cargoView, value, textColor){\r\n        let textLabelView = labels.get(cargoView);\r\n        if(textLabelView){\r\n            if(textColor) textLabelView.params.fontColor = textColor;\r\n            textLabelView.UpdateText(value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {Map<CargoGroup, CargoView>} cargoViews \r\n     * @returns {Number}\r\n     */\r\n    Sort(){\r\n\r\n        this.SortMapBySize();\r\n\r\n        var units = this.params.ux.params.units;\r\n\r\n        this.view.updateMatrixWorld(true);\r\n        const worldToLocal = new THREE.Matrix4().getInverse(this.templatesView.matrixWorld);\r\n        const padding = 5 * units,\r\n            start = 0;\r\n\r\n        var i = 0,\r\n            offset = 0;\r\n            \r\n        /**\r\n         * @type {SortResult}\r\n         */\r\n        var result = {min: start, max: start, cargoes: 0};\r\n        \r\n        var list = this.cargoTemplateViews.values(),\r\n            cargoView;\r\n        while( ( cargoView = list.next() ).done === false ){\r\n\r\n            cargoView.value.position.set(start, 0, 0);\r\n\r\n            tempBox.setFromObject(cargoView.value.view);\r\n            tempBox.applyMatrix4(worldToLocal);\r\n\r\n            tempBox.getSize(tempVec);\r\n            var halfSize = tempVec.x / 2;\r\n            if(i > 0)\r\n                offset += halfSize;\r\n\r\n            cargoView.value.position.set(start + offset, tempVec.y / 2 + padding, -tempVec.z / 2);\r\n\r\n            let labelView = labels.get(cargoView.value);\r\n            labelView.view.position.x = cargoView.value.position.x;\r\n            labelView.view.position.y = padding + 1 * units;\r\n\r\n            offset += halfSize + padding;\r\n\r\n            i++;\r\n        }\r\n\r\n        result.min = start;\r\n        result.max = offset;\r\n        result.cargoes = i;\r\n        this.Dispatch(signals.sort, result);\r\n    }\r\n\r\n    SortMapBySize(){\r\n        /**\r\n         * \r\n         * @param {[CargoGroup, CargoListView]} a \r\n         * @param {[CargoGroup, CargoListView]} b \r\n         */\r\n        function sort(a, b){\r\n            return -a[0].entry.dimensions.Compare(b[0].entry.dimensions);\r\n        }\r\n\r\n        var list = [...this.cargoTemplateViews.entries()];\r\n        list.sort(sort);\r\n        this.cargoTemplateViews = new Map(list);\r\n        return;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoListView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoListView.js","import { styles, Element, Draggable } from \"./UIUtils\";\r\nimport Config from \"./Config\";\r\n//import dat from \"./datGUIConsole\";\r\n\r\nconst serializeModes = Config.serializeModes;\r\n\r\nvar current = undefined,\r\n    onFocus = [],\r\n    onFocusLost = [];\r\n\r\nclass Smart {\r\n    /**\r\n     * @param {*} target \r\n     * @param {string} label \r\n     */\r\n    constructor(target, label){\r\n        this.target = target;\r\n        this.label = label;\r\n\r\n        var scope = this;\r\n        \r\n        this.gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({autoPlace: false});\r\n        this.draggable = new Draggable(this.label, 250);\r\n        this.draggable.Add(this.gui.domElement);\r\n        this.draggable.closeBtn.onclick = function(){\r\n            scope.Hide();\r\n        };\r\n\r\n        var ui = Element.Add(this.draggable);\r\n        this.draggable.Hide();\r\n\r\n        this.onFocus = [];\r\n        this.onFocusLost = [];\r\n    }\r\n\r\n    Delete(){\r\n        this.Hide();\r\n        this.draggable.Delete();\r\n        this.gui.destroy();\r\n        this.onFocus.length = this.onFocusLost.length = 0;\r\n    }\r\n\r\n    UpdateGUI(){\r\n        Smart.UpdateGUI(this.gui);\r\n    }\r\n\r\n    Hide(){\r\n        this.visible = false;\r\n        this.draggable.Hide();\r\n        Smart.SetCurrent(undefined);\r\n    }\r\n\r\n    Show(){\r\n        if(current !== undefined){\r\n            if(current === this) return;\r\n\r\n            var oldPos = current.draggable.GetPosition();\r\n            this.draggable.SetPosition(oldPos.x, oldPos.y);\r\n\r\n            current.Hide();\r\n        }\r\n        this.visible = true;\r\n        this.draggable.Show();\r\n        Element.AddStyle(this.draggable.domElement, styles.UIWiggleAnim);\r\n        Smart.SetCurrent(this);\r\n\r\n        this.UpdateGUI();\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @param {string} folderName \r\n     * @param {*} target \r\n     * @param {Function} guiChanged \r\n     * @param {serializeModes} serializeMode\r\n     * @param {Array<string|Config.Controller>} args \r\n     */\r\n    Config(folderName, target, guiChanged, serializeMode, ...args){\r\n        this.config = new Config(target);\r\n        this.config.Track(...args);\r\n        this.config.Edit(guiChanged, folderName, this.gui, {serializeMode: serializeMode, save: false});\r\n        return this.config.gui;\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     */\r\n    MakeShortcut(category){\r\n        Smart.MakeShortcut(category, this);\r\n    }\r\n\r\n    static get serializeModes(){\r\n        return serializeModes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     * @param {Smart} target \r\n     */\r\n    static MakeShortcut(category, target){\r\n        Config.MakeShortcut(category, target.label, function(){\r\n            if(target.visible){\r\n                target.Hide();\r\n            }\r\n            else{\r\n                target.Show();\r\n            }\r\n        });\r\n    }\r\n\r\n    static SetCurrent(current){\r\n        var iFocus;\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocusLost.length; iFocus++){\r\n                onFocusLost[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocusLost.length; iFocus++){\r\n                current.onFocusLost[iFocus]();\r\n            }\r\n        }\r\n\r\n        current = current;\r\n\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocus.length; iFocus++){\r\n                onFocus[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocus.length; iFocus++){\r\n                current.onFocus[iFocus]();\r\n            }\r\n        }\r\n    }\r\n\r\n    static UpdateGUI(gui){\r\n        for (var i in gui.__controllers) {\r\n            gui.__controllers[i].updateDisplay();\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            this.UpdateGUI(folders[i]);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Smart;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Smart.js","import RuntimeTester from \"../../debug/RuntimeTester\";\r\n\r\nconst type = 'Dimensions';\r\nconst _vec3 = Symbol('vec3');\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nRuntimeTester.Notify('Dimensions.FromJSON', 3);\r\n\r\nclass Dimensions {\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(width, length, height){\r\n        if(width === undefined) width = 0;\r\n        if(length === undefined) length = 0;\r\n        if(height === undefined) height = 0;\r\n        \r\n        this.Set(width, length, height);\r\n        this[_vec3] = new THREE.Vector3();\r\n    }\r\n\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    Set(width, length, height){\r\n        /** @type {Number} */\r\n        this.width = width;\r\n        /** @type {Number} */\r\n        this.length = length;\r\n        /** @type {Number} */\r\n        this.height = height;\r\n    }\r\n\r\n    /**\r\n     * Returns a THREE.Vector3 representation of the dimensions\r\n     * Beware of ordering: x=width, y=height and z=length\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get vec3(){\r\n        return this[_vec3].set(this.width, this.height, this.length);\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    Abs(){\r\n        if(this.width < 0) this.width = -this.width;\r\n        if(this.length < 0) this.length = -this.length;\r\n        if(this.height < 0) this.height = -this.height;\r\n        return this;\r\n    }\r\n\r\n    Compare(dimensions){\r\n        var d = this.volume - dimensions.volume;\r\n        if(d < -epsilon) return -1;\r\n        if(d > epsilon) return 1;\r\n        return 0;\r\n    }\r\n\r\n    Copy(dimensions){\r\n        this.Set(dimensions.width, dimensions.length, dimensions.height);\r\n    }\r\n\r\n    Clone(){\r\n        var dimensions = new Dimensions(this.width, this.length, this.height);\r\n        return dimensions;\r\n    }\r\n\r\n    ToString(){\r\n        return this.width.toFixed(2) + 'x' + this.length.toFixed(2) + 'x' + this.height.toFixed(2);\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            width: this.width,\r\n            length: this.length,\r\n            height: this.height\r\n        };\r\n    }\r\n\r\n    static IsVolume(dimensions){\r\n        return Dimensions.Assert(dimensions) \r\n            && dimensions.width > epsilon\r\n            && dimensions.length > epsilon\r\n            && dimensions.height > epsilon\r\n        ;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var dimensions = new Dimensions(data.width, data.length, data.height).Abs();\r\n        return dimensions;\r\n    }\r\n\r\n    static Assert(dimensions){\r\n        return dimensions instanceof Dimensions\r\n            && typeof dimensions.width === numberType\r\n            && typeof dimensions.length === numberType\r\n            && typeof dimensions.height === numberType\r\n        ;\r\n    }\r\n}\r\n\r\nexport default Dimensions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/Dimensions.js","\r\nconst active = true;\r\nvar RuntimeTester = {\r\n    Notify: function(){},\r\n    Test: function(){},\r\n    Log: function(){\r\n        return 'RuntimeTester is not active';\r\n    }\r\n};\r\n\r\nif(active){\r\n\r\n    /** @type {Map<string, Test>} */\r\n    var tests = new Map();\r\n\r\n    class TestLog{\r\n        constructor(){\r\n            this.successes = [];\r\n            this.failures = [];\r\n        }\r\n\r\n        /** @param {Trial} trial */\r\n        Succeeded(trial){\r\n            this.successes.push(trial);\r\n        }\r\n\r\n        /** @param {Trial} trial */\r\n        Failed(trial){\r\n            this.failures.push(trial);\r\n        }\r\n    }\r\n\r\n    class Test{\r\n        constructor(title, maximumRuns){\r\n            this.title = title;\r\n            this.maximumRuns = isNaN(maximumRuns) ? Number.MAX_SAFE_INTEGER : maximumRuns;\r\n\r\n            /** @type {Array<Trial>} */\r\n            this.trials = [];\r\n            this.runsCount = 0;\r\n\r\n            this.log = new TestLog();\r\n        }\r\n\r\n        TryInstance(testFunction, expectedResult){\r\n            if(this.runsCount < this.maximumRuns){\r\n                let trial = new Trial(testFunction, expectedResult).BindTo(this);\r\n                this.trials.push(trial);\r\n                trial.Execute();\r\n\r\n                if(trial.success) this.log.Succeeded(trial);\r\n                else this.log.Failed(trial);\r\n\r\n                this.runsCount++;\r\n            }\r\n        }\r\n\r\n        Log(){\r\n            let log = {\r\n                succeeded: this.log.failures.length === 0,\r\n                failures: null\r\n            };\r\n\r\n            if(this.log.failures.length > 0){\r\n                log.failures = this.log.failures\r\n            }\r\n\r\n            return log;\r\n        }\r\n    }\r\n\r\n    class TrialLog{\r\n        constructor(){\r\n            this.result = undefined;\r\n            this.error = undefined;\r\n        }\r\n    }\r\n\r\n    class Trial{\r\n        /**\r\n         * @param {Function} testFunction \r\n         * @param {*} expectedResult \r\n         */\r\n        constructor(testFunction, expectedResult){\r\n            this.testFunction = testFunction;\r\n            this.expectedResult = expectedResult;\r\n\r\n            this.log = new TrialLog();\r\n        }\r\n\r\n        /** @param {Test} test */\r\n        BindTo(test){\r\n            this.test = test;\r\n            return this;\r\n        }\r\n\r\n        Execute(){\r\n            let result = null;\r\n            try{\r\n                result = this.testFunction();\r\n            }\r\n            catch(error){\r\n                this.log.error = error;\r\n                console.warn('RuntimeTester.error:', error);\r\n            }\r\n\r\n            this.log.result = result;\r\n        }\r\n\r\n        get success(){\r\n            let success = this.log.result === this.expectedResult;\r\n            return success;\r\n        }\r\n    }\r\n\r\n    RuntimeTester = class RuntimeTester{\r\n\r\n        /**\r\n         * @param {string} title - also a unique id\r\n         * @param {Number} [maximumRuns] Number.MAX_SAFE_INTEGER\r\n         */\r\n        static Notify(title, maximumRuns){\r\n            if(active === false) return false;\r\n\r\n            let test = new Test(title, maximumRuns);\r\n            tests.set(title, test);\r\n            return test;\r\n        }\r\n\r\n        /**\r\n         * @param {string} title - also a unique id\r\n         * @param {Function} testFunction \r\n         * @param {*} expectedResult \r\n         */\r\n        static Test(title, testFunction, expectedResult){\r\n            if(active === false) return false;\r\n\r\n            let test = tests.get(title);\r\n            if(!test){\r\n                console.warn('RuntimeTester was not notified of :' + title);\r\n                test = RuntimeTester.Notify(title, maximumRuns);\r\n            }\r\n\r\n            test.TryInstance(testFunction, expectedResult);\r\n            return test;\r\n        }\r\n\r\n        static Log(){\r\n            if(active === false) return 'RuntimeTester is not active';\r\n\r\n            let log = {\r\n                pass: true,\r\n                successful: [],\r\n                failed: [],\r\n                skipped: []\r\n            };\r\n\r\n            let testValues = tests.values();\r\n\r\n            for(let test of testValues){\r\n                let testRuns = test.runsCount;\r\n                if(testRuns === 0){\r\n                    log.skipped.push(test);\r\n                }\r\n                else{\r\n                    let testSuccessful = test.log.failures.length === 0;\r\n                    if(testSuccessful){\r\n                        log.successful.push(test);\r\n                    }\r\n                    else{\r\n                        log.pass = false;\r\n                        log.failed.push(test);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return log;\r\n        }\r\n    };\r\n}\r\n\r\nexport default RuntimeTester;\n\n\n// WEBPACK FOOTER //\n// ./src/api/debug/RuntimeTester.js","\r\nclass Resources{\r\n    constructor(){\r\n        this.texturesPath = '';\r\n    }\r\n}\r\n\r\nexport default Resources;\n\n\n// WEBPACK FOOTER //\n// ./src/api/Resources.js","import CargoEntry from \"../components/common/CargoEntry\";\r\nimport Cargo from \"./Cargo\";\r\n\r\n\r\nclass CargoGroup {\r\n    /**\r\n     * \r\n     * @param {CargoEntry} entry\r\n     */\r\n    constructor(entry){\r\n        this.entry = entry;\r\n\r\n        /** @type {Array<Cargo>} */\r\n        this.cargoes = [];\r\n\r\n        this.template = new Cargo(this);\r\n        this.quantity = this.entry.quantity;\r\n    }\r\n\r\n    get quantity(){\r\n        return this.cargoes.length;\r\n    }\r\n\r\n    set quantity(value){\r\n        var currentQuantity = this.cargoes.length;\r\n        if(value < currentQuantity){\r\n            this.cargoes.length = value;\r\n            this.entry.quantity = value;\r\n        }\r\n        else if(value > currentQuantity){\r\n            for(var i = currentQuantity; i < value; i++){\r\n                this.cargoes[i] = this.template.Clone();\r\n            }\r\n        }\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'CargoGroup(' + this.quantity + ' x ' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoGroup.js","\r\nfunction stopPropagation(e){\r\n    e.stopPropagation();\r\n}\r\n\r\nvar stylesheet;\r\n\r\n/** @param {string|Array<string>} css */\r\nfunction createCSS(css){\r\n    if(stylesheet === undefined){\r\n        stylesheet = document.createElement('style');\r\n        stylesheet.type = 'text/css';\r\n        document.getElementsByTagName('head')[0].appendChild(stylesheet);\r\n    }\r\n    if(css instanceof Array)\r\n        css = css.join('\\n');\r\n    \r\n    if(css.length > 1) stylesheet.innerHTML += css + '\\n';\r\n}\r\n\r\ncreateCSS([\r\n    '@keyframes wiggle {',\r\n    '    20% { transform: rotate(5deg); }',\r\n    '    50% { transform: rotate(0deg); }',\r\n    '    75% { transform: rotate(-5deg); }',\r\n    '   100% { transform: rotate(0deg); }',\r\n    '}'\r\n]);\r\n\r\nconst styles = {\r\n    UIFitContent: 'display: inline-block; padding-bottom: 1em;',\r\n    UIHideMenu: 'display: none !important;',\r\n\r\n    UIDraggable: 'position: absolute; -webkit-user-select: none; -moz-user-select: none; -o-user-select: none; \\\r\n                -ms-user-select: none; -khtml-user-select: none; user-select: none; z-index: 1; padding: 4px;',\r\n    UIDHeader: 'color: #ffffff; display: inline-block; word-wrap: break-word; font-family: Monospace; font-size: 1.2em; height: 100%; width: 100%;',\r\n    UIDCloseButton: 'background-color: rgb(19, 19, 19); border: none; color: white; padding: 8px 2px; text-align: center; \\\r\n                text-decoration: none; margin-left: -38px; margin-right: 10px; font-family: Monospace; font-size: small; cursor: pointer;',\r\n    UIWiggleAnim: 'display: inline-block; animation: wiggle .15s;'\r\n    \r\n}\r\n\r\nclass Element {\r\n\r\n    /**\r\n     * @property {HTMLElement} domElement\r\n     */\r\n\r\n    constructor(){\r\n        /**\r\n         * @type {HTMLElement}\r\n         */\r\n        this._domElement;\r\n    }\r\n\r\n    set domElement(value){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n\r\n        this._domElement = value;\r\n\r\n        this._domElement.addEventListener('mousedown', stopPropagation);\r\n        this._domElement.addEventListener('mouseup', stopPropagation);\r\n    }\r\n\r\n    get domElement(){\r\n        return this._domElement;\r\n    }\r\n\r\n    EnableChildInput(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n    }\r\n\r\n    Hide(){\r\n        Element.AddStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n    \r\n    Show(){\r\n        Element.RemoveStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n\r\n    Remove(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n\r\n            this._domElement.remove();\r\n            delete this._domElement;\r\n        }\r\n    }\r\n\r\n    get opacity(){\r\n        return parseFloat(this.domElement.style.opacity);\r\n    }\r\n\r\n    set opacity(value){\r\n        this.domElement.style.opacity = value;\r\n    }\r\n\r\n    static _Span(text, attributes){\r\n        return {\r\n            type: 'span',\r\n            label: text, \r\n            attributes: attributes\r\n        };\r\n    }\r\n\r\n    static Span(text, attributes){\r\n        var _span = this._Span(text, attributes);\r\n        return crel(_span.type, _span.attributes, _span.label);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static AddStyle(element, style){\r\n        let eStyle = element.style.cssText;\r\n        let index = eStyle.indexOf(style);\r\n        if(index === -1){\r\n            element.style.cssText += style;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static RemoveStyle(element, style){\r\n        element.style.cssText = element.style.cssText.replace(style, '');\r\n    }\r\n\r\n    static get CreateCSS(){\r\n        return createCSS;\r\n    }\r\n\r\n    static Add(element){\r\n        document.body.appendChild(element.domElement);\r\n    }\r\n}\r\n\r\nconst widths = {\r\n    small: 162,\r\n    medium: 242,\r\n    large: 362\r\n};\r\n\r\nclass Draggable extends Element {\r\n    constructor(title, width){\r\n\r\n        super();\r\n\r\n        var dom;\r\n\r\n        var move = function(xpos, ypos){\r\n            dom.style.left = xpos + 'px';\r\n            dom.style.top = ypos + 'px';\r\n        };\r\n\r\n        var diffX = 0,\r\n            diffY = 0;\r\n        var eWi = 0,\r\n            eHe = 0,\r\n            cWi = 0,\r\n            cHe = 0;\r\n\r\n        var onMouseMove = function(evt){\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n                aX = posX - diffX,\r\n                aY = posY - diffY;\r\n                if (aX < 0) aX = 0;\r\n                if (aY < 0) aY = 0;\r\n                if (aX + eWi > cWi) aX = cWi - eWi;\r\n                if (aY + eHe > cHe) aY = cHe -eHe;\r\n            move(aX, aY);\r\n        };\r\n        \r\n        var startMoving = function(evt){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n            divTop = dom.style.top,\r\n            divLeft = dom.style.left;\r\n\r\n            eWi = parseInt(dom.style.width);\r\n            eHe = parseInt(dom.style.height);\r\n            cWi = parseInt(container.style.width);\r\n            cHe = parseInt(container.style.height);\r\n\r\n            container.style.cursor='move';\r\n            divTop = divTop.replace('px','');\r\n            divLeft = divLeft.replace('px','');\r\n            diffX = posX - divLeft;\r\n            diffY = posY - divTop;\r\n            document.addEventListener('mousemove', onMouseMove);\r\n        };\r\n        \r\n        var stopMoving = function(){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            container.style.cursor = 'default';\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n        };\r\n\r\n        if(width === undefined) width = widths.medium;\r\n        var left = 60 + Math.floor(Math.random() * 160),\r\n            top = 60 + Math.floor(Math.random() * 60);\r\n        var domStyle = 'left:' + left + 'px; top:' + top + 'px; width:' + width + 'px; background-color: rgba(0, 0, 0, .8);' + styles.UIFitContent + styles.UIDraggable;\r\n        dom = crel('div', {style: domStyle});\r\n        var head = crel('div', {style: 'display: flex;'});\r\n        dom.appendChild(head);\r\n        var header = crel('div', {onmousedown: startMoving, onmouseup: stopMoving, style: styles.UIDHeader}, title);\r\n        \r\n        var scope = this;\r\n        var close = function(){\r\n            scope.Close();\r\n        };\r\n        var closeBtn = crel('button', {onclick: close, style: styles.UIDCloseButton}, 'Close');\r\n        head.appendChild(closeBtn);\r\n        head.appendChild(header);\r\n\r\n        dom.closeBtn = closeBtn;\r\n\r\n        this.domElement = dom;\r\n        this.EnableChildInput();\r\n        this.closeBtn = closeBtn;\r\n    }\r\n\r\n    Close(){\r\n        this.domElement.remove();\r\n    }\r\n\r\n    Add(elt){\r\n        this.domElement.appendChild(elt);\r\n    }\r\n\r\n    GetPosition(){\r\n        var style = window.getComputedStyle(this.domElement),\r\n            left = parseFloat(style.left),\r\n            top = parseFloat(style.top);\r\n        \r\n        return {x: left, y: top};\r\n    }\r\n\r\n    SetPosition(x, y){\r\n        this.domElement.style.left = x + 'px';\r\n        this.domElement.style.top = y + 'px';\r\n    }\r\n\r\n    static get widths(){\r\n        return widths;\r\n    }\r\n}\r\n\r\nexport {\r\n    styles,\r\n    Element,\r\n    Draggable\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/UIUtils.js","\r\nrequire('../../../../min-dependencies/lib/three/controls/TransformControls');\r\n\r\nconst spaces = {\r\n    world: 'world',\r\n    local: 'local'\r\n};\r\n\r\nconst modes = {\r\n    translate: 'translate',\r\n    rotate: 'rotate',\r\n    scale: 'scale'\r\n};\r\n\r\n/**\r\n * @type {Object<Control3D>}\r\n */\r\nvar defaultControls = {};\r\n\r\nclass Control3D {\r\n\r\n    /**\r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     */\r\n    constructor(camera, domElement){\r\n        this.camera = camera;\r\n        this.control = new THREE.TransformControls(this.camera, domElement);\r\n        this.control.addEventListener('change', this.Update.bind(this));\r\n\r\n        this.control.traverse(function(child){\r\n            child.renderOrder = 2;\r\n        });\r\n\r\n        this.visible = false;\r\n    }\r\n\r\n    get visible(){\r\n        return this.control.visible;\r\n    }\r\n\r\n    set visible(value){\r\n        this.control.visible = value;\r\n        if(value === false){\r\n            this.Detach();\r\n        }\r\n    }\r\n\r\n    Attach(target){\r\n        this.control.attach(target);\r\n    }\r\n\r\n    Detach(){\r\n        this.control.detach();\r\n    }\r\n\r\n    Toggle(target){\r\n        if(this.control.object){\r\n            this.control.detach();\r\n        }\r\n        else{\r\n            this.control.attach(target);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.control.update();\r\n    }\r\n\r\n    get space(){\r\n        return this.control.space;\r\n    }\r\n\r\n    set space(value){\r\n        this.control.space = value;\r\n    }\r\n\r\n    // translate || rotate || scale\r\n    set mode(value){\r\n        this.control.setMode(value);\r\n    }\r\n\r\n    static get spaces(){\r\n        return spaces;\r\n    }\r\n\r\n    static get modes(){\r\n        return modes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} id \r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     * @returns {Control3D}\r\n     */\r\n    static Configure(id, camera, domElement){\r\n        var control = new Control3D(camera, domElement);\r\n        defaultControls[id] = control;\r\n        return control;\r\n    }\r\n\r\n    /**\r\n     * @returns {Control3D}\r\n     */\r\n    static Request(id){\r\n        return defaultControls[id];\r\n    }\r\n}\r\n\r\nexport default Control3D;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Control3D.js","import Signaler from \"../utils/cik/Signaler\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport CargoGroup from \"./CargoGroup\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\nconst stringType = 'string';\r\n\r\nconst signals = {\r\n    groupAdded: 'groupAdded',\r\n    groupRemoved: 'groupRemoved',\r\n    groupModified: 'groupModified'\r\n};\r\n\r\nclass CargoList extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        /** @type {Map<string, CargoGroup>} */\r\n        this.groups = new Map();\r\n    }\r\n\r\n    /** Adds a new CargoGroup\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Add(entry){\r\n        var group = new CargoGroup(entry);\r\n\r\n        this.groups.set(entry.uid, group);\r\n        this.Dispatch(signals.groupAdded, group);\r\n    }\r\n\r\n    /** Adds a new CargoGroup\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Modify(entry){\r\n        var group = this.groups.get(entry.uid);\r\n        this.Dispatch(signals.groupModified, group);\r\n    }\r\n\r\n    /** Removes the CargoGroup using its uid\r\n     * @param {string} uid \r\n     */\r\n    Remove(uid){\r\n        var group = this.groups.get(uid);\r\n        if(group){\r\n            this.groups.delete(uid);\r\n            this.Dispatch(signals.groupRemoved, group);\r\n        }\r\n    }\r\n\r\n    /** @param {string} entryUID @returns {BoxEntry} the entry if it exists */\r\n    GetEntry(entryUID){\r\n        if(this.groups.has(entryUID)) return this.groups.get(entryUID).entry;\r\n    }\r\n\r\n    get ready(){\r\n        return this.groups.size > 0;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoList;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoList.js","import Container from \"./container/Container\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\n\r\nconst signals = {\r\n    containerAdded: 'containerAdded'\r\n};\r\n\r\nconst _currentIndex = Symbol('currentIndex');\r\n\r\nclass PackingSpace extends Signaler {\r\n    constructor(){\r\n        super();\r\n        \r\n        this[_currentIndex] = -1;\r\n\r\n        /**\r\n         * @type {Container}\r\n         */\r\n        this.containers = [];\r\n    }\r\n\r\n    /** @param {Container} container */\r\n    AddContainer(container){\r\n        this.containers.push(container);\r\n        this[_currentIndex]++;\r\n\r\n        this.Dispatch(signals.containerAdded, container);\r\n    }\r\n\r\n    /** @returns {Container} */\r\n    get current(){\r\n        var currentIndex = this[_currentIndex];\r\n        if(currentIndex !== -1){\r\n            return this.containers[currentIndex];\r\n        }\r\n    }\r\n\r\n    get ready(){\r\n        return this[_currentIndex] !== -1;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackingSpace;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/PackingSpace.js","\r\n\r\nconst maxWeightValue = Number.MAX_SAFE_INTEGER;\r\n\r\nclass OccupiedRegions {\r\n    constructor(x, y, z, width, height, length, item, level, preferredX){\r\n        this.Set(x, y, z, width, height, length, level, preferredX);\r\n        this.SetWeights(0, maxWeightValue, maxWeightValue);\r\n        this.ref = item;        \r\n        return this;\r\n    }\r\n\r\n    OnTopRegion(regionA, regionB){\r\n        var xB = regionB.x, yB = regionB.y, zB = regionB.z;\r\n        var wB = regionB.width, hB = regionB.height, lB = regionB.length;\r\n        var xT = regionA.x, yT = regionA.y, zT = regionA.z;\r\n        var wT = regionA.width, hT = regionA.height, lT = regionA.length;\r\n        if (xT > xB - wT  && xT < xB + wB + wT  && zT > zB - lT  && zT < zB + lB + lT && yT === yB + hB) return true;\r\n        else return false;       \r\n    }\r\n\r\n    Set(x, y, z, width, height, length, level, preferredX){\r\n        this.x = x; this.y = y; this.z = z;\r\n        this.width = width; this.height = height; this.length = length;\r\n        this.level = level;\r\n        this.preferredX = preferredX;        \r\n        return this;\r\n    }\r\n    \r\n    /**\r\n     * @param {Number} weight \r\n     * @param {Number} weightCapacity \r\n     * @param {Number} stackingCapacity \r\n     */\r\n    SetWeights(weight, weightCapacity, stackingCapacity){\r\n        this.weight = weight;\r\n        this.weightCapacity = weightCapacity;\r\n        this.stackingCapacity = stackingCapacity;\r\n    }    \r\n}\r\nexport default OccupiedRegions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/OccupiedRegion.js","import { epsilon, smallValue, smallValueSqrt, reduceRectangles } from \"./Math2D\";\r\nimport Region from \"./Region\";\r\nimport OccupiedRegion from \"./OccupiedRegion\"\r\nimport { debugClear, debugLog, debugRegion, sleep, format } from '../CUBDebug';\r\n\r\n/** RegionFindCallback\r\n * @callback RegionFindCallback\r\n * @param {Region} region\r\n * @returns {Object | Boolean}\r\n */\r\n\r\n/** @typedef Vec2 @property {Number} x @property {Number} y */\r\n\r\n/** @typedef Rectangle @property {Vec2} p1 @property {Vec2} p2 @property {Vec2} p3 @property {Vec2} p4 \r\n * @property {Number} weight @property {Number} weightCapacity @property {Number} stackingCapacity \r\n */\r\n\r\nconst minRegionAxis = smallValue;\r\n\r\nfunction sortByN(a, b){\r\n    if(isNaN(a.n) || isNaN(b.n)) return 0;\r\n\r\n    if(a.n < b.n) return -1;\r\n    if(a.n > b.n) return 1;\r\n    return 0;\r\n}\r\n//function occupyRegionConstructor(region, item){ return { region: region, item: item }; }\r\nvar tempRegion = new Region();\r\nvar tempOccupiedRegion = new OccupiedRegion();\r\nclass RegionsTree{\r\n    /** @param {Region} root */\r\n    constructor(root){\r\n        this.regions = [root];        \r\n    }\r\n\r\n    /** @param {Number} index */\r\n    Get(index){\r\n        return this.regions[index];\r\n    }\r\n\r\n    /** @param {RegionFindCallback} callback @param {*} thisArg */\r\n    Find(callback, thisArg){\r\n        let numRegions = this.regions.length;\r\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){            \r\n            let region = this.regions[iRegion];            \r\n                let search = callback.call(thisArg, region);\r\n                if(search) return search;                \r\n            }\r\n        return false;\r\n    }\r\n\r\n    \r\n    \r\n    /** @param {Region} region * @param {Region} fit * @returns {Boolean} false if region has been deleted */\r\n    Occupy(region, fit){\r\n\r\n        \r\n        var newRegions = region.Subtract(fit, minRegionAxis);\r\n        \r\n        if(newRegions) this.regions.push(...newRegions);\r\n\r\n        // Check that region is still valid, otherwise remove it\r\n        if(region.length < minRegionAxis){\r\n            let regionIndex = this.regions.indexOf(region);\r\n            this.regions.splice(regionIndex, 1);\r\n            return false;\r\n        }\r\n\r\n        var debugUIDs = [];\r\n        if(!newRegions) newRegions = [];\r\n        newRegions.push(region);\r\n        //console.group('Occupy');\r\n        newRegions.forEach(region => {\r\n            //console.log(region.ToString());\r\n            debugUIDs.push(debugRegion(region, 0xffff0000, true, -1, true));\r\n        });\r\n        //console.groupEnd();\r\n\r\n        debugClear(debugUIDs);\r\n\r\n        return true;\r\n    }\r\n\r\n    \r\n\r\n    /** @param {Number} width */\r\n    ProcessRegionsPreferredX(width){\r\n        let regions = this.regions,\r\n            numRegions = regions.length;\r\n        //let width = this.container.width;\r\n\r\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\r\n            let region = regions[iRegion];\r\n\r\n            if(Math.abs(region.x) < smallValue) region.preferredX = 0;\r\n            else if(Math.abs(region.x + region.width - width) < smallValue) region.preferredX = 1;\r\n        }\r\n    }\r\n\r\n    /** @param {Number} width @param {Number} height */\r\n    ProcessRegionsMergeExpand(width, height){\r\n        let regions = this.regions,\r\n            numRegions = regions.length;\r\n\r\n        let toInt = 1 / smallValue;\r\n        function coordID(value){\r\n            return Math.floor(value * toInt);\r\n        }\r\n\r\n        /** @typedef Level @property {Number} y @property {Array<Rectangle>} rectangles */\r\n        /** @type {Array<Level>} */\r\n        let levels = {};\r\n\r\n        let neighbours = [], rectangles = [];\r\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\r\n            let regionA = regions[iRegion];\r\n\r\n            if(regionA.weightCapacity > smallValue){\r\n                neighbours.length = 0;\r\n                neighbours.push(iRegion);\r\n                \r\n                for(let jRegion = iRegion + 1; jRegion < numRegions; jRegion++){\r\n                    let regionB = regions[jRegion];\r\n\r\n                    if(regionB.weightCapacity > smallValue && Math.abs(regionA.y - regionB.y) < smallValue){\r\n                        let intersects = regionA.Intersects(smallValue, regionB);\r\n                        if(intersects){\r\n                            neighbours.push(jRegion);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                let numNeighbours = neighbours.length;\r\n                if(numNeighbours > 1){\r\n                    rectangles.length = 0;\r\n\r\n                    for(let iNeighbour = 0; iNeighbour < numNeighbours; iNeighbour++){\r\n                        let neighbourA = regions[neighbours[iNeighbour]];\r\n\r\n                        for(let jNeighbour = iNeighbour + 1; jNeighbour < numNeighbours; jNeighbour++){\r\n                            let neighbourB = regions[neighbours[jNeighbour]];\r\n\r\n                            let connectedNeighbours = neighbourA.ConnectFloorRects(neighbourB);\r\n                            rectangles.push(...connectedNeighbours);\r\n                        }\r\n                    }\r\n\r\n                    if(rectangles.length > 0){\r\n                        let yCat = coordID(regionA.y);\r\n                        if(levels[yCat] === undefined) levels[yCat] = {y: regionA.y, rectangles: []};\r\n                        levels[yCat].rectangles.push(...rectangles);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        var levelsYCats = Object.keys(levels);\r\n        for(let iYCat = 0, numYCats = levelsYCats.length; iYCat < numYCats; iYCat++){\r\n            /** @type {Level} */\r\n            let level = levels[levelsYCats[iYCat]];\r\n            let rectangles = level.rectangles;\r\n            let regionY = level.y;\r\n            let regionHeight = height - regionY;\r\n            \r\n            reduceRectangles(rectangles);\r\n            for(let iRect = 0, numRects = rectangles.length; iRect < numRects; iRect++){\r\n                let rect = rectangles[iRect];\r\n                let rx = rect.p1.x, ry = rect.p1.y;\r\n                let rw = rect.p3.x - rx, rh = rect.p3.y - ry;\r\n\r\n                // Calculate preferred packing side based on center point relative to container\r\n                let preferredX = (rx.x + rw / 2) < (width / 2) ? 0 : 1;\r\n                let newRegion = new Region(rx, regionY, ry, rw, regionHeight, rh, 0);\r\n                newRegion.SetWeights(rect.weight, rect.weightCapacity, rect.stackingCapacity);\r\n                this.regions.push(newRegion);\r\n            }\r\n        }\r\n    }    \r\n\r\n    ProcessRegionsForZeroRegions(){\r\n        let regions = this.regions;\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let region = regions[iRegion];\r\n            if(region.width < minRegionAxis || region.height < minRegionAxis || region.length < minRegionAxis){\r\n                regions.splice(iRegion, 1);\r\n                iRegion--;\r\n            }\r\n        }\r\n    }\r\n    \r\n    AddRegion(newRegions)\r\n    {\r\n        \r\n        if(newRegions) {\r\n            let OnTopOfRegions = [];\r\n            for(let iRegion = 0; iRegion < this.regions.length; iRegion++){\r\n                if(tempOccupiedRegion.OnTopRegion(newRegions,this.regions[iRegion]))\r\n                {\r\n                    OnTopOfRegions.push(this.regions[iRegion].level);\r\n                }\r\n            }\r\n            OnTopOfRegions.sort(function(a, b){return a-b});\r\n            let level = OnTopOfRegions.pop();\r\n            let dummy = new OccupiedRegion(newRegions.x, newRegions.y,newRegions.z,newRegions.width ,newRegions.height,newRegions.length, newRegions.ref, level+1, 0)\r\n            this.regions.push(dummy);\r\n            return true;\r\n        }\r\n        return false;\r\n    }   \r\n \r\n\r\n    ProcessRegionsEnclosed(){\r\n        var regions = this.regions;\r\n\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let regionA = regions[iRegion];\r\n            let volumeA = regionA.volume;\r\n\r\n            for(let jRegion = iRegion + 1; jRegion < regions.length; jRegion++){\r\n                let regionB = regions[jRegion];\r\n                let volumeB = regionB.volume;\r\n\r\n                if(volumeA < volumeB){\r\n                    // If a A is completely contained within B, remove the A\r\n                    if(regionB.ContainsRegion(smallValue, regionA)){\r\n                        regions.splice(iRegion, 1);\r\n                        iRegion--;\r\n                        break;\r\n                    }\r\n                }\r\n                else{\r\n                    // If a B is completely contained within A, remove the B\r\n                    if(regionA.ContainsRegion(smallValue, regionB)){\r\n                        regions.splice(jRegion, 1);\r\n                        jRegion--;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {Function} sortFunction */\r\n    Sort(sortFunction){\r\n        this.regions.sort(sortFunction);\r\n    }\r\n}\r\n\r\nexport default RegionsTree;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/RegionsTree.js","import Debug from \"../../debug/Debug\";\r\nimport Region from \"./core/Region\";\r\n\r\nexport const debugging = false;\r\n\r\nif(debugging){\r\n    Debug.app.sceneSetup.input.ListenKeys(['right', 'space']);\r\n}\r\n\r\nexport function sleep(ms, force) {\r\n    return new Promise(resolve => {\r\n        if(debugging || force) setTimeout(resolve, ms);\r\n        else resolve();\r\n    });\r\n}\r\n\r\nexport function debugLog(...args){\r\n    console.log(...args);\r\n}\r\n\r\nexport function keypress(ms, force) {\r\n    return new Promise(resolve => {\r\n        if(debugging || force){\r\n            let tid = undefined;\r\n            function execute(){\r\n                if(tid !== undefined) clearTimeout(tid);\r\n                removeEventListener('keydown', execute);\r\n                resolve();\r\n            }\r\n            if(ms && ms > 0) tid = setTimeout(execute, ms);\r\n            addEventListener('keydown', execute);\r\n        }\r\n        else{\r\n            resolve();\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * @param {Region} region * @param {Number} color \r\n */\r\nexport function debugRegion(region, color, solid, duration, checkered){\r\n    var x = region.x, y = region.y, z = region.z, w = region.width, h = region.height, l = region.length;\r\n    var debugUID = Debug.Viz.DrawVolume(x + w/2, y + h/2, z + l/2, w, h, l, color || 0xaaffff, duration || -1, !Boolean(solid), checkered);\r\n    return debugUID;\r\n}\r\n\r\n/** @param {Array<string>} */\r\nexport function debugClear(uids){\r\n    if(uids){\r\n        uids.forEach(uid => {\r\n            Debug.Viz.RemoveObjectByUID(uid);\r\n        });\r\n    }\r\n    else{\r\n        Debug.Viz.ClearAll();\r\n    }\r\n}\r\n\r\nfunction numberFormatDefault(n){ return n; }\r\n\r\nexport function numberFormat(n, d){\r\n    if(n > Number.MAX_SAFE_INTEGER - 2) return 'MAX';\r\n    let nStr = Math.round(n) !== n ? n.toFixed(d) : n;\r\n    return nStr;\r\n}\r\n\r\n/** @typedef FormatParams @property {Function} nf number formatting function */\r\n/** @param {string} str @param {FormatParams} params @param {Array<*>} args */\r\nexport function format(str, params, ...args){\r\n    if(params.nf === undefined) params.nf = numberFormatDefault;\r\n    let index = 0;\r\n    while( (index = str.indexOf('@', index)) !== -1 ){\r\n        if(str[index - 1] !== '\\\\'){\r\n            let a = args.shift();\r\n            if(typeof a === 'number') a = params.nf(a);\r\n            str = str.replace('@', a);\r\n        }\r\n        index += 1;\r\n    }\r\n    return str;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/CUBDebug.js","import { epsilon, smallValue, smallValueSqrt } from \"../core/Math2D\";\r\nimport { Item } from \"../core/Components\";\r\nimport { PackedContainer } from \"../core/PackedComponents\";\r\nimport Region from \"../core/Region\";\r\nimport RegionsTree from \"../core/RegionsTree\";\r\nimport { debugLog, sleep } from '../CUBDebug';\r\n\r\nclass HeuristicParams {\r\n    constructor(){\r\n    }\r\n}\r\n\r\nclass HeuristicResult{\r\n    /** @param {Region} containingRegion @param {Region} packedRegion @param {Number} orientation */\r\n    constructor(containingRegion, packedRegion, orientation){\r\n        this.containingRegion = containingRegion;\r\n        this.packedRegion = packedRegion;\r\n        this.orientation = orientation;\r\n    }\r\n}\r\n\r\nconst _items = Symbol('items');\r\nconst _packedContainer = Symbol('packedContainer');\r\nconst _regionsTree = Symbol('regionsTree');\r\nconst _occupiedRegionsTree = Symbol('occupiedRegionsTree');\r\nconst _workingItem = Symbol('workingItem');\r\n\r\nclass HeuristicWorkingSet{\r\n    /** @param {HeuristicParams} params */\r\n    constructor(params){\r\n        this.params = params;\r\n    }\r\n\r\n    /** @param {Array<Item>} items */\r\n    SetItems(items){ this[_items] = items.slice(); }\r\n    /** @param {Array<Item>} value */\r\n    set items(value){ throw Error('Use HeuristicWorkingSet.SetItems(items) instead.'); }\r\n    get items(){ return this[_items]; }\r\n\r\n    /** @param {PackedContainer} packedContainer */\r\n    SetPackedContainer(packedContainer){ this[_packedContainer] = packedContainer; }\r\n    /** @param {PackedContainer} value */\r\n    set packedContainer(value){ throw Error('Use HeuristicWorkingSet.SetPackedContainer(packedContainer) instead.'); }\r\n    get packedContainer(){ return this[_packedContainer]; }\r\n\r\n    /** @param {RegionsTree} regionsTree */\r\n    SetRegionsTree(regionsTree){ this[_regionsTree] = regionsTree; }\r\n    /** @param {RegionsTree} value */\r\n    set regionsTree(value){ throw Error('Use HeuristicWorkingSet.SetRegionsTree(regionsTree) instead.'); }\r\n    get regionsTree(){ return this[_regionsTree]; }\r\n\r\n    SetOccupiedRegionsTree(occupiedRegionsTree){ this[_occupiedRegionsTree] = occupiedRegionsTree; }\r\n    /** @param {RegionsTree} value */\r\n    set occupiedRegionsTree(value){ throw Error('Use HeuristicWorkingSet.SetOccupiedRegionsTree(occupiedRegionsTree) instead.'); }\r\n    get occupiedRegionsTree(){ return this[_occupiedRegionsTree]; }\r\n\r\n    /** @param {Item} item @returns {Boolean} */\r\n    Validate(item){\r\n        return item.volume > epsilon && this.packedContainer.WeightPass(item.weight);\r\n    }\r\n\r\n    /** Validates the item and assign it\r\n     *  @param {Item} item @returns {Boolean} */\r\n    SetWorkingItem(item){\r\n        if(this.Validate(item)){\r\n            this[_workingItem] = item;\r\n            return true;\r\n        }\r\n        \r\n        this[_workingItem] = undefined;\r\n        return false;\r\n    }\r\n\r\n    /** @param {Item} value */\r\n    set workingItem(value){ throw Error('Use HeuristicWorkingSet.SetWorkingItem(item) instead.'); }\r\n    get workingItem(){ return this[_workingItem]; }\r\n\r\n    /** @param {Region} region @returns {Heuristic.Result} */\r\n    FitFunction(region){\r\n        // Override this with heuristic algorithm\r\n    }\r\n\r\n    /** @returns {Heuristic.Result} */\r\n    Fit(){\r\n        let result = this.regionsTree.Find(this.FitFunction, this);\r\n        return result;\r\n    }\r\n\r\n    /** @returns {false | Item} */\r\n    async NextItem(){\r\n        if(this.items === undefined || this.items.length === 0) return false;\r\n\r\n        let index = this.items.length - 1;\r\n        let item = this.items[index];\r\n        if(item.quantity === 0){\r\n            this.items.splice(index, 1);\r\n            return this.NextItem();\r\n        }\r\n\r\n        return item;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    RemoveItem(item){\r\n        let index = this.items.indexOf(item);\r\n        if(index !== -1) this.items.splice(index, 1);\r\n    }\r\n}\r\n\r\nclass Heuristic{\r\n    /** @param {HeuristicParams} params @param {typeof HeuristicWorkingSet} workingSetType */\r\n    constructor(params, workingSetType){\r\n        this.params = params;\r\n\r\n        this.workingSet = new workingSetType(this.params);\r\n    }\r\n\r\n    NextItem(){\r\n        return this.workingSet.NextItem();\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    Unpack(item){\r\n        this.workingSet.RemoveItem(item);\r\n    }\r\n\r\n    /** @param {Item} item @returns {HeuristicResult} */\r\n    Fit(item){ return false; }\r\n}\r\n\r\nHeuristic.Params = HeuristicParams;\r\nHeuristic.WorkingSet = HeuristicWorkingSet;\r\nHeuristic.Result = HeuristicResult;\r\n\r\nexport default Heuristic;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/heuristics/Heuristic.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 37\n// module chunks = 0","/*\r\nconst _callback = Symbol('callback');\r\n/** @returns {function} /\r\nget callback(){ return this[_callback]; }\r\nset callback(value){\r\n    this[_callback] = value;\r\n}\r\n*/\r\n\r\nclass UpdateComponent{\r\n    /**\r\n     * \r\n     * @param {Boolean} active \r\n     * @param {Number} interval \r\n     * @param {function(Number)} callback\r\n     */\r\n    constructor(active, interval, callback){\r\n        this.active = active === undefined ? false : active;\r\n        this.interval = interval === undefined ? 1 / 30 : interval;\r\n        this.callback = callback;\r\n        this.lastUpdateTime = 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} now \r\n     */\r\n    Update(now){\r\n        this.lastUpdateTime = now;\r\n        this.callback(now);\r\n    }\r\n}\r\n\r\nexport default UpdateComponent;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/UpdateComponent.js","\r\n/**\r\n * RaycastCallback\r\n * \r\n * @callback RaycastCallback\r\n * @param {Object} obj\r\n * @param {THREE.Intersection} intersection\r\n */\r\n\r\n /**\r\n  * Mapping function\r\n  * \r\n  * @callback RaycastMapping\r\n  * @param {Object} obj\r\n  */\r\n\r\nclass RaycastGroup {\r\n\r\n    /**\r\n     * \r\n     * @param {Array<THREE.Object3D>} items \r\n     * @param {RaycastCallback} callback \r\n     * @param {RaycastMapping} collectionQuery \r\n     * @param {Boolean} updateProperty \r\n     * @param {Boolean} recursive \r\n     */\r\n    constructor (items, callback, collectionQuery, updateProperty, recursive){\r\n        /**\r\n         * @type {Boolean}\r\n         */\r\n        this.enabled = true;\r\n\r\n        this.items = items;\r\n        this.callback = callback;\r\n        this.updateProperty = updateProperty !== undefined ? updateProperty : false;\r\n        this.recursive = recursive !== undefined ? recursive : false;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems = [];\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    GetRaycastItems(collectionQuery){\r\n        for(var iItem = 0; iItem < this.items.length; iItem++){\r\n            var rItem = collectionQuery(this.items[iItem]);\r\n            if(rItem !== undefined){\r\n                this.raycastItems.push(rItem);\r\n            }\r\n            else{\r\n                this.items.splice(iItem, 1);\r\n                Cik.Log('raycastItem is undefined, entry removed from .items array');\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateItems(items, collectionQuery){\r\n        this.items = items;\r\n        if(collectionQuery === undefined) collectionQuery = this.collectionQuery;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems.length = 0;\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    UpdateRaycastItems(){\r\n        this.raycastItems.length = 0;\r\n        for(var i = 0; i < this.items.length; i++){\r\n            let raycastItem = this.collectionQuery(this.items[i]);\r\n            if(raycastItem) this.raycastItems.push(raycastItem);\r\n        }\r\n    }\r\n\r\n    Raycast(raycaster){\r\n        if(this.enabled === false) return;\r\n\r\n        \r\n        if(this.updateProperty){\r\n            this.UpdateRaycastItems();\r\n        }\r\n        \r\n        var raycastItems = this.raycastItems;\r\n        \r\n        // if ( object.visible === false || object.parent === null) return; in THREE.Raycaster.intersectObject()\r\n        var intersects = raycaster.intersectObjects(raycastItems, this.recursive);\r\n        if (intersects.length > 0) {\r\n            if(this.collectionQuery){\r\n                var raycastItemIndex = this.BubbleUpForIndex(intersects[0].object, raycastItems);\r\n                if(raycastItemIndex !== -1) this.callback(this.items[raycastItemIndex], intersects[0]);\r\n            }\r\n            else{\r\n                this.callback(intersects[0].object, intersects[0]);\r\n            }\r\n        }\r\n    }\r\n\r\n    BubbleUpForIndex(child, collection){\r\n        var nestLimit = 100;\r\n        var numCollection = collection.length;\r\n        while(child !== null && nestLimit-- > 0){\r\n            for(var i = 0; i < numCollection; i++) if(collection[i] === child) return i;\r\n            child = child.parent;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport default RaycastGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/RaycastGroup.js","\r\nclass Controller {\r\n    constructor(params){\r\n\r\n        this.params = params;\r\n\r\n        // Containers\r\n        this.itemsContainer = new THREE.Object3D();\r\n        this.itemsContainer.name = \"itemsContainer\";\r\n        this.miscContainer = new THREE.Object3D();\r\n        this.miscContainer.name = \"miscContainer\";\r\n        this.ambientContainer = new THREE.Object3D();\r\n        this.ambientContainer.name = \"ambientContainer\";\r\n        this.defaults = new THREE.Object3D();\r\n        this.defaults.name = \"defaults\";\r\n\r\n        // Scene\r\n        this.scene = new THREE.Scene();\r\n\r\n        // Setup rest\r\n        this.scene.add(this.itemsContainer);\r\n        this.scene.add(this.miscContainer);\r\n        this.scene.add(this.ambientContainer);\r\n        this.scene.add(this.defaults);\r\n    }\r\n\r\n    Add(object, container){\r\n        if(container === undefined) container = this.miscContainer;\r\n        container.add(object);\r\n    }\r\n\r\n    AddDefault(object){\r\n        this.defaults.add(object);\r\n    }\r\n\r\n    Remove(object){\r\n        if(typeof object === 'string'){\r\n            var objName = object;\r\n            object = this.itemsContainer.getObjectByName(objName);\r\n            if(object === undefined) object = this.miscContainer.getObjectByName(objName);\r\n            if(object === undefined) return;\r\n        }\r\n        this.itemsContainer.remove(object);\r\n        this.miscContainer.remove(object);\r\n    }\r\n}\r\n\r\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Controller.js","import CargoEntry from '../components/common/CargoEntry';\r\nimport BoxEntry from '../components/box/BoxEntry';\r\nimport CargoBoxView from './CargoBoxView';\r\nimport CargoView from './CargoView';\r\nimport Utils from '../utils/cik/Utils';\r\nimport { Transition, Slide } from '../utils/cik/transitions/Transition';\r\nimport Asset from '../components/assets/Asset';\r\n\r\nconst epsilon = Math.pow(2, -52);\r\n\r\nvar tempBox3 = new THREE.Box3();\r\nvar tempVec3 = new THREE.Vector3();\r\n\r\n\r\n/**\r\n * @typedef {Object} EntryInputViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {SceneSetup} sceneSetup\r\n * @property {scaleFigure} scaleFigure\r\n */\r\n\r\nconst _scaleFigure = Symbol('scaleFigure');\r\nconst scaleFigure = {\r\n    man: 'man',\r\n    woman: 'woman',\r\n    none: 'none'\r\n};\r\n\r\n/** @type {EntryInputViewParams} */\r\nconst defaultParams = {\r\n    scaleFigure: scaleFigure.man\r\n};\r\n\r\nclass EntryInputView{\r\n    /** @param {EntryInputViewParams} params */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n        const scope = this;\r\n\r\n        this.view = new THREE.Object3D();\r\n        this.preview = new THREE.Object3D();\r\n        this.view.add(this.preview);\r\n\r\n        /** @type {Map<string, CargoView>} */\r\n        this.previewTypes = new Map();\r\n\r\n        let units = this.params.ux.params.units;\r\n        this.offsetX = 0;\r\n\r\n        // scale ref\r\n        const height = 71 * units;\r\n\r\n        let material = new THREE.MeshBasicMaterial({color: 0x000000, transparent : true, side: THREE.DoubleSide});\r\n        Asset.SetTextureMap('scaleref-alphaMap.jpg', material, 'alphaMap').then( (alphaMap) => {\r\n            alphaMap.repeat.setX(.5);\r\n        });\r\n\r\n        let refMesh = new THREE.Mesh(\r\n            new THREE.PlaneGeometry(height / 2, height, 1, 1),\r\n            material\r\n        );\r\n\r\n        this.offsetX = 60 * units;\r\n        refMesh.position.x = this.offsetX;\r\n\r\n        this.view.add(refMesh);\r\n        this.refMesh = refMesh;\r\n        this.scaleFigure = this.params.scaleFigure;\r\n\r\n        tempBox3.setFromObject(this.refMesh);\r\n        tempBox3.getSize(tempVec3);\r\n        this.offsetX -= tempVec3.x / 2;\r\n\r\n        let bkgMesh = new THREE.Mesh(\r\n            new THREE.PlaneGeometry(height * 6, height * 1.8, 1, 1),\r\n            new THREE.MeshBasicMaterial({color: 0xffffff, depthWrite: false, depthFunc: THREE.NeverDepth, side: THREE.DoubleSide})\r\n        );\r\n\r\n        bkgMesh.position.z = -2 * units;\r\n\r\n        this.view.add(bkgMesh);\r\n\r\n        this.rotate = false;\r\n\r\n        this.transition = new Transition(this.view, this.view, .25);\r\n        this.slideIn = new Slide('x', 1.2, 0);\r\n        this.slideIn.Init(this.transition);\r\n        this.slideOut = new Slide('x', 0, 1.2);\r\n        this.slideOut.Init(this.transition);\r\n        /** @param {Slide} transitionController */\r\n        function onTransitionComplete(transitionController){\r\n            if(transitionController === scope.slideOut){\r\n                scope.Hide();\r\n            }\r\n            else{\r\n                scope.rotate = true;\r\n            }\r\n        }\r\n        this.transition.On(Transition.signals.complete, onTransitionComplete);\r\n        \r\n        this.Preview();\r\n    }\r\n\r\n    /** @param {scaleFigure} value */\r\n    set scaleFigure(value){\r\n        this[_scaleFigure] = value;\r\n        let refMesh = this.refMesh;\r\n        if(refMesh instanceof THREE.Mesh){\r\n            /** @type {THREE.Texture} */\r\n            let alphaMap = refMesh.material.alphaMap;\r\n            if(value === scaleFigure.man){\r\n                alphaMap.offset.setX(0);\r\n            }\r\n            else{\r\n                alphaMap.offset.setX(.5);\r\n            }\r\n        }\r\n    }\r\n\r\n    get scaleFigure(){ return this[_scaleFigure]; }\r\n\r\n    static get scaleFigure(){ return scaleFigure; }\r\n\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Preview(entry){\r\n\r\n        let valid = entry;\r\n\r\n        if(valid){\r\n            if(entry instanceof BoxEntry) valid = entry.dimensions.volume > epsilon;\r\n        }\r\n\r\n        if(!valid){\r\n            this.End();\r\n            return false;\r\n        }\r\n\r\n        let c = this.preview.children;\r\n        while(c.length > 0) this.preview.remove(c[c.length - 1]);\r\n\r\n        let units = this.params.ux.params.units;\r\n        let offsetX = this.offsetX;\r\n\r\n        if(entry instanceof BoxEntry){\r\n            /** @type {CargoBoxView} */\r\n            let boxView = this.previewTypes.get(entry.type);\r\n            if(boxView){\r\n                boxView.entry = entry;\r\n            }\r\n            else{\r\n                boxView = new CargoBoxView(entry);\r\n                this.previewTypes.set(entry.type, boxView);\r\n\r\n                boxView.mesh.material = boxView.mesh.material.clone();\r\n                boxView.mesh.material.depthWrite = false;\r\n            }\r\n\r\n            boxView.mesh.renderOrder = Number.MAX_SAFE_INTEGER - 10;\r\n            this.preview.add(boxView.view);\r\n\r\n            this.preview.position.x = -Math.max(entry.dimensions.width, entry.dimensions.length) / 2 + offsetX;\r\n            this.preview.position.y = entry.dimensions.height / 2 + tempBox3.min.y;\r\n        }\r\n\r\n        this.Start();\r\n    }\r\n\r\n    Show(){\r\n        this.view.visible = true;\r\n    }\r\n\r\n    Start(){\r\n        if(this.previewing === false){\r\n            this.rotate = false;\r\n            this.transition.controller = this.slideIn;\r\n            this.transition.Start();\r\n        }\r\n        this.Show();\r\n    }\r\n\r\n    Hide(){\r\n        this.view.visible = false;\r\n    }\r\n\r\n    End(){\r\n        if(this.previewing === true){\r\n            this.transition.controller = this.slideOut;\r\n            this.transition.Start();\r\n        }\r\n    }\r\n\r\n    get previewing(){ return this.view.visible; }\r\n\r\n    /** @param {Number} now @param {Number} deltaTime */\r\n    Update(now, deltaTime){\r\n        if(this.previewing){\r\n            if(this.rotate) this.preview.rotateY(-Math.PI / 10 * deltaTime / 1000);\r\n            this.transition.Update();\r\n        }\r\n    }\r\n}\r\n\r\nexport default EntryInputView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/EntryInputView.js","class TextField {\r\n    /**\r\n     * @param {string} label \r\n     * @param {string} content \r\n     */\r\n    constructor(label, content){\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.label = label;\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.content = content;\r\n    }\r\n\r\n    /**\r\n     * @param {TextField} field \r\n     */\r\n    Copy(field){\r\n        this.label = field.label;\r\n        this.content = field.content;\r\n    }\r\n\r\n    Clone(){\r\n        var field = new TextField(this.label, this.content);\r\n        return field;\r\n    }\r\n\r\n    static get defaultContent(){\r\n        return '-';\r\n    }\r\n}\r\n\r\nexport default TextField;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/TextField.js","import Signaler from \"../../utils/cik/Signaler\";\r\nimport Utils from \"../../utils/cik/Utils\";\r\n\r\nvar tlWatchTimer, tlWatchEntries;\r\nfunction tlWatchUpdater(){\r\n    for(let i = 0; i < tlWatchEntries.length; i++){\r\n        let entry = tlWatchEntries[i];\r\n        let newValue = entry.owner[entry.propertyName];\r\n        if(newValue !== entry.savedValue){\r\n            entry.savedValue = newValue;\r\n            entry.tl.value = newValue;\r\n        }\r\n    };\r\n}\r\nfunction addTLWatch(tl, owner, propertyName){\r\n    if(tlWatchTimer === undefined){\r\n        tlWatchEntries = [];\r\n        tlWatchTimer = setInterval(tlWatchUpdater, 200);\r\n    }\r\n    tlWatchEntries.push({tl: tl, owner: owner, propertyName: propertyName, savedValue: null});\r\n}\r\n\r\nconst _value = Symbol('value');\r\nconst typeofString = 'string';\r\n\r\nconst signals = {\r\n    change: 'change'\r\n};\r\n\r\nclass TextLabel extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        this[_value] = '';\r\n    }\r\n\r\n    get value(){\r\n        return this[_value];\r\n    }\r\n\r\n    /** @param {string} v */\r\n    set value(v){\r\n        if(v !== typeofString) v = this.GetString(v);\r\n\r\n        let changed = this[_value] !== v;\r\n        this[_value] = v;\r\n        if(changed) this.Dispatch(signals.change, this);\r\n    }\r\n\r\n    GetString(v){\r\n        return v.ToString ? v.ToString() : v.toString();\r\n    }\r\n\r\n    Watch(owner, propertyName){\r\n        addTLWatch(this, owner, propertyName);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nconst defaultGeometry = new THREE.PlaneGeometry(1, 1, 1, 1);\r\n\r\n/**\r\n * @typedef TLVParams\r\n * @property {string} font css 32px sans-serif\r\n * @property {string} textAlign start, end, left, right or center\r\n * @property {string} sidePadding px\r\n * @property {Number} fontColor css\r\n * @property {Number} backColor css\r\n * @property {Number} width px\r\n * @property {Number} height px\r\n */\r\n/** @type {TLVParams} */\r\nconst defaultParams = {\r\n    font: '32px sans-serif',\r\n    textAlign: 'center',\r\n    sidePadding: 16,\r\n    fontColor: 0x000000,\r\n    backColor: 0xffffff,\r\n    width: 256,\r\n    height: 64\r\n};\r\n\r\nclass TextLabelView{\r\n    \r\n    /** @param {TLVParams} params */\r\n    constructor(params){\r\n        \r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        let material = new THREE.MeshBasicMaterial({color: 0xffffff, side: THREE.DoubleSide});\r\n        this.view = new THREE.Mesh(defaultGeometry, material);\r\n    }\r\n\r\n    /** @param {TextLabel} value */\r\n    set textLabel(value){\r\n        value.On(TextLabel.signals.change, this.OnChange.bind(this));\r\n    }\r\n\r\n    /** @param {TextLabel} textLabel */\r\n    OnChange(textLabel){\r\n        let text = textLabel.value;\r\n        this.UpdateText(text);\r\n    }\r\n\r\n    /** @param {string} text */\r\n    UpdateText(text){\r\n        if(this.canvas2d === undefined)\r\n            this.canvas2d = document.createElement('canvas');\r\n\r\n        this.canvas2d.width = this.params.width;\r\n        this.canvas2d.height = this.params.height;\r\n\r\n        let context2d = this.canvas2d.getContext('2d');\r\n            context2d.fillStyle = this.params.backColor;\r\n            context2d.fillRect(0, 0, this.params.width + 2, this.params.height + 2);\r\n            context2d.fillStyle = this.params.fontColor;\r\n            context2d.font = this.params.font;\r\n            context2d.textAlign = this.params.textAlign;\r\n            context2d.textBaseline = 'middle';\r\n\r\n        let x = this.params.textAlign === 'start' || this.params.textAlign === 'left' ? this.params.sidePadding :\r\n            ( this.params.textAlign === 'end' || this.params.textAlign === 'right' ? this.params.width - this.params.sidePadding :\r\n            ( this.params.width / 2 ) );\r\n        context2d.fillText(text, x, this.params.height / 2);\r\n\r\n        //\r\n        let mesh = this.view;\r\n        /** @type {THREE.MeshBasicMaterial} */\r\n        let material = mesh.material;\r\n        if(!material.map){\r\n            material.map = new THREE.CanvasTexture(this.canvas2d);\r\n            material.map.minFilter = THREE.LinearFilter;\r\n            material.map.anisotropy = 1.4;\r\n        }\r\n        else{\r\n            material.map.image = this.canvas2d;\r\n        }\r\n        material.map.needsUpdate = true;\r\n    }\r\n\r\n}\r\n\r\nTextLabelView.Label = TextLabel;\r\n\r\nexport default TextLabelView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/TextLabelView.js","import EntryInputView from \"./view/EntryInputView\";\r\n\r\nclass Constants{\r\n    constructor(){\r\n\r\n    }\r\n\r\n    static get scaleRefFigure(){ return EntryInputView.scaleFigure; }\r\n}\r\n\r\nexport default Constants;\n\n\n// WEBPACK FOOTER //\n// ./src/api/Constants.js","import { Element } from \"./UIUtils\";\r\n\r\nif(window.dat && !window.dat.guiExtensions){\r\n\r\n    window.dat.guiExtensions = true;\r\n\r\n    Element.CreateCSS([\r\n        '.tooltip .tooltiptext {',\r\n        '    visibility: hidden;',\r\n        '    position: absolute;',\r\n        '    width: 120px;',\r\n        '    background-color: #111;',\r\n        '    color: #fff;',\r\n        '    text-align: center;',\r\n        '    padding: 2px 0;',\r\n        '    border-radius: 2px;',\r\n        '    z-index: 1;',\r\n        '    opacity: 0;',\r\n        '    transition: opacity .6s;',\r\n        '}',\r\n\r\n        '.tooltip-top {',\r\n        '    bottom: 125%;',\r\n        '    left: 50%;',\r\n        '    margin-left: -60px;',\r\n        '}',\r\n        \r\n        '.tooltip:hover .tooltiptext {',\r\n        '    visibility: visible;',\r\n        '    opacity: 1;',\r\n        '}'\r\n    ]);\r\n\r\n    const styles = {\r\n        datDisabled: 'color: #606060 !important; cursor: not-allowed !important;'\r\n    };\r\n\r\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'onGUIEvent', {\r\n        get: function(){\r\n            if(!this._onGUIEvent)\r\n                this._onGUIEvent = [];\r\n            return this._onGUIEvent;\r\n        }\r\n    });\r\n\r\n    // update all\r\n\r\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.updateAll = function(){\r\n        var gui = this;\r\n        for (var i in gui.__controllers) {\r\n            var controller = gui.__controllers[i];\r\n            controller.updateDisplay();\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            folders[i].updateAll();\r\n        }\r\n    };\r\n\r\n    // find\r\n\r\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.find = function(object, property){\r\n        var gui = this, controller, i;\r\n\r\n        if(property){ // 2 arguments\r\n            for (i = 0; i < gui.__controllers.length; i++){\r\n                controller = gui.__controllers[i];\r\n                if (controller.object == object && controller.property == property)\r\n                    return controller;\r\n            }\r\n\r\n            var folders = Object.values(gui.__folders);\r\n            for(i = 0; i < folders.length; i++){\r\n                controller = folders[i].find(object, property);\r\n                if(controller) return controller;\r\n            }\r\n        }\r\n        else{\r\n            property = object; // 1 argument\r\n\r\n            var folderKeys = Object.keys(gui.__folders);\r\n            for(i = 0; i < folderKeys.length; i++){\r\n                var folderName = folderKeys[i];\r\n                var folder = gui.__folders[folderName];\r\n                if(folderName === property)\r\n                    return folder;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n\r\n    // On open event\r\n    //if(_this.opening !== undefined) _this.opening = _this.closed; // chadiik\r\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'opening', {\r\n        get: function(){\r\n            return !this.closed;\r\n        },\r\n\r\n        set: function(value){\r\n            for(var i = 0; i < this.onGUIEvent.length; i++){\r\n                this.onGUIEvent[i](value ? 'open' : 'close');\r\n            }\r\n        }\r\n    });\r\n\r\n    // Disabled\r\n    function blockEvent(event){\r\n        event.stopPropagation();\r\n    }\r\n\r\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"disabled\", {\r\n        get: function(){\r\n            return this.domElement.hasAttribute(\"disabled\");\r\n        },\r\n\r\n        set: function(value){\r\n            if (value){\r\n                this.domElement.setAttribute(\"disabled\", \"disabled\");\r\n                this.domElement.addEventListener(\"click\", blockEvent, true);\r\n                Element.AddStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n            }\r\n            else{\r\n                this.domElement.removeAttribute(\"disabled\");\r\n                this.domElement.removeEventListener(\"click\", blockEvent, true);\r\n                Element.RemoveStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n            }\r\n        },\r\n\r\n        enumerable: true\r\n    });\r\n\r\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.enable = function(object, property, value){\r\n        var controller = this.find(object, property);\r\n        controller.disabled = !value;\r\n    };\r\n\r\n    // Tooltip\r\n\r\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"tooltip\", {\r\n        get: function(){\r\n            return this._tooltip.innerHTML;\r\n        },\r\n\r\n        set: function(value){\r\n            if (value){\r\n                if(this._tooltip === undefined) {\r\n                    this._tooltip = crel('span', {class: 'tooltiptext'});\r\n\r\n                    /**\r\n                     * @type {HTMLElement}\r\n                     */\r\n                    var container = this.domElement.parentElement.parentElement;\r\n                    container.classList.add('tooltip');\r\n                    container.appendChild(this._tooltip);\r\n                }\r\n                this._tooltip.innerHTML = value;\r\n            }\r\n        },\r\n\r\n        enumerable: true\r\n    });\r\n\r\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.setTooltip = function(object, property, value){\r\n        var controller = this.find(object, property);\r\n        controller.tooltip = value;\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIExtensions.js","import AFitTest from \"../packer/afit/AFitTest\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport RuntimeTester from \"./RuntimeTester\";\r\n\r\nfunction delay(time, callback){\r\n    setTimeout(callback, time);\r\n}\r\n\r\nconst debugGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nvar debugMaterial = new THREE.MeshStandardMaterial({color: 0xff7f00, transparent: true, opacity: .35});\r\nAsset.SetTextureMap('checkers.jpg', debugMaterial, 'map').then( (map) => {\r\n    map.wrapS = map.wrapT = THREE.RepeatWrapping;\r\n});\r\nconst debugBox = new THREE.Mesh(debugGeometry, debugMaterial);\r\n\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass DebugBox {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} center \r\n     * @param {Number|THREE.Vector3} size \r\n     */\r\n    static FromCenterSize(center, size){\r\n        var box = debugBox.clone();\r\n        box.position.copy(center);\r\n        \r\n        if(size instanceof THREE.Vector3)\r\n            box.scale.copy(size);\r\n        else\r\n            box.scale.set(size, size, size);\r\n\r\n        return box;\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     */\r\n    static FromBox3(box3){\r\n        var box = debugBox.clone();\r\n\r\n        box3.getCenter(tempVec);\r\n        box.position.copy(tempVec);\r\n        box3.getSize(tempVec);\r\n        box.scale.copy(tempVec);\r\n\r\n        return box;\r\n    }\r\n}\r\n\r\n/**\r\n * DebugViz\r\n */\r\n\r\nconst alphaHexMask = 256 * 256 * 256;\r\n\r\n/** @type {THREE.Object3D} */\r\nvar view;\r\n\r\n/** @type {Map<string, *>} */\r\nvar debugObjects = new Map();\r\n\r\nvar tVec3 = new THREE.Vector3(),\r\n    tPos = new THREE.Vector3(),\r\n    tScale = new THREE.Vector3();\r\n\r\nclass DebugViz {\r\n\r\n    /**\r\n     * @param {THREE.Object3D} parent\r\n     */\r\n    static SetViewParent(parent){\r\n        view = new THREE.Object3D();\r\n        view.name = 'DebugViz view';\r\n        view.renderOrder = Number.MAX_SAFE_INTEGER - 10;\r\n        parent.add(view);\r\n    }\r\n\r\n    static get view(){ return view; }\r\n\r\n    /**\r\n     * @param {Number} x center x * @param {Number} y center y * @param {Number} z center z * @param {Number} w * @param {Number} h * @param {Number} l\r\n     * @param {Number} [color] hex color\r\n     * @param {Number} [duration] in milliseconds\r\n     * @param {Boolean} [checkered] checkers map\r\n     */\r\n    static DrawVolume(x, y, z, w, h, l, color, duration, wireframe, checkered){\r\n        tPos.set(x, y, z);\r\n        tScale.set(w, h, l);\r\n\r\n        /** @type {THREE.Mesh} */\r\n        var volume = debugBox.clone();\r\n        view.add(volume);\r\n\r\n        volume.position.copy(tPos);\r\n        volume.scale.copy(tScale);\r\n\r\n        if(color){\r\n            /** @type {THREE.MeshStandardMaterial} */\r\n            let material = volume.material.clone();\r\n            volume.material = material;\r\n            material.color.setHex(color && 0xffffff);\r\n            if(wireframe === true){\r\n                material.wireframe = true;\r\n            }\r\n            else{\r\n                material.opacity = Math.floor(color / alphaHexMask) / 256;\r\n                material.transparent = material.opacity > 0 && material.opacity < .99;\r\n            }\r\n\r\n            if(!checkered){\r\n                material.map = null;\r\n            }\r\n            else{\r\n                material.map.repeat.set(10, 10);\r\n            }\r\n        }\r\n\r\n        let uid = THREE.Math.generateUUID();\r\n        debugObjects.set(uid, volume);\r\n\r\n        if(duration > 0){\r\n            delay(duration, function(){\r\n                DebugViz.RemoveObjectByUID(uid);\r\n            });\r\n        }\r\n\r\n        return uid;\r\n    }\r\n\r\n    /**\r\n     * @param {string} uid \r\n     */\r\n    static RemoveObjectByUID(uid){\r\n        var object = debugObjects.get(uid);\r\n        if(object instanceof THREE.Object3D && object.parent){\r\n            object.parent.remove(object);\r\n        }\r\n    }\r\n\r\n    static ClearAll(){\r\n        for(var uid of debugObjects.keys()){\r\n            DebugViz.RemoveObjectByUID(uid);\r\n        }\r\n    }\r\n\r\n    /** @param {Boolean} visible */\r\n    static SetPackingSpaceVisibility(visible){\r\n        Debug.app.view.packingSpaceView.view.visible = visible;\r\n    }\r\n}\r\n\r\n/**\r\n * DebugViz\r\n */\r\n\r\nclass Debug {\r\n\r\n    static get Runtime(){\r\n        return RuntimeTester;\r\n    }\r\n\r\n    static MaterialEdit(callback){\r\n        let objects = Debug.app.view.packResultView.cargoViews;\r\n        objects.forEach(o => {\r\n            let material = o.mesh.material;\r\n            callback(material);\r\n            material.needsUpdate = true;\r\n        });\r\n    }\r\n\r\n    static get AFitTest(){\r\n        return AFitTest;\r\n    }\r\n}\r\n\r\nDebug.Box = DebugBox;\r\nDebug.Viz = DebugViz;\r\n\r\n/** @type {import('../../FreightPacker').default} */\r\nDebug.api;\r\n/** @type {import('../App').default} */\r\nDebug.app;\r\n\r\nexport default Debug;\n\n\n// WEBPACK FOOTER //\n// ./src/api/debug/Debug.js","import { epsilon, smallValue, smallValueSqrt } from \"./Math2D\";\r\nimport { Item, Container } from \"./Components\";\r\n\r\nclass PackedItem{\r\n\r\n    /**\r\n     * @param {Item} ref \r\n     * @param {Number} x\r\n     * @param {Number} y\r\n     * @param {Number} z\r\n     * @param {Number} packedWidth\r\n     * @param {Number} packedHeight\r\n     * @param {Number} packedLength\r\n     * @param {Number} orientation \r\n     */\r\n    constructor(ref, x, y, z, packedWidth, packedHeight, packedLength, orientation){\r\n        this.ref = ref;\r\n        this.x = x; this.y = y; this.z = z;\r\n        this.packedWidth = packedWidth; this.packedHeight = packedHeight; this.packedLength = packedLength;\r\n        this.orientation = orientation;\r\n    }\r\n\r\n    /** @param {PackedItem} a * @param {PackedItem} b */\r\n    static DepthSort(a, b){\r\n        let az = a.z + a.packedLength,\r\n            bz = b.z + b.packedLength;\r\n        if(az + smallValue < bz) return -1;\r\n        if(az > bz + smallValue) return 1;\r\n        if(a.y < b.y) return -1;\r\n        if(a.y > b.y) return 1;\r\n        if(a.ref.volume > b.ref.volume + smallValue) return -1;\r\n        if(a.ref.volume + smallValue < b.ref.volume) return 1;\r\n        return 0;\r\n    }\r\n\r\n    /** @param {PackedItem} a * @param {PackedItem} b */\r\n    static Sort(a, b){\r\n        if(a.z + smallValue < b.z){\r\n            if(a.z + a.packedLength > b.z && a.y > b.y) return 1;\r\n            return -1;\r\n        }\r\n        if(b.z + smallValue < a.z){\r\n            if(b.z + b.packedLength > a.z && b.y > a.y) return 1;\r\n            return 1;\r\n        }\r\n        if(a.y < b.y) return -1;\r\n        if(a.y > b.y) return 1;\r\n        if(a.ref.volume > b.ref.volume + smallValue) return -1;\r\n        if(a.ref.volume + smallValue < b.ref.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nclass PackedContainer{\r\n    /**\r\n     * @param {Container} container \r\n     */\r\n    constructor(container){\r\n        this.container = container;\r\n        \r\n        /** @type {Array<PackedItem>} */\r\n        this.packedItems = [];\r\n        /** @type {Array<Item>} */\r\n        this.unpackedItems = [];\r\n\r\n        this.cumulatedWeight = 0;\r\n    }\r\n\r\n    /** @param {PackedItem} item */\r\n    Pack(item){\r\n        this.cumulatedWeight += item.ref.weight;\r\n        this.packedItems.push(item);\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    Unpack(item){\r\n        this.unpackedItems.push(item);\r\n    }\r\n\r\n    /** @param {Number} weight */\r\n    WeightPass(weight){\r\n        return this.cumulatedWeight + weight <= this.container.weightCapacity;\r\n    }\r\n}\r\n\r\nexport {\r\n    PackedItem,\r\n    PackedContainer\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/PackedComponents.js","import Container from \"../packer/container/Container\";\r\nimport ContainerView from \"./ContainerView\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\nconst typeofString = 'string';\r\n\r\nvar yRotation = new THREE.Matrix4().makeRotationY(-Math.PI / 2);\r\nvar tempMatrix4 = new THREE.Matrix4();\r\n\r\nclass PackingSpaceView{\r\n    constructor(){\r\n        this.view = new THREE.Object3D();\r\n\r\n        /**\r\n         * @type {Array<ContainerView>}\r\n         */\r\n        this.containerViews = [];\r\n    }\r\n\r\n    /** \r\n     * @param {Container} container\r\n     */\r\n    Add(container){\r\n        let containerView = ContainerView.Request(container);\r\n        this.view.add(containerView.view);\r\n        this.containerViews.push(containerView);\r\n    }\r\n\r\n    Clear(){\r\n        for(let i = 0; i < this.containerViews.length; i++){\r\n            let cv = this.containerViews[i];\r\n            this.view.remove(cv.view);\r\n        }\r\n        this.containerViews.length = 0;\r\n    }\r\n\r\n    /**\r\n     * @param {string} containingVolumeUID \r\n     */\r\n    FindContainingVolume(containingVolumeUID){\r\n        for(let iCView = 0; iCView < this.containerViews.length; iCView++){\r\n            let volumes = this.containerViews[iCView].container.volumes;\r\n            for(let iCVolume = 0; iCVolume < volumes.length; iCVolume++){\r\n                if(volumes[iCVolume].uid === containingVolumeUID){\r\n                    return volumes[iCVolume];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {ContainingVolume} containingVolume \r\n     */\r\n    GetMatrix(containingVolume){\r\n        if(typeof containingVolume === typeofString) containingVolume = this.FindContainingVolume(containingVolume);\r\n        tempMatrix4.identity();\r\n        tempMatrix4.makeTranslation(containingVolume.position.x - containingVolume.dimensions.width / 2, containingVolume.position.y, containingVolume.position.z - containingVolume.dimensions.length / 2);\r\n        //tempMatrix4.premultiply(yRotation);\r\n        return tempMatrix4;\r\n    }\r\n}\r\n\r\nexport default PackingSpaceView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackingSpaceView.js","import Container from \"../packer/container/Container\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\nclass ContainerBox{\r\n    /** @param {THREE.Mesh} mesh */\r\n    constructor(mesh){\r\n        this.mesh = mesh;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {Container} container \r\n */\r\nfunction createContainerBoxes(container){\r\n    /**\r\n     * @type {Map<ContainingVolume, ContainerBox>}\r\n     */\r\n    var boxes = new Map();\r\n\r\n    container.volumes.forEach(cv => {\r\n        let mesh = Asset.CreateMesh();\r\n            \r\n        let extent = cv.dimensions.vec3;\r\n        mesh.scale.copy(extent);\r\n        mesh.position.y += extent.y / 2;\r\n\r\n        mesh.material = mesh.material.clone();\r\n        mesh.material.color.setHex(0xffaaaa);\r\n        mesh.material.transparent = true;\r\n        mesh.material.opacity = .2;\r\n        mesh.material.side = THREE.BackSide;\r\n        mesh.material.polygonOffset = true;\r\n        mesh.material.polygonOffsetFactor = 1;\r\n        mesh.material.polygonOffsetUnits = 1;\r\n\r\n        boxes.set(cv, new ContainerBox(mesh));\r\n    });\r\n\r\n    return boxes;\r\n}\r\n\r\nvar tempVec3 = new THREE.Vector3();\r\n\r\n/** @type {WeakMap<Container, ContainerView>} */\r\nvar views = new WeakMap();\r\n\r\nclass ContainerView {\r\n    /**\r\n     * \r\n     * @param {Container} container \r\n     * @param {THREE.Object3D} view\r\n     */\r\n    constructor(container, view){\r\n\r\n        // Store original dimensions\r\n        this.initializationBox3 = new THREE.Box3();\r\n        this.initializationBox3.setFromObject(view);\r\n\r\n        views.set(container, this);\r\n\r\n        this.container = container;\r\n        this.view = new THREE.Object3D();\r\n        this.view.add(view);\r\n\r\n        Asset.StandardSceneObject(this.view);\r\n        Asset.ColorTemplates('Containers').Apply(this.view);\r\n\r\n        this.containerBoxes = createContainerBoxes(container);\r\n        for(var [cv, box] of this.containerBoxes){\r\n            box.mesh.position.add(cv.position);\r\n            this.view.add(box.mesh);\r\n        }\r\n\r\n    }\r\n\r\n    //** @param {Input} input @param {Camera} cameraController */\r\n    /*InitSliderBoxes(input, cameraController, changeCallback, stopCallback){\r\n        for(var box of this.containerBoxes.values()){\r\n            box.UseInput(input, cameraController);\r\n            box.On(sliderSignals.change, changeCallback);\r\n            box.On(sliderSignals.stop, stopCallback);\r\n        }\r\n    }*/\r\n\r\n    /**\r\n     * @param {Boolean} visible\r\n     * @param {THREE.Vector3} [padding]\r\n     */\r\n    PlatformVisibility(visible, padding){\r\n\r\n        if(visible && this.platformMesh === undefined){\r\n\r\n            if(padding === undefined) padding = new THREE.Vector3(0, .01, 0);\r\n        \r\n            this.initializationBox3.getSize(tempVec3);\r\n\r\n            let planeGeom = new THREE.BoxGeometry(tempVec3.x + padding.x * 2, padding.y, tempVec3.z + padding.z * 2, 1, 1, 1);\r\n            let planeMaterial = new Asset.CreateSolidMaterialMatte(Asset.ColorTemplates('Containers').Apply(0xffffff));\r\n            this.platformMesh = new THREE.Mesh(planeGeom, planeMaterial);\r\n            Asset.ReceiveShadow(this.platformMesh);\r\n\r\n            this.platformMesh.position.y = .001;\r\n            this.view.add(this.platformMesh);\r\n        }\r\n\r\n        this.platformMesh.visible = visible;\r\n    }\r\n\r\n    /**\r\n     * @param {Container} container\r\n     * @returns {ContainerView}\r\n     */\r\n    static Request(container){\r\n        var view = views.get(container);\r\n        if( !view ){\r\n            let boxes = createContainerBoxes(container);\r\n            let object3d = new THREE.Object3D();\r\n            for(var [cv, box] of boxes){\r\n                box.mesh.position.add(cv.position);\r\n                object3d.add(box.mesh);\r\n            }\r\n\r\n            view = new ContainerView(container, object3d);\r\n            views.set(container, view);\r\n            Logger.Warn('View not found for:', container);\r\n        }\r\n        return view;\r\n    }\r\n}\r\n\r\nexport default ContainerView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/ContainerView.js","import Utils from '../utils/cik/Utils';\r\nimport CargoListView from './CargoListView';\r\nimport CargoView from './CargoView';\r\nimport Pool from '../utils/cik/Pool';\r\nimport PackedCargoBoxView from './PackedCargoBoxView';\r\nimport PackingSpaceView from './PackingSpaceView';\r\nimport Tween from '../utils/cik/Tween';\r\nimport Packer from '../packer/Packer';\r\nimport BoxEntry from '../components/box/BoxEntry';\r\nimport Signaler from '../utils/cik/Signaler';\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\n/**\r\n * @typedef {Object} PackResultViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Number} animationDuration\r\n */\r\n\r\n /** @type {PackResultViewParams} */\r\nconst defaultParams = {\r\n    animationDuration: 1\r\n};\r\n\r\n/**\r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolNewFN(cargoView){\r\n    //console.log('pool new', cargoView);\r\n    let packedCargoView = new PackedCargoBoxView(cargoView.entry);\r\n    packedCargoView.Extend(cargoView);\r\n    return packedCargoView;\r\n}\r\n\r\n/**\r\n * @param {PackedCargoBoxView} object \r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolResetFN(object, cargoView){\r\n    //console.log('pool reset', cargoView);\r\n    object.Extend(cargoView);\r\n    return object;\r\n}\r\n\r\nfunction getOrientationAngles(orientation){\r\n    switch(orientation){\r\n        case 'xyz': return  [0,     0,      0];\r\n        case 'xzy': return  [90,    0,      0];\r\n        case 'yxz': return  [0,     0,      90];\r\n        case 'yzx': return  [90,    0,      90];\r\n        case 'zxy': return  [90,    -90,    0];\r\n        case 'zyx': return  [0,     -90,    0];\r\n    }\r\n}\r\n\r\n/**\r\n * @param {string} orientation \r\n */\r\nfunction getOrientationEuler(orientation){\r\n    const rad = Math.PI / 180.0;\r\n    let a = getOrientationAngles(orientation);\r\n    return new THREE.Euler(a[0] * rad, a[1] * rad, a[2] * rad);\r\n}\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nconst signals = {\r\n    packVizStart: 'packVizStart',\r\n    packVizEnd: 'packVizEnd',\r\n    cargoVizCreate: 'cargoVizCreate',\r\n    cargoVizPack: 'cargoVizPack',\r\n    cargoVizUnpack: 'cargoVizUnpack'\r\n};\r\n\r\nclass PackResultView extends Signaler{\r\n    /**\r\n     * @param {CargoListView} cargoListView\r\n     * @param {PackingSpaceView} packingSpaceView\r\n     * @param {PackResultViewParams} params \r\n     */\r\n    constructor(cargoListView, packingSpaceView, params){\r\n\r\n        super();\r\n\r\n        this.cargoListView = cargoListView;\r\n        this.packingSpaceView = packingSpaceView;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        /** @type {Array<CargoView} */\r\n        this.cargoViews = [];\r\n        this.view = new THREE.Object3D();\r\n\r\n        this.pool = new Pool(poolNewFN, poolResetFN);\r\n\r\n        /** @type {Array<Tween>} */\r\n        this.animatingViews = [];\r\n\r\n        if(typeof window.Pizzicato !== 'undefined'){\r\n            let musipack = new (require('./components/Musipack').default)(this);\r\n        }\r\n    }\r\n\r\n    /** \r\n     * @param {Packer.PackingResult} packingResult\r\n     */\r\n    async DisplayPackingResult(packingResult){\r\n\r\n        this.Dispatch(signals.packVizStart, packingResult);\r\n\r\n        if(packingResult.packed.length < 1) return;\r\n\r\n        let scope = this;\r\n        let units = this.params.ux.params.units;\r\n        \r\n        let containingVolume = packingResult.packed[0].containingVolume;\r\n        let matrix = this.packingSpaceView.GetMatrix(containingVolume);\r\n        let offset = new THREE.Vector3();\r\n        let orientation = new THREE.Quaternion();\r\n        let scale = new THREE.Vector3();\r\n        matrix.decompose(offset, orientation, scale);\r\n\r\n        /** @type {Map<CargoView, Number>} */\r\n        let packedQuantities = new Map();\r\n\r\n        let animatingViews = this.animatingViews;\r\n        let view = this.view;\r\n        //let onTweenComplete = this.OnCargoFirstTweenComplete.bind(this);\r\n        let zEntry = containingVolume.dimensions.length;\r\n        let numPackedItems = packingResult.packed.length;\r\n        let delayPerItem = this.params.animationDuration * 1000 / numPackedItems;\r\n        for(let i = 0; i < numPackedItems; i++){\r\n            let item = packingResult.packed[i];\r\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.entry);\r\n\r\n            let packedQuantity = packedQuantities.get(cargoViewTemplate);\r\n            let totalQuantity = cargoViewTemplate.entry.quantity;\r\n            if(packedQuantity === undefined) packedQuantities.set(cargoViewTemplate, packedQuantity = 0);\r\n            packedQuantities.set(cargoViewTemplate, ++packedQuantity);\r\n            let textColor = packedQuantity === totalQuantity ? 'rgb(255, 255, 255)' : 'rgb(255, 0, 0)';\r\n            this.cargoListView.UpdateLabel(cargoViewTemplate, packedQuantity + '/' + totalQuantity, textColor);\r\n\r\n            let packedCargoView = this.pool.Request(cargoViewTemplate);\r\n\r\n            this.cargoViews.push(packedCargoView);\r\n\r\n            let rotation = getOrientationEuler(item.orientation);\r\n            packedCargoView.SetRotationAngles(rotation.x, rotation.y, rotation.z);\r\n\r\n            let x = item.position.x + offset.x,\r\n                y = item.position.y + offset.y,\r\n                z = item.position.z + offset.z;\r\n\r\n            let posTweenCombo = Tween.Combo.RequestN(Tween.functions.ease.easeOutQuad, .5,\r\n                x, 0,\r\n                y, 0,\r\n                zEntry, z - zEntry\r\n            );\r\n\r\n            function onTweenComplete(tween){\r\n                scope.Dispatch(signals.cargoVizPack, item);\r\n                scope.OnCargoFirstTweenComplete(tween);\r\n            }\r\n            \r\n            posTweenCombo.extraData = packedCargoView;\r\n            posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\r\n            posTweenCombo.onComplete = onTweenComplete;\r\n            posTweenCombo.Update(0);\r\n            animatingViews.push(posTweenCombo);\r\n    \r\n            view.add(packedCargoView.view);\r\n            await sleep(delayPerItem);\r\n        }\r\n\r\n        await sleep(500);\r\n\r\n        let unpackedOffset = 6 * units;\r\n        for(let i = 0, numUnpackedItems = packingResult.unpacked.length; i < numUnpackedItems; i++){\r\n            let item = packingResult.unpacked[i];\r\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.entry);\r\n\r\n            let totalQuantity = cargoViewTemplate.entry.quantity;\r\n            if(packedQuantities.has(cargoViewTemplate) === false){\r\n                let textColor = false ? 'rgb(255, 255, 255)' : 'rgb(255, 0, 0)';\r\n                this.cargoListView.UpdateLabel(cargoViewTemplate, '0/' + totalQuantity, textColor);\r\n            }\r\n\r\n            if(i === 0) unpackedOffset += item.entry.dimensions.width / 2;\r\n\r\n            for(let j = 0; j < item.unpackedQuantity; j++){\r\n                let packedCargoView = this.pool.Request(cargoViewTemplate);\r\n\r\n                this.cargoViews.push(packedCargoView);\r\n                \r\n                let x = containingVolume.dimensions.width * 1.5 + unpackedOffset + offset.x,\r\n                    y = item.entry.dimensions.height / 2 + offset.y,\r\n                    z = item.entry.dimensions.length * j + offset.z;\r\n\r\n                let posTweenCombo = Tween.Combo.RequestN(Tween.functions.ease.easeOutQuad, .5,\r\n                    x, 0,\r\n                    y, 0,\r\n                    zEntry, z - zEntry\r\n                );\r\n\r\n                function onTweenComplete(tween){\r\n                    scope.Dispatch(signals.cargoVizUnpack, item);\r\n                    scope.OnCargoFirstTweenComplete(tween);\r\n                }\r\n                \r\n                posTweenCombo.extraData = packedCargoView;\r\n                posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\r\n                posTweenCombo.onComplete = onTweenComplete;\r\n                posTweenCombo.Update(0);\r\n                animatingViews.push(posTweenCombo);\r\n        \r\n                view.add(packedCargoView.view);\r\n                await sleep(delayPerItem * .5);\r\n            }\r\n\r\n            unpackedOffset += item.entry.dimensions.width + 6 * units;\r\n        }\r\n    }\r\n\r\n    /** @param {Tween|Tween.Combo} tween */\r\n    OnCargoFirstTweenComplete(tween){\r\n        let packedCargoView = tween.extraData;\r\n        this.OnTweenComplete(tween);\r\n        let scaleTweenCombo = Tween.Combo.RequestN(Tween.functions.special.pingPong, .1, \r\n            1, .1,\r\n            1, .1,\r\n            1, .1\r\n        );\r\n        \r\n        scaleTweenCombo.extraData = packedCargoView;\r\n        scaleTweenCombo.Hook(packedCargoView.view.scale, 'x', 'y', 'z');\r\n        scaleTweenCombo.onComplete = this.OnTweenComplete.bind(this);;\r\n        scaleTweenCombo.Update(0);\r\n        this.animatingViews.push(scaleTweenCombo);\r\n    }\r\n\r\n    /** @param {Tween|Tween.Combo} tween */\r\n    OnTweenComplete(tween){\r\n        let packedCargoView = tween.extraData;\r\n        packedCargoView.view.scale.set(1, 1, 1);\r\n        let index = this.animatingViews.indexOf(tween);\r\n        if(index != -1){\r\n            this.animatingViews.splice(index, 1);\r\n        }\r\n        tween.Unhook();\r\n        tween.Return();\r\n    }\r\n\r\n    /** @param {string} entryUID */\r\n    SelectEntry(entryUID){\r\n        if(!entryUID){\r\n            this.DisableHighlights();\r\n        }\r\n        else{\r\n            this.Highlight(entryUID);\r\n        }\r\n    }\r\n\r\n    DisableHighlights(){\r\n        for(let i = 0, numCargoViews = this.cargoViews.length; i < numCargoViews; i++){\r\n            this.cargoViews[i].focus = 1;\r\n        }\r\n    }\r\n\r\n    /** @param {string} entryUID */\r\n    Highlight(entryUID){\r\n        for(let i = 0, numCargoViews = this.cargoViews.length; i < numCargoViews; i++){\r\n            let cargoView = this.cargoViews[i];\r\n\r\n            let cvEntry = cargoView.entry;\r\n            if(cvEntry.uid === entryUID){\r\n                cargoView.focus = 1.75;\r\n            }\r\n            else{\r\n                cargoView.focus = .25;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    Slice(value){\r\n        if(value >= 1){\r\n            this.view.children.forEach(child => {\r\n                child.visible = true;\r\n            });\r\n            return;\r\n        }\r\n\r\n        let minY = Number.MAX_SAFE_INTEGER, maxY = Number.MIN_SAFE_INTEGER;\r\n        this.view.children.forEach(child => {\r\n            tempBox.setFromObject(child);\r\n            tempBox.getSize(tempVec);\r\n            let halfHeight = tempVec.y / 2;\r\n            tempBox.getCenter(tempVec);\r\n            let low = tempVec.y - halfHeight;\r\n            let high = tempVec.y + halfHeight;\r\n            if(low < minY) minY = low;\r\n            if(high > maxY) maxY = high;\r\n        });\r\n\r\n        let y = minY + value * (maxY - minY);\r\n\r\n        //console.log('slice ' + y.toFixed(2) + ' between ' + minY.toFixed(2) + ' and ' + maxY.toFixed(2));\r\n\r\n        this.view.children.forEach(child => {\r\n            tempBox.setFromObject(child);\r\n            tempBox.getSize(tempVec);\r\n            let halfHeight = tempVec.y / 2;\r\n            tempBox.getCenter(tempVec);\r\n            let low = tempVec.y - halfHeight;\r\n\r\n            if(low < y) child.visible = true;\r\n            else child.visible = false;\r\n        });\r\n    }\r\n\r\n    Clear(){\r\n        this.animatingViews.length = 0;\r\n        this.cargoViews.length = 0;\r\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\r\n    }\r\n\r\n    Update(){\r\n        this.animatingViews.forEach(animatingView => {\r\n            animatingView.Update();\r\n        });\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackResultView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackResultView.js","import { Element, styles } from \"../../utils/cik/config/UIUtils\";\r\nimport Signaler from \"../../utils/cik/Signaler\";\r\nimport Asset from \"../../components/assets/Asset\";\r\nimport Utils from \"../../utils/cik/Utils\";\r\n\r\n//#region crel.js\r\n//Copyright (C) 2012 Kory Nunn\r\n\r\n//Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n\r\n//The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\n//THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n/*\r\n\r\n    This code is not formatted for readability, but rather run-speed and to assist compilers.\r\n\r\n    However, the code's intention should be transparent.\r\n\r\n\r\n*/\r\n\r\nvar fn = 'function',\r\n    obj = 'object',\r\n    nodeType = 'nodeType',\r\n    textContent = 'textContent',\r\n    setAttribute = 'setAttribute',\r\n    attrMapString = 'attrMap',\r\n    isNodeString = 'isNode',\r\n    isElementString = 'isElement',\r\n    d = typeof document === obj ? document : {},\r\n    isType = function(a, type){\r\n        return typeof a === type;\r\n    },\r\n    isNode = typeof Node === fn ? function (object) {\r\n        return object instanceof Node;\r\n    } :\r\n    // in IE <= 8 Node is an object, obviously..\r\n    function(object){\r\n        return object &&\r\n            isType(object, obj) &&\r\n            (nodeType in object) &&\r\n            isType(object.ownerDocument,obj);\r\n    },\r\n    isElement = function (object) {\r\n        return crel[isNodeString](object) && object[nodeType] === 1;\r\n    },\r\n    isArray = function(a){\r\n        return a instanceof Array;\r\n    },\r\n    appendChild = function(element, child) {\r\n        if (isArray(child)) {\r\n            child.map(function(subChild){\r\n                appendChild(element, subChild);\r\n            });\r\n            return;\r\n        }\r\n        if(!crel[isNodeString](child)){\r\n            child = d.createTextNode(child);\r\n        }\r\n        element.appendChild(child);\r\n    };\r\nfunction crel(){\r\n    var args = arguments, //Note: assigned to a variable to assist compilers. Saves about 40 bytes in closure compiler. Has negligable effect on performance.\r\n        element = args[0],\r\n        child,\r\n        settings = args[1],\r\n        childIndex = 2,\r\n        argumentsLength = args.length,\r\n        attributeMap = crel[attrMapString];\r\n    element = crel[isElementString](element) ? element : d.createElement(element);\r\n    // shortcut\r\n    if(argumentsLength === 1){\r\n        return element;\r\n    }\r\n    if(!isType(settings,obj) || crel[isNodeString](settings) || isArray(settings)) {\r\n        --childIndex;\r\n        settings = null;\r\n    }\r\n    // shortcut if there is only one child that is a string\r\n    if((argumentsLength - childIndex) === 1 && isType(args[childIndex], 'string') && element[textContent] !== undefined){\r\n        element[textContent] = args[childIndex];\r\n    }else{\r\n        for(; childIndex < argumentsLength; ++childIndex){\r\n            child = args[childIndex];\r\n            if(child == null){\r\n                continue;\r\n            }\r\n            if (isArray(child)) {\r\n              for (var i=0; i < child.length; ++i) {\r\n                appendChild(element, child[i]);\r\n              }\r\n            } else {\r\n              appendChild(element, child);\r\n            }\r\n        }\r\n    }\r\n    for(var key in settings){\r\n        if(!attributeMap[key]){\r\n            if(isType(settings[key],fn)){\r\n                element[key] = settings[key];\r\n            }else{\r\n                element[setAttribute](key, settings[key]);\r\n            }\r\n        }else{\r\n            var attr = attributeMap[key];\r\n            if(typeof attr === fn){\r\n                attr(element, settings[key]);\r\n            }else{\r\n                element[setAttribute](attr, settings[key]);\r\n            }\r\n        }\r\n    }\r\n    return element;\r\n}\r\n// Used for mapping one kind of attribute to the supported version of that in bad browsers.\r\ncrel[attrMapString] = {};\r\ncrel[isElementString] = isElement;\r\ncrel[isNodeString] = isNode;\r\nif(typeof Proxy !== 'undefined'){\r\n    crel.proxy = new Proxy(crel, {\r\n        get: function(target, key){\r\n            !(key in crel) && (crel[key] = crel.bind(null, key));\r\n            return crel[key];\r\n        }\r\n    });\r\n}\r\n//#endregion\r\n\r\nfunction numberFormatDefault(n){ return n; }\r\n\r\nfunction numberFormat(n, d){\r\n    if(n > Number.MAX_SAFE_INTEGER - 2) return 'MAX';\r\n    let nStr = Math.round(n) !== n ? n.toFixed(d) : n;\r\n    return nStr;\r\n}\r\n\r\n/** @typedef FormatParams @property {Function} nf number formatting function */\r\n/** @type {FormatParams} */\r\nconst defaultFormatParams = {\r\n    nf: numberFormatDefault\r\n};\r\n\r\n/** @param {string} str string with (at) symbol an argument placeholder @param {FormatParams} params @param {Array<*>} args */\r\nfunction format(str, params, ...args){\r\n    params = Utils.AssignUndefined(params, defaultFormatParams);\r\n    let index = 0;\r\n    while( (index = str.indexOf('@', index)) !== -1 ){\r\n        if(str[index - 1] !== '\\\\'){\r\n            let a = args.shift();\r\n            if(typeof a === 'number') a = params.nf(a);\r\n            str = str.replace('@', a);\r\n        }\r\n        index += 1;\r\n    }\r\n    return str;\r\n}\r\n\r\nElement.CreateCSS([\r\n]);\r\n\r\nconst signals = {\r\n    orthoViewSelected: 'orthoViewSelected'\r\n};\r\n\r\nconst orthoviews = {\r\n    home: 'home',\r\n    top: 'top',\r\n    front: 'front',\r\n    side: 'side'\r\n};\r\n\r\nclass DomUI extends Signaler{\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv \r\n     * @param {UX} ux \r\n     */\r\n    constructor(containerDiv, ux){\r\n        super();\r\n        \r\n        /** @type {HTMLDivElement} */\r\n        //this.domElement = crel('div', {style: 'display: inline-block; position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;'});\r\n        //containerDiv.appendChild(this.domElement);\r\n        this.domElement = containerDiv;\r\n        this.ux = ux;\r\n\r\n        /** @type {HTMLDivElement} */\r\n        //this.sideBar = crel('div', {style: 'float: right; right: 0px; width: 50%; height: 100%;'});\r\n        //this.domElement.appendChild(this.sideBar);\r\n    }\r\n\r\n    CreateOrthoViewsIcons(){\r\n        let scope = this;\r\n        let texturesPath = Asset.resources.texturesPath;\r\n\r\n        let icons = [\r\n            {url: 'orthoviews-map.png', type: orthoviews.home},\r\n            {url: 'orthoviews-map.png', type: orthoviews.top},\r\n            {url: 'orthoviews-map.png', type: orthoviews.front},\r\n            {url: 'orthoviews-map.png', type: orthoviews.side}\r\n        ];\r\n\r\n        /** @type {HTMLDivElement} */\r\n        //this.orthoViewsIcons = crel('div', {style: 'display: inline-block; float: right; right: 0px; width: 100%; height: 100%;'});\r\n        //this.sideBar.appendChild(this.orthoViewsIcons);\r\n\r\n        const dimensions = {x: 52, y: 52};\r\n        const margin = {x: 16, y: 16};\r\n        const padding = 8;\r\n\r\n        function dispatch(icon){\r\n            scope.Dispatch(signals.orthoViewSelected, icon.type);\r\n        }\r\n\r\n        for(let i = 0; i < icons.length; i++){\r\n            let icon = icons[i];\r\n\r\n            let top = i * (dimensions.y + padding) + margin.y;\r\n            let right = margin.x;\r\n            let imageURL = texturesPath + icon.url;\r\n            let style = format(\r\n                'cursor: pointer; display: block; float: right; position: absolute; background-size: 200%; background-position: 0% @%; background-image: url(\"@\"); width: @px; height: @px; right: @px; top: @px;', {\r\n                    nf: function(n){\r\n                        return Math.floor(n);\r\n                    }\r\n                }, \r\n                i / (icons.length - 1) * 100, imageURL, dimensions.x, dimensions.y, right, top);\r\n            \r\n            /** @type {HTMLDivElement} */\r\n            let div = crel('div', {style: style});\r\n            this.domElement.appendChild(div);\r\n\r\n            div.onmouseover = function(){\r\n                div.style.backgroundPositionX = '100%';\r\n            }\r\n\r\n            div.onmouseout = function(){\r\n                div.style.backgroundPositionX = '0%';\r\n            }\r\n\r\n            div.onclick = function(e){\r\n                e.preventDefault();\r\n                dispatch(icon);\r\n            };\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n    static get orthoviews(){\r\n        return orthoviews;\r\n    }\r\n}\r\n\r\nexport default DomUI;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/dom/DomUI.js","import Logger from '../utils/cik/Logger';\r\nimport BoxEntry from './box/BoxEntry';\r\nimport Dimensions from './box/Dimensions';\r\nimport LightDispatcher from './LightDispatcher';\r\nimport App from '../App';\r\nimport CargoList from '../packer/CargoList';\r\nimport CargoBoxView from '../view/CargoBoxView';\r\nimport Pool from '../utils/cik/Pool';\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nconst _cargoList = Symbol('cargoList');\r\n\r\nfunction poolNewFN(){\r\n    return new BoxEntry();\r\n}\r\n/** @param {BoxEntry} boxEntry */\r\nfunction poolResetFN(boxEntry){\r\n    return boxEntry;\r\n}\r\nvar boxEntryPool = new Pool(poolNewFN, poolResetFN);\r\n\r\nconst signals = {\r\n    show: 'show',\r\n    hide: 'hide',\r\n    insert: 'insert',\r\n    modify: 'modify',\r\n    remove: 'remove'\r\n};\r\n\r\n/** Renews entry: modify uid and color\r\n * @param {BoxEntry} boxEntry */\r\nfunction renewBoxEntry(boxEntry){\r\n    boxEntry.SetUID();\r\n    boxEntry.Description('color', CargoBoxView.GetNextColor().getHex());\r\n}\r\n\r\n/**\r\n * @typedef {Object} CargoInputParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/**\r\n * Cubic volumes entry\r\n */\r\nclass CargoInput extends LightDispatcher {\r\n\r\n    /**\r\n     * @param {CargoInputParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = params;\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Bind(value){\r\n        /** @type {App} */\r\n        let app = value;\r\n\r\n        this[_cargoList] = app.packer.cargoList;\r\n    }\r\n\r\n    /** Creates a new BoxEntry, required for inputs. (Can be reused) */\r\n    CreateBoxEntry(){\r\n        let boxEntry = new BoxEntry();\r\n        renewBoxEntry(boxEntry);\r\n        return boxEntry;\r\n    }\r\n\r\n    /** @param {string} entryUID @returns {BoxEntry} a copy of the entry if it exists */\r\n    GetEntry(entryUID){\r\n        /** @type {CargoList} */\r\n        let cargoList = this[_cargoList];\r\n        let entry = cargoList.GetEntry(entryUID);\r\n        let entryMirror = boxEntryPool.Request();\r\n        entryMirror.Copy(entry);\r\n        return entry;\r\n    }\r\n\r\n    /** @returns {Array<BoxEntry>} an array of copies of all entries */\r\n    GetEntries(){\r\n        /** @type {CargoList} */\r\n        let cargoList = this[_cargoList];\r\n        let entries = [];\r\n        cargoList.groups.forEach(value => {\r\n            let entryMirror = boxEntryPool.Request();\r\n            entryMirror.Copy(value.entry);\r\n            entries.push(entryMirror);\r\n        });\r\n\r\n        return entries;\r\n    }\r\n\r\n    /**\r\n     * Return BoxEntry objects to object pool (less memory usage)\r\n     * @param {BoxEntry | Array<BoxEntry>} objects \r\n     */\r\n    Recycle(objects){\r\n        if(objects instanceof Array){\r\n            objects.forEach( (object) => {\r\n                if(object instanceof BoxEntry) boxEntryPool.Return(object);\r\n            });\r\n        }\r\n        else if(objects instanceof BoxEntry){\r\n            boxEntryPool.Return(objects);\r\n        }\r\n    }\r\n\r\n    /** Shows/updates entry 3D display\r\n     * @param {BoxEntry} entry \r\n     * @returns {Boolean}\r\n     */\r\n    Show(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n            try{\r\n                this.Dispatch(signals.show, entry);\r\n                return true;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in CargoInput.Show, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Show, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    /** Hides entry 3D display */\r\n    Hide(){\r\n        this.Dispatch(signals.hide);\r\n    }\r\n\r\n    /** Adds a new entry and obtain its uid\r\n     * @param {BoxEntry} entry\r\n     * @returns {Number|Boolean} uid or false if error\r\n     */\r\n    Add(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n\r\n            if( Dimensions.IsVolume(entry.dimensions.Abs()) === false ){\r\n                Logger.Warn('CargoInput.Add, entry rejected, dimensions != Volume:', entry.dimensions);\r\n                return false;\r\n            }\r\n\r\n            try{\r\n                let commitedEntry = entry.Clone();\r\n                let uid = commitedEntry.SetUID();\r\n                \r\n                renewBoxEntry(entry);\r\n\r\n                this.Dispatch(signals.insert, commitedEntry);\r\n                return uid;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in CargoInput.Add, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Add, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    /** Modify an existing BoxEntry, referenced by its uid, using a modifed template\r\n     * @param {string} entryUID\r\n     * @param {BoxEntry} boxEntry\r\n     * @returns {Boolean} success\r\n     */\r\n    Modify(entryUID, boxEntry){\r\n        let existing = this.GetEntry(entryUID);\r\n        if(!existing){\r\n            Logger.Warn('CargoInput.Modify, entry not found for:', entryUID);\r\n            return false;\r\n        }\r\n\r\n        if(BoxEntry.Assert(boxEntry)){\r\n\r\n            if( Dimensions.IsVolume(boxEntry.dimensions.Abs()) === false ){\r\n                Logger.Warn('CargoInput.Modify, entry rejected, dimensions != Volume:', boxEntry);\r\n                return false;\r\n            }\r\n\r\n            try{\r\n                existing.Copy(boxEntry);\r\n\r\n                this.Dispatch(signals.modify, existing);\r\n                return true;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in CargoInput.Modify, error/entry:', error, boxEntry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Modify, entry:', boxEntry);\r\n        return false;\r\n    }\r\n\r\n    /** Removes an existing box entry\r\n     * @param {string} entryUID\r\n     * @returns {Boolean} success\r\n     */\r\n    Remove(entryUID){\r\n        \r\n        /** @type {CargoList} */\r\n        let cargoList = this[_cargoList];\r\n        let existing = cargoList.GetEntry(entryUID);\r\n        \r\n        if(!existing){\r\n            Logger.Warn('CargoInput.Remove, entry not found for:', entryUID);\r\n            return false;\r\n        }\r\n\r\n        this.Dispatch(signals.remove, existing);\r\n        return true;\r\n    }\r\n\r\n    /** Enumeration of dispatched types */\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nCargoInput.BoxEntry = BoxEntry;\r\n\r\nexport default CargoInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/CargoInput.js","import Container from \"../packer/container/Container\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport ContainerView from \"../view/ContainerView\";\r\nimport Asset from \"./assets/Asset\";\r\nimport LightDispatcher from \"./LightDispatcher\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\n/**\r\n * @typedef PackingSpaceJSON\r\n * @property {*} jsonObject.view json data\r\n * @property {Container} jsonObject.container json data\r\n */\r\n\r\nconst signals = {\r\n    containerLoaded: 'containerLoaded',\r\n    sliderValueChange: 'sliderValueChange',\r\n    sliderValueStop: 'sliderValueStop'\r\n};\r\n\r\n/**\r\n * @typedef {Object} PackingSpaceInputParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/** @param {Container} container @param {THREE.Object3D} model */\r\nfunction createContainerView(container, model, units){\r\n    let containerView;\r\n    if(model){\r\n        containerView = new ContainerView(container, model);\r\n    }\r\n    else{\r\n        containerView = ContainerView.Request(container);\r\n    }\r\n    \r\n    let padding = 60 * units;\r\n    let thickness = 2 * units;\r\n    containerView.PlatformVisibility(true, new THREE.Vector3(padding, thickness, padding));\r\n}\r\n\r\nclass PackingSpaceInput extends LightDispatcher {\r\n    /**\r\n     * @param {PackingSpaceInputParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = params;\r\n\r\n        this.packingSpace = new PackingSpace();\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Bind(value){\r\n        /** @type {App} */\r\n        let app = value;\r\n    }\r\n\r\n    /**\r\n     * Creates a dummy container, get an uid for later changes (or false on error)\r\n     * @param {Number} width\r\n     * @param {Number} length\r\n     * @param {Number} height\r\n     * @param {Number} weightCapacity\r\n     * @returns {Number|Boolean} uid or false if error\r\n     */\r\n    FromInput(width, length, height, weightCapacity){\r\n        let container = new Container();\r\n\r\n        let containingVolume = new ContainingVolume(container);\r\n            containingVolume.dimensions.Set(width, length, height);\r\n            containingVolume.weightCapacity = weightCapacity;\r\n\r\n        container.Add(containingVolume);\r\n\r\n        let units = this.params.ux.params.units;\r\n        createContainerView(container, null, units);\r\n\r\n        this.packingSpace.AddContainer(container);\r\n        \r\n        this.Dispatch(signals.containerLoaded, container);\r\n        return container.uid;\r\n    }\r\n\r\n    /**\r\n     * Load packing config, get an uid for later changes (or false on error)\r\n     * @param {PackingSpaceJSON} jsonObject \r\n     * @returns {Number|Boolean} uid or false if error\r\n     */\r\n    Load(jsonObject){\r\n\r\n        /** @type {PackingSpaceJSON} jsonObject */\r\n        let data;\r\n        try{\r\n            data = typeof jsonObject === 'string' ? JSON.parse(jsonObject) : jsonObject;\r\n        }\r\n        catch(error){\r\n            Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject:', error, jsonObject);\r\n            return false;\r\n        }\r\n\r\n        if(data.container){\r\n            let container;\r\n            try{\r\n                container = Container.FromJSON(data.container);\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject.container:', error, data.container);\r\n                return false;\r\n            }\r\n\r\n            if(!container.uid) container.SetUID();\r\n            let uid = container.uid;\r\n            \r\n            let model;\r\n            if(data.view){\r\n                try{\r\n                    model = Asset.FromJSON(data.view);\r\n                }\r\n                catch(error){\r\n                    Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject.view:', error, data.view);\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            let units = this.params.ux.params.units;\r\n            createContainerView(container, model, units);\r\n\r\n            this.packingSpace.AddContainer(container);\r\n\r\n            this.Dispatch(signals.containerLoaded, container);\r\n            return uid;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** Enumeration of dispatched types */\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default PackingSpaceInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackingSpaceInput.js","import LightDispatcher from \"./LightDispatcher\";\r\nimport Packer from \"../packer/Packer\";\r\nimport Utils from \"../utils/cik/Utils\";\r\n\r\n/** @typedef {import('../packer/Packer').SolverParams} SolverParams */\r\n\r\n/** @typedef {import('../packer/Packer').CUBParams} CUBParams */\r\n\r\nclass ResultSpace{\r\n    /** @param {string} uid */\r\n    constructor(uid){\r\n        this.uid = uid;\r\n    }\r\n}\r\n\r\nclass ResultEntry{\r\n    /** @param {string} uid @param {ResultSpace} space @param {Number} quantity */\r\n    constructor(uid, space, quantity){\r\n        this.uid = uid;\r\n        this.space = space;\r\n        this.quantity = quantity || 0;\r\n    }\r\n}\r\n\r\nclass PackingResult{\r\n    constructor(){\r\n        /** @type {Array<ResultSpace>} */\r\n        this.packingSpaces = [];\r\n        /** @type {Array<ResultEntry>} */\r\n        this.packed = [];\r\n        /** @type {Array<ResultEntry>} */\r\n        this.unpacked = [];\r\n\r\n        this.totalPacked = 0;\r\n        this.totalUnpacked = 0;\r\n        /** algorithm runtime in seconds */\r\n        this.solveDuration = 1;\r\n    }\r\n}\r\n\r\n/** @param {Packer.PackingResult} packingResult */\r\nfunction toInterfaceResults(packingResult){\r\n    let result = new PackingResult();\r\n    \r\n    /** @param {string} containerUID */\r\n    function getSpace(containerUID){\r\n        for(let i = 0; i < result.packingSpaces.length; i++){\r\n            if(result.packingSpaces[i].uid === containerUID){\r\n                return result.packingSpaces[i];\r\n            }\r\n        }\r\n\r\n        let ps = new ResultSpace(containerUID);\r\n        result.packingSpaces.push(ps);\r\n        return ps;\r\n    }\r\n\r\n    let totalPacked = 0,\r\n        totalUnpacked = 0;\r\n\r\n    /** @param {ResultEntry} resultEntry @param {Array<ResultEntry>} list */\r\n    function packEntry(resultEntry, list){\r\n        let isFirst = true;\r\n        for(let i = 0; i < list.length; i++){\r\n            if(list[i].uid === resultEntry.uid){\r\n                isFirst = false;\r\n                list[i].quantity ++;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(isFirst){\r\n            resultEntry.quantity = 1;\r\n            list.push(resultEntry);\r\n        }\r\n    }\r\n\r\n    packingResult.packed.forEach(p => {\r\n        let uid = p.entry.uid;\r\n        let space = getSpace(p.containingVolume.container.uid);\r\n        packEntry(new ResultEntry(uid, space), result.packed);\r\n        totalPacked++;\r\n    });\r\n\r\n    packingResult.unpacked.forEach(p => {\r\n        let uid = p.entry.uid;\r\n        let space = null;\r\n        let unpackedQuantity = p.unpackedQuantity;\r\n        result.unpacked.push(new ResultEntry(uid, space, unpackedQuantity));\r\n        totalUnpacked += unpackedQuantity;\r\n    });\r\n\r\n    result.totalPacked = totalPacked;\r\n    result.totalUnpacked = totalUnpacked;\r\n    result.solveDuration = packingResult.runtime;\r\n\r\n    return result;\r\n}\r\n\r\nconst signals = {\r\n    solveRequest: 'solveRequest',\r\n    solved: 'solved',\r\n    failed: 'failed'\r\n};\r\n\r\n/** @typedef PackerParams \r\n * @property {Number} defaultStackingFactor default = 5, multiplier for stacking capacity (capacity = weight * defaultStackingFactor) if stackingProperty is not enabled */\r\nconst defaultParams = {\r\n    defaultStackingFactor: 5\r\n};\r\n\r\n/** @type {SolverParams} */\r\nconst defaultSolverParams = {\r\n    algorithm: 'cub'\r\n};\r\n\r\nclass PackerInterface extends LightDispatcher {\r\n\r\n    /** @param {PackerParams} params */\r\n    constructor(params){\r\n        super();\r\n        \r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n    }\r\n\r\n    /** Solve packing for current cargo list in loaded packing space \r\n     * @param {SolverParams} params */\r\n    Solve(params){\r\n        params = Utils.AssignUndefined(params, defaultSolverParams);\r\n        this.Dispatch(signals.solveRequest, params);\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Notify(...args){\r\n        let value = args[0];\r\n        switch(value){\r\n            case signals.solved:\r\n                let packingResult = args[1];\r\n                let result = toInterfaceResults(packingResult);\r\n                this.Dispatch(signals.solved, result);\r\n                break;\r\n            case signals.failed:\r\n                let error = args[1];\r\n                this.Dispatch(signals.failed, error);\r\n                break;\r\n        }\r\n    }\r\n\r\n    /** Enumeration of dispatched types */\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackerInterface;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackerInterface.js","const api = require('./FreightPacker').default;\r\nwindow.FreightPacker = api;\n\n\n// WEBPACK FOOTER //\n// ./src/dev.js","import Capabilities from './api/utils/Capabilities';\r\nimport App, { AppParams } from './api/App';\r\nimport CargoInput, { CargoInputParams } from './api/components/CargoInput';\r\nimport Logger from './api/utils/cik/Logger';\r\nimport Utils from './api/utils/cik/Utils';\r\nimport PackingSpaceInput, { PackingSpaceInputParams } from './api/components/PackingSpaceInput';\r\nimport UX, { UXParams } from './api/UX';\r\nimport PackerInterface, { PackerParams } from './api/components/PackerInterface';\r\nimport LightDispatcher from './api/components/LightDispatcher';\r\nimport Constants from './api/Constants';\r\nimport Resources from './api/Resources';\r\n\r\n//#region dev\r\nconst utils = {\r\n\tTHREE: THREE,\r\n\tdat: (window.dat || require('./api/utils/cik/config/datGUIConsole').default),\r\n\tSignaler: require('./api/utils/cik/Signaler').default,\r\n\tUtils: require('./api/utils/cik/Utils').default,\r\n\tDebug: require('./api/debug/Debug').default,\r\n\tConfig: require('./api/utils/cik/config/Config').default\r\n};\r\n\r\n/** @param {FreightPacker|App} domain */\r\nfunction devSetup(domain){\r\n\tif(domain instanceof FreightPacker){\r\n\t\tlet fp = domain;\r\n\t\tglobal.fp = fp;\r\n\t\tFreightPacker.utils.Debug.api = fp;\r\n\t\tlet params = fp.params;\r\n\t\tif(params.debug) {\r\n\t\t\tLogger.active = true;\r\n\t\t\tLogger.toConsole = true;\r\n\t\t\tLogger.traceToConsole = true;\r\n\t\t}\r\n\r\n\t\t//require('./api/debug/Tester').testPool();\r\n\t\t//utils.Debug.CLPTest.Test1();\r\n\t}\r\n\r\n\tif(domain instanceof App){\r\n\t\tconst SceneSetup = require('./api/view/SceneSetup').default;\r\n\t\tlet app = domain;\r\n\t\tFreightPacker.utils.Debug.app = app;\r\n\t\tapp.sceneSetup.OnIncludingPrior(SceneSetup.signals.init, function(){\r\n\t\t\tFreightPacker.utils.Debug.Viz.SetViewParent(app.sceneSetup.sceneController.scene);\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/** @param {FreightPacker} fp */\r\nfunction auto(fp){\r\n\t\r\n}\r\n\r\n//#endregion\r\n\r\n/**\r\n * @typedef InitializationParams\r\n * @property {Boolean} debug set to false for deployment\r\n * @property {string} texturesPath url to textures directory\r\n * @property {UXParams} uxParams UX parameters\r\n * @property {PackerParams} packerParams Packer general parameters\r\n */\r\n\r\n/**\r\n * @type {InitializationParams}\r\n */\r\nconst defaultParams = {\r\n\tdebug: false\r\n};\r\n\r\nconst signals = {\r\n\tready: 'ready'\r\n};\r\n\r\nclass FreightPacker extends LightDispatcher {\r\n\t/**\r\n\t * Freight Packer API instance\r\n\t * @param {HTMLDivElement} containerDiv\r\n\t * @param {InitializationParams} params\r\n\t */\r\n\tconstructor( containerDiv, params ) {\r\n\r\n\t\tsuper();\r\n\t\tlet scope = this;\r\n\r\n\t\tthis.params = Utils.AssignUndefined(params, defaultParams);\r\n\t\tdevSetup(this);\r\n\r\n\t\tthis.ux = new UX(this.params.uxParams);\r\n\r\n\t\t/** @type {CargoInputParams} */\r\n\t\tlet cargoInputParams = {ux: this.ux};\r\n\r\n\t\t/** Handles input of: description fields (label, etc.), dimensions and constraints */\r\n\t\tthis.cargoInput = new CargoInput(cargoInputParams);\r\n\r\n\t\t/** @type {PackingSpaceInputParams} */\r\n\t\tlet packingSpaceInputParams = {ux: this.ux};\r\n\r\n\t\t/** Handles input of: packing spaces configurations and assets */\r\n\t\tthis.packingSpaceInput = new PackingSpaceInput(packingSpaceInputParams);\r\n\r\n\t\t/** Manual solving and notification */\r\n\t\tthis.packer = new PackerInterface(this.params.packerParams);\r\n\r\n\t\tlet resources = new Resources();\r\n\t\t\tresources.texturesPath = this.params.texturesPath;\r\n\r\n\t\t/** @type {AppParams} */\r\n\t\tlet appParams = {ux: this.ux, cargoInput: this.cargoInput, packingSpaceInput: this.packingSpaceInput, packerInterface: this.packer, resources: resources};\r\n\t\tlet app = new App(containerDiv, appParams);\r\n\t\t\tapp.On(App.signals.start, function(){\r\n\t\t\t\tscope.Dispatch(signals.ready);\r\n\t\t\t});\r\n\r\n\t\tdevSetup(app);\r\n\r\n\t\tif(this.params.debug){\r\n\t\t\tauto(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Check that webgl, etc are supported in this browser.\r\n\t * Will resolve if requirements are met, otherwise rejects with an error message\r\n\t * @return {Promise<Void>|Promise<string>} \r\n\t */\r\n\tstatic CheckRequirements () {\r\n\t\tlet webgl = Capabilities.IsWebGLReady();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(webgl){\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet message = 'WebGL not supported.';\r\n\t\t\t\treject(message);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/** Enumeration of dispatched types */\r\n\tstatic get signals(){\r\n\t\treturn signals;\r\n\t}\r\n\r\n\tstatic get utils(){\r\n\t\treturn utils;\r\n\t}\r\n\r\n}\r\n\r\nFreightPacker.UX = UX;\r\nFreightPacker.CargoInput = CargoInput;\r\nFreightPacker.PackingSpaceInput = PackingSpaceInput;\r\nFreightPacker.Packer = PackerInterface;\r\nFreightPacker.Constants = Constants;\r\n\r\nexport default FreightPacker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FreightPacker.js","\r\nclass Capabilities {\r\n    constructor() {\r\n      \r\n    }\r\n  \r\n    static IsWebGLReady(){\r\n        var canvas = document.createElement('canvas');\r\n        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\r\n        return gl && gl instanceof WebGLRenderingContext;\r\n    }\r\n}\r\n\r\nexport default Capabilities;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/Capabilities.js","import UpdateComponent from \"./UpdateComponent\";\r\nimport RaycastGroup from \"./RaycastGroup\";\r\n\r\nconst keypress = require('../../../../min-dependencies/lib/keypress');\r\n\r\n/**\r\n * @typedef {Object} IScreen\r\n * @property {Number} x\r\n * @property {Number} y\r\n * @property {Number} width\r\n * @property {Number} height\r\n * @property {Number} left\r\n * @property {Number} right\r\n * @property {Number} bottom\r\n * @property {Number} top\r\n */\r\n\r\n/**\r\n * @typedef {Object} DragEvent\r\n * @property {MouseEvent} mouseEvent\r\n * @property {Number} sx - Start screen x\r\n * @property {Number} sy - Start screen y\r\n * @property {Number} x - Current screen x\r\n * @property {Number} y - Current screen y\r\n * @property {Number} dx - Delta x\r\n * @property {Number} dy - Delta y\r\n * @property {Number} distance - Distance (current - start)\r\n * @property {Number} minDist - Minimum distance to raise onDrag\r\n */\r\n\r\n /** keyboard api (http://dmauro.github.io/Keypress/)\r\n * @typedef keyboard\r\n * @property {function} on\r\n * @property {function} unregister\r\n */\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst defaultKeysListen = 'abcdefghijklmnopqrtsuvwxyz'.split('').concat(['ctlr', 'shift', 'alt']);\r\n\r\nclass Input {\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} domContainer \r\n     */\r\n    constructor (domContainer){\r\n        this.enabled = true;\r\n        \r\n        var scope = this;\r\n        Object.defineProperty(this, 'camera', {\r\n            get: function(){\r\n                return scope._camera;\r\n            },\r\n            set: function(camera){\r\n                scope._camera = camera;\r\n                scope.fov = {min: 40, max: camera.fov, target: camera.fov};\r\n            }\r\n        });\r\n\r\n        this.domContainer = domContainer;\r\n\r\n        this._mouse = {x:0, y:0};\r\n        this.mouseScreen = new THREE.Vector2();\r\n        this.mouseViewport = new THREE.Vector2();\r\n        this.mouseDelta = new THREE.Vector2();\r\n        this.lastMouseDownTime = 0;\r\n        /**\r\n         * @type {IScreen}\r\n         */\r\n        this.screen = {};\r\n        this.ComputeScreen();\r\n\r\n        this.raycaster = new THREE.Raycaster();\r\n\r\n        this.clock = new THREE.Clock();\r\n        this.clock.start();\r\n\r\n        this._raycastGroups = {Update:{}, Update25:{}, Update10:{}, OnMouseDown:{}, OnDoubleClick:{}, OnMouseUp:{}, OnRightClick:{}, OnClick:{}};\r\n        this.updateComponents = [\r\n            new UpdateComponent(true, 1/25, this.Update25.bind(this)),\r\n            new UpdateComponent(true, 1/10, this.Update10.bind(this))\r\n        ];\r\n\r\n        this.fireOnce = [];\r\n\r\n        this.onMouseDown = [];\r\n        this.onMouseUp = [];\r\n        this.onRightClick = [];\r\n        this.onDoubleClick = [];\r\n        this.onClick = [];\r\n        this.onDrag = [];\r\n\r\n        /**\r\n         * @type {DragEvent}\r\n         */\r\n        this.onDragEvent = {\r\n            mouseEvent: undefined,\r\n            sx: undefined, sy: undefined,\r\n            x: 0, y: 0,\r\n            dx: 0, dy: 0,\r\n            distance: 0,\r\n            minDist: 4 // pixels \r\n        };\r\n        var onDragStatus = false;\r\n        Object.defineProperty(this.onDragEvent, '_status', {\r\n            get: function(){\r\n                return onDragStatus;\r\n            },\r\n            set: function(value){\r\n                onDragStatus = value;\r\n                this.sx = this.sy = undefined;\r\n                this.dx = this.dy = 0;\r\n            }\r\n        })\r\n\r\n        this.doubleClickTime = .2;\r\n        \r\n        this.domContainer.addEventListener('mousedown', this.OnMouseDown.bind(this));\r\n        this.domContainer.addEventListener('mouseup', this.OnMouseUp.bind(this));\r\n        this.domContainer.addEventListener('contextmenu', this.OnRightClick.bind(this));\r\n        this.domContainer.addEventListener('mousemove', this.OnMouseMove.bind(this), false);\r\n\r\n        var thisOnMouseWheel = this.OnMouseWheel.bind(this);\r\n        if (this.domContainer.addEventListener) {\r\n            this.domContainer.addEventListener(\"mousewheel\", thisOnMouseWheel, false);\r\n            this.domContainer.addEventListener(\"DOMMouseScroll\", thisOnMouseWheel, false);\r\n        }\r\n        else\r\n            this.domContainer.attachEvent(\"onmousewheel\", thisOnMouseWheel);\r\n\r\n        this.screenNeedsUpdate = true;\r\n        window.addEventListener('scroll', this.OnScroll.bind(this));\r\n\r\n        this.cameraNeedsUpdate = true;\r\n        this.onResize = [];\r\n        window.addEventListener('resize', this.OnResize.bind(this));\r\n\r\n        /**\r\n         * @type {keyboard}\r\n         */\r\n        this.keyboard = new keypress.Listener();\r\n        this.keyboard.on = this.keyboard.simple_combo;\r\n        this.keyboard.unregister = this.keyboard.unregister_combo;\r\n        this.keys = {};\r\n\r\n        //\r\n        \r\n    }\r\n\r\n    Dispose(){\r\n        // remove listeners\r\n    }\r\n\r\n    ListenKeys(keys){\r\n        if(keys === undefined) {\r\n            keys = defaultKeysListen;\r\n        }\r\n\r\n        var scope = this;\r\n        keys.forEach(key => {\r\n            scope.keys[key] = false;\r\n            scope.keyboard.register_combo({\r\n                keys: key,\r\n                prevent_repeat: true,\r\n                on_keydown: function(){\r\n                    scope.keys[key] = true;\r\n                },\r\n                on_keyup: function(){\r\n                    scope.keys[key] = false;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    ComputeScreen(){\r\n        var screen = this.domContainer.getBoundingClientRect();\r\n        this.screen.x = screen.x;\r\n        this.screen.y = screen.y;\r\n        this.screen.width = screen.width;\r\n        this.screen.height = screen.height;\r\n        this.screen.left = screen.left;\r\n        this.screen.right = screen.right;\r\n        this.screen.bottom = screen.bottom;\r\n        this.screen.top = screen.top;\r\n        \r\n        /*\r\n        var rectOffset = Utils.GetRectOffset(this.domContainer);\r\n        this.screen.x += rectOffset.x;\r\n        this.screen.left += rectOffset.x;\r\n        this.screen.y += rectOffset.y;\r\n        this.screen.top += rectOffset.y;\r\n        */\r\n    }\r\n\r\n    OnMouseDown(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                if(this._dridMouseDown !== undefined){\r\n                    this.AbortDelayedAction(this._dridMouseDown);\r\n                    this._dridMouseDown = undefined;\r\n                }\r\n                this.OnDoubleClick(mouseEvent);\r\n                return;\r\n            }\r\n\r\n            this.lastMouseDownTime = now;\r\n            this.onDragEvent._status = true;\r\n\r\n            var scope = this;\r\n            this._dridMouseDown = this.DelayedAction(\r\n                this._mouseDownDelayed = function(){\r\n                    scope._dridMouseDown = undefined;\r\n                    for(var i = 0; i < scope.onMouseDown.length; i++){\r\n                        scope.onMouseDown[i](mouseEvent);\r\n                    }\r\n                    scope.UpdateRaycast('OnMouseDown');\r\n                    scope.mouseDelta.copy(scope.mouseScreen);\r\n                }, \r\n                this.doubleClickTime * 1000\r\n            );\r\n        }\r\n    }\r\n\r\n    OnDoubleClick(mouseEvent){\r\n        for(var i = 0; i < this.onDoubleClick.length; i++){\r\n            this.onDoubleClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnDoubleClick');\r\n    }\r\n\r\n    ExecuteDelayedMD(mouseEvent){\r\n        if(this._dridMouseDown !== undefined){\r\n            this.AbortDelayedAction(this._dridMouseDown);\r\n            this._dridMouseDown = undefined;\r\n            this._mouseDownDelayed();\r\n        }\r\n    }\r\n\r\n    OnMouseUp(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                this.ExecuteDelayedMD(mouseEvent);\r\n            }\r\n            \r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            for(var i = 0; i < this.onMouseUp.length; i++){\r\n                this.onMouseUp[i](mouseEvent);\r\n            }\r\n\r\n            this.UpdateRaycast('OnMouseUp');\r\n            var d = this.mouseDelta.distanceToSquared(this.mouseScreen);\r\n            var noMouseDrag = d < 10; // pixels squared\r\n            if(noMouseDrag){\r\n                this.OnClick(mouseEvent);\r\n            }\r\n\r\n            this.onDragEvent._status = false;\r\n        }\r\n    }\r\n\r\n    OnMouseDrag(){\r\n        var p = this.onDragEvent;\r\n        if(p._status){\r\n            let m = this.mouseScreen;\r\n            if(p.sx === undefined) p.sx = p.x = m.x;\r\n            if(p.sy === undefined) p.sy = p.y = m.y;\r\n\r\n            let vx = p.x - p.sx,\r\n                vy = p.y - p.sy;\r\n            p.distance = Math.sqrt(vx * vx + vy * vy);\r\n            if(p.distance > p.minDist && \r\n                (Math.abs(p.dx) > epsilon || Math.abs(p.dy) > epsilon)\r\n            ){\r\n                for(var i = 0; i < this.onDrag.length; i++){\r\n                    this.onDrag[i](p);\r\n                }\r\n            }\r\n\r\n            p.dx = p.x - m.x;\r\n            p.dy = p.y - m.y;\r\n\r\n            p.x = m.x;\r\n            p.y = m.y;\r\n        }\r\n    }\r\n\r\n    OnClick(mouseEvent){\r\n        for(var i = 0; i < this.onClick.length; i++){\r\n            this.onClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnClick');\r\n    }\r\n\r\n    OnRightClick(mouseEvent){\r\n        //mouseEvent.preventDefault();\r\n        this.UpdateScreenAndMouse(mouseEvent);\r\n        for(var i = 0; i < this.onRightClick.length; i++){\r\n            this.onRightClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnRightClick');\r\n    }\r\n\r\n    OnMouseMove(mouseEvent){\r\n        this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n        this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        this.onDragEvent.mouseEvent = mouseEvent;\r\n        this.ExecuteDelayedMD(mouseEvent);\r\n    }\r\n\r\n    OnScroll(event){\r\n        this.screenNeedsUpdate = true;\r\n    }\r\n\r\n    OnMouseWheel(mouseEvent){\r\n        mouseEvent.preventDefault();\r\n        var delta = THREE.Math.clamp(mouseEvent.wheelDelta || -mouseEvent.detail, -1, 1);\r\n        this.fov.target = THREE.Math.clamp(this.fov.target - delta * 2., this.fov.min, this.fov.max);\r\n        this.fov.lerp = 0;\r\n    }\r\n\r\n    LerpZoom(){\r\n        this.fov.lerp += .1;\r\n        if(this.fov.lerp >= 1 || Number.isNaN(this.fov.lerp)){\r\n            return;\r\n        }\r\n        this.camera.fov += (this.fov.target - this.camera.fov) * this.fov.lerp;\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n\r\n    OnResize(event) {\r\n        this.screenNeedsUpdate = true;\r\n        this.cameraNeedsUpdate = true;\r\n    }\r\n\r\n    RemoveEventCallback(eventType, callback){\r\n        var callbacks = this[eventType];\r\n        for(var iCallback = 0; iCallback < callbacks.length; iCallback++){\r\n            if(callbacks[iCallback] === callback){\r\n                callbacks.splice(iCallback, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.UpdateScreenAndMouse();\r\n\r\n        this.FireOnce();\r\n\r\n        // Raycasts\r\n        this.UpdateRaycaster();\r\n        this.UpdateRaycast('Update');\r\n\r\n        var now = this.clock.getElapsedTime();\r\n        for(var iUpdate = 0; iUpdate < this.updateComponents.length; iUpdate++){\r\n            var updateComponent = this.updateComponents[iUpdate];\r\n            if(updateComponent.active\r\n                && (now - updateComponent.lastUpdateTime > updateComponent.interval)\r\n            ){\r\n                updateComponent.Update(now);\r\n            }\r\n        }\r\n\r\n        this.OnMouseDrag();\r\n    }\r\n\r\n    Update25(){\r\n        this.LerpZoom();\r\n        this.UpdateRaycast('Update25');\r\n    }\r\n\r\n    Update10(){\r\n        this.UpdateRaycast('Update10');\r\n    }\r\n\r\n    FireOnce(){\r\n        for(var iCallback = this.fireOnce.length; iCallback-- > 0;){\r\n            this.fireOnce[iCallback]();\r\n        }\r\n        this.fireOnce.length = 0;\r\n    }\r\n\r\n    DelayedAction(action, delay){\r\n        var drid = window.setTimeout(function(){\r\n            action();\r\n        }, delay);\r\n        return drid;\r\n    }\r\n\r\n    AbortDelayedAction(drid){\r\n        window.clearTimeout(drid);\r\n        return;\r\n    }\r\n\r\n    Repeat(action, interval){\r\n        if(this._repeats === undefined) this._repeats = [];\r\n        var drid = window.setInterval(function(){\r\n            action();\r\n        }, interval);\r\n        this._repeats.push({action:action, drid:drid});\r\n        return drid;\r\n    }\r\n\r\n    StopRepeat(action){\r\n        if(this._repeats === undefined) return;\r\n        if(typeof action === 'number'){\r\n            window.clearInterval(action);\r\n            return;\r\n        }\r\n        for(var i = 0; i < this._repeats.length; i++){\r\n            if(this._repeats[i].action === action){\r\n                window.clearInterval(this._repeats[i].drid);\r\n                this._repeats.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateScreenAndMouse(mouseEvent){\r\n        if(this.screenNeedsUpdate) {\r\n            this.ComputeScreen();\r\n            this.screenNeedsUpdate = false;\r\n        }\r\n        if(this.cameraNeedsUpdate) {\r\n            for(var i = 0; i < this.onResize.length; i++){\r\n                this.onResize[i](this.screen);\r\n            }\r\n            this.cameraNeedsUpdate = false;\r\n        }\r\n\r\n        if(mouseEvent !== undefined){\r\n            this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n            this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        }\r\n\r\n        this.mouseScreen.x = this._mouse.x;\r\n        this.mouseScreen.y = this._mouse.y;\r\n\r\n        this.mouseViewport.x = this._mouse.x / this.screen.width * 2 - 1;\r\n        this.mouseViewport.y = -this._mouse.y / this.screen.height * 2 + 1;\r\n    }\r\n\r\n    RaycastTest(objects, recursive){\r\n        this.UpdateRaycaster();\r\n        recursive = recursive !== undefined ? recursive : false;\r\n        var intersects = objects instanceof Array ? this.raycaster.intersectObjects(objects, recursive) : this.raycaster.intersectObject(objects, recursive);\r\n        if (intersects.length > 0) {\r\n            return intersects[0];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    /**\r\n     * @param {string} event Update Update25 Update10 OnMouseDown OnDoubleClick OnMouseUp OnRightClick OnClick\r\n     * @param {string} groupID \r\n     * @param {RaycastGroup} group \r\n     */\r\n    AddRaycastGroup(event, groupID, group){\r\n        if(this._raycastGroups[event][groupID] !== undefined) console.log('RaycastGroup ' + groupID + ' is being overwritten.');\r\n        this._raycastGroups[event][groupID] = group;\r\n    }\r\n\r\n    RemoveRaycastGroup(event, groupID){\r\n        delete this._raycastGroups[event][groupID];\r\n    }\r\n\r\n    UpdateRaycaster(){\r\n        this.camera.updateMatrixWorld();\r\n        this.raycaster.setFromCamera(this.mouseViewport, this.camera);\r\n    }\r\n\r\n    UpdateRaycast(event){\r\n        var raycastGroupsKeys = Object.keys(this._raycastGroups[event]);\r\n        var numRaycastGroups = raycastGroupsKeys.length;\r\n        if(numRaycastGroups > 0){\r\n            if(numRaycastGroups > 1)\r\n                raycastGroupsKeys.sort().reverse();\r\n            \r\n            for(var iGroup = 0; iGroup < numRaycastGroups; iGroup++){\r\n                var key = raycastGroupsKeys[iGroup];\r\n                this._raycastGroups[event][key].Raycast(this.raycaster);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Input;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/Input.js","// Generated by CoffeeScript 1.8.0\r\n\r\n/*\r\nCopyright 2014 David Mauro\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\nhttp://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n\r\nKeypress is a robust keyboard input capturing Javascript utility\r\nfocused on input for games.\r\n\r\nversion 2.1.3\r\n */\r\n\r\n\r\n/*\r\nCombo options available and their defaults:\r\n    keys            : []            - An array of the keys pressed together to activate combo.\r\n    count           : 0             - The number of times a counting combo has been pressed. Reset on release.\r\n    is_unordered    : false         - Unless this is set to true, the keys can be pressed down in any order.\r\n    is_counting     : false         - Makes this a counting combo (see documentation).\r\n    is_exclusive    : false         - This combo will replace other exclusive combos when true.\r\n    is_solitary     : false         - This combo will only fire if ONLY it's keys are pressed down.\r\n    is_sequence     : false         - Rather than a key combo, this is an ordered key sequence.\r\n    prevent_default : false         - Prevent default behavior for all component key keypresses.\r\n    prevent_repeat  : false         - Prevent the combo from repeating when keydown is held.\r\n    on_keydown      : null          - A function that is called when the combo is pressed.\r\n    on_keyup        : null          - A function that is called when the combo is released.\r\n    on_release      : null          - A function that is called when all keys in the combo are released.\r\n    this            : undefined     - Defines the scope for your callback functions.\r\n */\r\n\r\n(function() {\r\n  var Combo, keypress, _change_keycodes_by_browser, _compare_arrays, _compare_arrays_sorted, _convert_key_to_readable, _convert_to_shifted_key, _decide_meta_key, _factory_defaults, _filter_array, _index_of_in_array, _is_array_in_array, _is_array_in_array_sorted, _key_is_valid, _keycode_alternate_names, _keycode_dictionary, _keycode_shifted_keys, _log_error, _metakey, _modifier_event_mapping, _modifier_keys, _validate_combo,\r\n    __hasProp = {}.hasOwnProperty,\r\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\r\n\r\n  _factory_defaults = {\r\n    is_unordered: false,\r\n    is_counting: false,\r\n    is_exclusive: false,\r\n    is_solitary: false,\r\n    prevent_default: false,\r\n    prevent_repeat: false\r\n  };\r\n\r\n  _modifier_keys = [\"meta\", \"alt\", \"option\", \"ctrl\", \"shift\", \"cmd\"];\r\n\r\n  _metakey = \"ctrl\";\r\n\r\n  keypress = {};\r\n\r\n  keypress.debug = false;\r\n\r\n  Combo = (function() {\r\n    function Combo(dictionary) {\r\n      var property, value;\r\n      for (property in dictionary) {\r\n        if (!__hasProp.call(dictionary, property)) continue;\r\n        value = dictionary[property];\r\n        if (value !== false) {\r\n          this[property] = value;\r\n        }\r\n      }\r\n      this.keys = this.keys || [];\r\n      this.count = this.count || 0;\r\n    }\r\n\r\n    Combo.prototype.allows_key_repeat = function() {\r\n      return !this.prevent_repeat && typeof this.on_keydown === \"function\";\r\n    };\r\n\r\n    Combo.prototype.reset = function() {\r\n      this.count = 0;\r\n      return this.keyup_fired = null;\r\n    };\r\n\r\n    return Combo;\r\n\r\n  })();\r\n\r\n  keypress.Listener = (function() {\r\n    function Listener(element, defaults) {\r\n      var attach_handler, property, value;\r\n      if ((typeof jQuery !== \"undefined\" && jQuery !== null) && element instanceof jQuery) {\r\n        if (element.length !== 1) {\r\n          _log_error(\"Warning: your jQuery selector should have exactly one object.\");\r\n        }\r\n        element = element[0];\r\n      }\r\n      this.should_suppress_event_defaults = false;\r\n      this.should_force_event_defaults = false;\r\n      this.sequence_delay = 800;\r\n      this._registered_combos = [];\r\n      this._keys_down = [];\r\n      this._active_combos = [];\r\n      this._sequence = [];\r\n      this._sequence_timer = null;\r\n      this._prevent_capture = false;\r\n      this._defaults = defaults || {};\r\n      for (property in _factory_defaults) {\r\n        if (!__hasProp.call(_factory_defaults, property)) continue;\r\n        value = _factory_defaults[property];\r\n        this._defaults[property] = this._defaults[property] || value;\r\n      }\r\n      this.element = element || document.body;\r\n      attach_handler = function(target, event, handler) {\r\n        if (target.addEventListener) {\r\n          target.addEventListener(event, handler);\r\n        } else if (target.attachEvent) {\r\n          target.attachEvent(\"on\" + event, handler);\r\n        }\r\n        return handler;\r\n      };\r\n      this.keydown_event = attach_handler(this.element, \"keydown\", (function(_this) {\r\n        return function(e) {\r\n          e = e || window.event;\r\n          _this._receive_input(e, true);\r\n          return _this._bug_catcher(e);\r\n        };\r\n      })(this));\r\n      this.keyup_event = attach_handler(this.element, \"keyup\", (function(_this) {\r\n        return function(e) {\r\n          e = e || window.event;\r\n          return _this._receive_input(e, false);\r\n        };\r\n      })(this));\r\n      this.blur_event = attach_handler(window, \"blur\", (function(_this) {\r\n        return function() {\r\n          var key, _i, _len, _ref;\r\n          _ref = _this._keys_down;\r\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n            key = _ref[_i];\r\n            _this._key_up(key, {});\r\n          }\r\n          return _this._keys_down = [];\r\n        };\r\n      })(this));\r\n    }\r\n\r\n    Listener.prototype.destroy = function() {\r\n      var remove_handler;\r\n      remove_handler = function(target, event, handler) {\r\n        if (target.removeEventListener != null) {\r\n          return target.removeEventListener(event, handler);\r\n        } else if (target.removeEvent != null) {\r\n          return target.removeEvent(\"on\" + event, handler);\r\n        }\r\n      };\r\n      remove_handler(this.element, \"keydown\", this.keydown_event);\r\n      remove_handler(this.element, \"keyup\", this.keyup_event);\r\n      return remove_handler(window, \"blur\", this.blur_event);\r\n    };\r\n\r\n    Listener.prototype._bug_catcher = function(e) {\r\n      var _ref, _ref1;\r\n      if (_metakey === \"cmd\" && __indexOf.call(this._keys_down, \"cmd\") >= 0 && ((_ref = _convert_key_to_readable((_ref1 = e.keyCode) != null ? _ref1 : e.key)) !== \"cmd\" && _ref !== \"shift\" && _ref !== \"alt\" && _ref !== \"caps\" && _ref !== \"tab\")) {\r\n        return this._receive_input(e, false);\r\n      }\r\n    };\r\n\r\n    Listener.prototype._cmd_bug_check = function(combo_keys) {\r\n      if (_metakey === \"cmd\" && __indexOf.call(this._keys_down, \"cmd\") >= 0 && __indexOf.call(combo_keys, \"cmd\") < 0) {\r\n        return false;\r\n      }\r\n      return true;\r\n    };\r\n\r\n    Listener.prototype._prevent_default = function(e, should_prevent) {\r\n      if ((should_prevent || this.should_suppress_event_defaults) && !this.should_force_event_defaults) {\r\n        if (e.preventDefault) {\r\n          e.preventDefault();\r\n        } else {\r\n          e.returnValue = false;\r\n        }\r\n        if (e.stopPropagation) {\r\n          return e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n\r\n    Listener.prototype._get_active_combos = function(key) {\r\n      var active_combos, keys_down;\r\n      active_combos = [];\r\n      keys_down = _filter_array(this._keys_down, function(down_key) {\r\n        return down_key !== key;\r\n      });\r\n      keys_down.push(key);\r\n      this._match_combo_arrays(keys_down, (function(_this) {\r\n        return function(match) {\r\n          if (_this._cmd_bug_check(match.keys)) {\r\n            return active_combos.push(match);\r\n          }\r\n        };\r\n      })(this));\r\n      this._fuzzy_match_combo_arrays(keys_down, (function(_this) {\r\n        return function(match) {\r\n          if (__indexOf.call(active_combos, match) >= 0) {\r\n            return;\r\n          }\r\n          if (!(match.is_solitary || !_this._cmd_bug_check(match.keys))) {\r\n            return active_combos.push(match);\r\n          }\r\n        };\r\n      })(this));\r\n      return active_combos;\r\n    };\r\n\r\n    Listener.prototype._get_potential_combos = function(key) {\r\n      var combo, potentials, _i, _len, _ref;\r\n      potentials = [];\r\n      _ref = this._registered_combos;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        combo = _ref[_i];\r\n        if (combo.is_sequence) {\r\n          continue;\r\n        }\r\n        if (__indexOf.call(combo.keys, key) >= 0 && this._cmd_bug_check(combo.keys)) {\r\n          potentials.push(combo);\r\n        }\r\n      }\r\n      return potentials;\r\n    };\r\n\r\n    Listener.prototype._add_to_active_combos = function(combo) {\r\n      var active_combo, active_key, active_keys, already_replaced, combo_key, i, should_prepend, should_replace, _i, _j, _k, _len, _len1, _ref, _ref1;\r\n      should_replace = false;\r\n      should_prepend = true;\r\n      already_replaced = false;\r\n      if (__indexOf.call(this._active_combos, combo) >= 0) {\r\n        return true;\r\n      } else if (this._active_combos.length) {\r\n        for (i = _i = 0, _ref = this._active_combos.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n          active_combo = this._active_combos[i];\r\n          if (!(active_combo && active_combo.is_exclusive && combo.is_exclusive)) {\r\n            continue;\r\n          }\r\n          active_keys = active_combo.keys;\r\n          if (!should_replace) {\r\n            for (_j = 0, _len = active_keys.length; _j < _len; _j++) {\r\n              active_key = active_keys[_j];\r\n              should_replace = true;\r\n              if (__indexOf.call(combo.keys, active_key) < 0) {\r\n                should_replace = false;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (should_prepend && !should_replace) {\r\n            _ref1 = combo.keys;\r\n            for (_k = 0, _len1 = _ref1.length; _k < _len1; _k++) {\r\n              combo_key = _ref1[_k];\r\n              should_prepend = false;\r\n              if (__indexOf.call(active_keys, combo_key) < 0) {\r\n                should_prepend = true;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (should_replace) {\r\n            if (already_replaced) {\r\n              active_combo = this._active_combos.splice(i, 1)[0];\r\n              if (active_combo != null) {\r\n                active_combo.reset();\r\n              }\r\n            } else {\r\n              active_combo = this._active_combos.splice(i, 1, combo)[0];\r\n              if (active_combo != null) {\r\n                active_combo.reset();\r\n              }\r\n              already_replaced = true;\r\n            }\r\n            should_prepend = false;\r\n          }\r\n        }\r\n      }\r\n      if (should_prepend) {\r\n        this._active_combos.unshift(combo);\r\n      }\r\n      return should_replace || should_prepend;\r\n    };\r\n\r\n    Listener.prototype._remove_from_active_combos = function(combo) {\r\n      var active_combo, i, _i, _ref;\r\n      for (i = _i = 0, _ref = this._active_combos.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n        active_combo = this._active_combos[i];\r\n        if (active_combo === combo) {\r\n          combo = this._active_combos.splice(i, 1)[0];\r\n          combo.reset();\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    Listener.prototype._get_possible_sequences = function() {\r\n      var combo, i, j, match, matches, sequence, _i, _j, _k, _len, _ref, _ref1, _ref2;\r\n      matches = [];\r\n      _ref = this._registered_combos;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        combo = _ref[_i];\r\n        for (j = _j = 1, _ref1 = this._sequence.length; 1 <= _ref1 ? _j <= _ref1 : _j >= _ref1; j = 1 <= _ref1 ? ++_j : --_j) {\r\n          sequence = this._sequence.slice(-j);\r\n          if (!combo.is_sequence) {\r\n            continue;\r\n          }\r\n          if (__indexOf.call(combo.keys, \"shift\") < 0) {\r\n            sequence = _filter_array(sequence, function(key) {\r\n              return key !== \"shift\";\r\n            });\r\n            if (!sequence.length) {\r\n              continue;\r\n            }\r\n          }\r\n          for (i = _k = 0, _ref2 = sequence.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; i = 0 <= _ref2 ? ++_k : --_k) {\r\n            if (combo.keys[i] === sequence[i]) {\r\n              match = true;\r\n            } else {\r\n              match = false;\r\n              break;\r\n            }\r\n          }\r\n          if (match) {\r\n            matches.push(combo);\r\n          }\r\n        }\r\n      }\r\n      return matches;\r\n    };\r\n\r\n    Listener.prototype._add_key_to_sequence = function(key, e) {\r\n      var combo, sequence_combos, _i, _len;\r\n      this._sequence.push(key);\r\n      sequence_combos = this._get_possible_sequences();\r\n      if (sequence_combos.length) {\r\n        for (_i = 0, _len = sequence_combos.length; _i < _len; _i++) {\r\n          combo = sequence_combos[_i];\r\n          this._prevent_default(e, combo.prevent_default);\r\n        }\r\n        if (this._sequence_timer) {\r\n          clearTimeout(this._sequence_timer);\r\n        }\r\n        if (this.sequence_delay > -1) {\r\n          this._sequence_timer = setTimeout(function() {\r\n            return this._sequence = [];\r\n          }, this.sequence_delay);\r\n        }\r\n      } else {\r\n        this._sequence = [];\r\n      }\r\n    };\r\n\r\n    Listener.prototype._get_sequence = function(key) {\r\n      var combo, i, j, match, seq_key, sequence, _i, _j, _k, _len, _ref, _ref1, _ref2;\r\n      _ref = this._registered_combos;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        combo = _ref[_i];\r\n        if (!combo.is_sequence) {\r\n          continue;\r\n        }\r\n        for (j = _j = 1, _ref1 = this._sequence.length; 1 <= _ref1 ? _j <= _ref1 : _j >= _ref1; j = 1 <= _ref1 ? ++_j : --_j) {\r\n          sequence = (_filter_array(this._sequence, function(seq_key) {\r\n            if (__indexOf.call(combo.keys, \"shift\") >= 0) {\r\n              return true;\r\n            }\r\n            return seq_key !== \"shift\";\r\n          })).slice(-j);\r\n          if (combo.keys.length !== sequence.length) {\r\n            continue;\r\n          }\r\n          for (i = _k = 0, _ref2 = sequence.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; i = 0 <= _ref2 ? ++_k : --_k) {\r\n            seq_key = sequence[i];\r\n            if (__indexOf.call(combo.keys, \"shift\") < 0) {\r\n              if (seq_key === \"shift\") {\r\n                continue;\r\n              }\r\n            }\r\n            if (key === \"shift\" && __indexOf.call(combo.keys, \"shift\") < 0) {\r\n              continue;\r\n            }\r\n            if (combo.keys[i] === seq_key) {\r\n              match = true;\r\n            } else {\r\n              match = false;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (match) {\r\n          if (combo.is_exclusive) {\r\n            this._sequence = [];\r\n          }\r\n          return combo;\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n\r\n    Listener.prototype._receive_input = function(e, is_keydown) {\r\n      var key, _ref;\r\n      if (this._prevent_capture) {\r\n        if (this._keys_down.length) {\r\n          this._keys_down = [];\r\n        }\r\n        return;\r\n      }\r\n      key = _convert_key_to_readable((_ref = e.keyCode) != null ? _ref : e.key);\r\n      if (!is_keydown && !this._keys_down.length && (key === \"alt\" || key === _metakey)) {\r\n        return;\r\n      }\r\n      if (!key) {\r\n        return;\r\n      }\r\n      if (is_keydown) {\r\n        return this._key_down(key, e);\r\n      } else {\r\n        return this._key_up(key, e);\r\n      }\r\n    };\r\n\r\n    Listener.prototype._fire = function(event, combo, key_event, is_autorepeat) {\r\n      if (typeof combo[\"on_\" + event] === \"function\") {\r\n        this._prevent_default(key_event, combo[\"on_\" + event].call(combo[\"this\"], key_event, combo.count, is_autorepeat) !== true);\r\n      }\r\n      if (event === \"release\") {\r\n        combo.count = 0;\r\n      }\r\n      if (event === \"keyup\") {\r\n        return combo.keyup_fired = true;\r\n      }\r\n    };\r\n\r\n    Listener.prototype._match_combo_arrays = function(potential_match, match_handler) {\r\n      var source_combo, _i, _len, _ref;\r\n      _ref = this._registered_combos;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        source_combo = _ref[_i];\r\n        if ((!source_combo.is_unordered && _compare_arrays_sorted(potential_match, source_combo.keys)) || (source_combo.is_unordered && _compare_arrays(potential_match, source_combo.keys))) {\r\n          match_handler(source_combo);\r\n        }\r\n      }\r\n    };\r\n\r\n    Listener.prototype._fuzzy_match_combo_arrays = function(potential_match, match_handler) {\r\n      var source_combo, _i, _len, _ref;\r\n      _ref = this._registered_combos;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        source_combo = _ref[_i];\r\n        if ((!source_combo.is_unordered && _is_array_in_array_sorted(source_combo.keys, potential_match)) || (source_combo.is_unordered && _is_array_in_array(source_combo.keys, potential_match))) {\r\n          match_handler(source_combo);\r\n        }\r\n      }\r\n    };\r\n\r\n    Listener.prototype._keys_remain = function(combo) {\r\n      var key, keys_remain, _i, _len, _ref;\r\n      _ref = combo.keys;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        key = _ref[_i];\r\n        if (__indexOf.call(this._keys_down, key) >= 0) {\r\n          keys_remain = true;\r\n          break;\r\n        }\r\n      }\r\n      return keys_remain;\r\n    };\r\n\r\n    Listener.prototype._key_down = function(key, e) {\r\n      var combo, combos, event_mod, i, mod, potential, potential_combos, sequence_combo, shifted_key, _i, _j, _k, _len, _len1, _ref;\r\n      shifted_key = _convert_to_shifted_key(key, e);\r\n      if (shifted_key) {\r\n        key = shifted_key;\r\n      }\r\n      this._add_key_to_sequence(key, e);\r\n      sequence_combo = this._get_sequence(key);\r\n      if (sequence_combo) {\r\n        this._fire(\"keydown\", sequence_combo, e);\r\n      }\r\n      for (mod in _modifier_event_mapping) {\r\n        event_mod = _modifier_event_mapping[mod];\r\n        if (!e[event_mod]) {\r\n          continue;\r\n        }\r\n        if (mod === key || __indexOf.call(this._keys_down, mod) >= 0) {\r\n          continue;\r\n        }\r\n        this._keys_down.push(mod);\r\n      }\r\n      for (mod in _modifier_event_mapping) {\r\n        event_mod = _modifier_event_mapping[mod];\r\n        if (mod === key) {\r\n          continue;\r\n        }\r\n        if (__indexOf.call(this._keys_down, mod) >= 0 && !e[event_mod]) {\r\n          if (mod === \"cmd\" && _metakey !== \"cmd\") {\r\n            continue;\r\n          }\r\n          for (i = _i = 0, _ref = this._keys_down.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n            if (this._keys_down[i] === mod) {\r\n              this._keys_down.splice(i, 1);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      combos = this._get_active_combos(key);\r\n      potential_combos = this._get_potential_combos(key);\r\n      for (_j = 0, _len = combos.length; _j < _len; _j++) {\r\n        combo = combos[_j];\r\n        this._handle_combo_down(combo, potential_combos, key, e);\r\n      }\r\n      if (potential_combos.length) {\r\n        for (_k = 0, _len1 = potential_combos.length; _k < _len1; _k++) {\r\n          potential = potential_combos[_k];\r\n          this._prevent_default(e, potential.prevent_default);\r\n        }\r\n      }\r\n      if (__indexOf.call(this._keys_down, key) < 0) {\r\n        this._keys_down.push(key);\r\n      }\r\n    };\r\n\r\n    Listener.prototype._handle_combo_down = function(combo, potential_combos, key, e) {\r\n      var is_autorepeat, is_other_exclusive, potential_combo, result, _i, _len;\r\n      if (__indexOf.call(combo.keys, key) < 0) {\r\n        return false;\r\n      }\r\n      this._prevent_default(e, combo && combo.prevent_default);\r\n      is_autorepeat = false;\r\n      if (__indexOf.call(this._keys_down, key) >= 0) {\r\n        is_autorepeat = true;\r\n        if (!combo.allows_key_repeat()) {\r\n          return false;\r\n        }\r\n      }\r\n      result = this._add_to_active_combos(combo, key);\r\n      combo.keyup_fired = false;\r\n      is_other_exclusive = false;\r\n      if (combo.is_exclusive) {\r\n        for (_i = 0, _len = potential_combos.length; _i < _len; _i++) {\r\n          potential_combo = potential_combos[_i];\r\n          if (potential_combo.is_exclusive && potential_combo.keys.length > combo.keys.length) {\r\n            is_other_exclusive = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      if (!is_other_exclusive) {\r\n        if (combo.is_counting && typeof combo.on_keydown === \"function\") {\r\n          combo.count += 1;\r\n        }\r\n        if (result) {\r\n          return this._fire(\"keydown\", combo, e, is_autorepeat);\r\n        }\r\n      }\r\n    };\r\n\r\n    Listener.prototype._key_up = function(key, e) {\r\n      var active_combo, active_combos_length, combo, combos, i, sequence_combo, shifted_key, unshifted_key, _i, _j, _k, _l, _len, _len1, _len2, _ref, _ref1, _ref2, _ref3;\r\n      unshifted_key = key;\r\n      shifted_key = _convert_to_shifted_key(key, e);\r\n      if (shifted_key) {\r\n        key = shifted_key;\r\n      }\r\n      shifted_key = _keycode_shifted_keys[unshifted_key];\r\n      if (e.shiftKey) {\r\n        if (!(shifted_key && __indexOf.call(this._keys_down, shifted_key) >= 0)) {\r\n          key = unshifted_key;\r\n        }\r\n      } else {\r\n        if (!(unshifted_key && __indexOf.call(this._keys_down, unshifted_key) >= 0)) {\r\n          key = shifted_key;\r\n        }\r\n      }\r\n      sequence_combo = this._get_sequence(key);\r\n      if (sequence_combo) {\r\n        this._fire(\"keyup\", sequence_combo, e);\r\n      }\r\n      if (__indexOf.call(this._keys_down, key) < 0) {\r\n        return false;\r\n      }\r\n      for (i = _i = 0, _ref = this._keys_down.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n        if ((_ref1 = this._keys_down[i]) === key || _ref1 === shifted_key || _ref1 === unshifted_key) {\r\n          this._keys_down.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n      active_combos_length = this._active_combos.length;\r\n      combos = [];\r\n      _ref2 = this._active_combos;\r\n      for (_j = 0, _len = _ref2.length; _j < _len; _j++) {\r\n        active_combo = _ref2[_j];\r\n        if (__indexOf.call(active_combo.keys, key) >= 0) {\r\n          combos.push(active_combo);\r\n        }\r\n      }\r\n      for (_k = 0, _len1 = combos.length; _k < _len1; _k++) {\r\n        combo = combos[_k];\r\n        this._handle_combo_up(combo, e, key);\r\n      }\r\n      if (active_combos_length > 1) {\r\n        _ref3 = this._active_combos;\r\n        for (_l = 0, _len2 = _ref3.length; _l < _len2; _l++) {\r\n          active_combo = _ref3[_l];\r\n          if (active_combo === void 0 || __indexOf.call(combos, active_combo) >= 0) {\r\n            continue;\r\n          }\r\n          if (!this._keys_remain(active_combo)) {\r\n            this._remove_from_active_combos(active_combo);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    Listener.prototype._handle_combo_up = function(combo, e, key) {\r\n      var keys_down, keys_remaining;\r\n      this._prevent_default(e, combo && combo.prevent_default);\r\n      keys_remaining = this._keys_remain(combo);\r\n      if (!combo.keyup_fired) {\r\n        keys_down = this._keys_down.slice();\r\n        keys_down.push(key);\r\n        if (!combo.is_solitary || _compare_arrays(keys_down, combo.keys)) {\r\n          this._fire(\"keyup\", combo, e);\r\n          if (combo.is_counting && typeof combo.on_keyup === \"function\" && typeof combo.on_keydown !== \"function\") {\r\n            combo.count += 1;\r\n          }\r\n        }\r\n      }\r\n      if (!keys_remaining) {\r\n        this._fire(\"release\", combo, e);\r\n        this._remove_from_active_combos(combo);\r\n      }\r\n    };\r\n\r\n    Listener.prototype.simple_combo = function(keys, callback) {\r\n      return this.register_combo({\r\n        keys: keys,\r\n        on_keydown: callback\r\n      });\r\n    };\r\n\r\n    Listener.prototype.counting_combo = function(keys, count_callback) {\r\n      return this.register_combo({\r\n        keys: keys,\r\n        is_counting: true,\r\n        is_unordered: false,\r\n        on_keydown: count_callback\r\n      });\r\n    };\r\n\r\n    Listener.prototype.sequence_combo = function(keys, callback) {\r\n      return this.register_combo({\r\n        keys: keys,\r\n        on_keydown: callback,\r\n        is_sequence: true,\r\n        is_exclusive: true\r\n      });\r\n    };\r\n\r\n    Listener.prototype.register_combo = function(combo_dictionary) {\r\n      var combo, property, value, _ref;\r\n      if (typeof combo_dictionary[\"keys\"] === \"string\") {\r\n        combo_dictionary[\"keys\"] = combo_dictionary[\"keys\"].split(\" \");\r\n      }\r\n      _ref = this._defaults;\r\n      for (property in _ref) {\r\n        if (!__hasProp.call(_ref, property)) continue;\r\n        value = _ref[property];\r\n        if (combo_dictionary[property] === void 0) {\r\n          combo_dictionary[property] = value;\r\n        }\r\n      }\r\n      combo = new Combo(combo_dictionary);\r\n      if (_validate_combo(combo)) {\r\n        this._registered_combos.push(combo);\r\n        return combo;\r\n      }\r\n    };\r\n\r\n    Listener.prototype.register_many = function(combo_array) {\r\n      var combo, _i, _len, _results;\r\n      _results = [];\r\n      for (_i = 0, _len = combo_array.length; _i < _len; _i++) {\r\n        combo = combo_array[_i];\r\n        _results.push(this.register_combo(combo));\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    Listener.prototype.unregister_combo = function(keys_or_combo) {\r\n      var combo, unregister_combo, _i, _len, _ref, _results;\r\n      if (!keys_or_combo) {\r\n        return false;\r\n      }\r\n      unregister_combo = (function(_this) {\r\n        return function(combo) {\r\n          var i, _i, _ref, _results;\r\n          _results = [];\r\n          for (i = _i = 0, _ref = _this._registered_combos.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n            if (combo === _this._registered_combos[i]) {\r\n              _this._registered_combos.splice(i, 1);\r\n              break;\r\n            } else {\r\n              _results.push(void 0);\r\n            }\r\n          }\r\n          return _results;\r\n        };\r\n      })(this);\r\n      if (keys_or_combo instanceof Combo) {\r\n        return unregister_combo(keys_or_combo);\r\n      } else {\r\n        if (typeof keys_or_combo === \"string\") {\r\n          keys_or_combo = keys_or_combo.split(\" \");\r\n        }\r\n        _ref = this._registered_combos;\r\n        _results = [];\r\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n          combo = _ref[_i];\r\n          if (combo == null) {\r\n            continue;\r\n          }\r\n          if ((combo.is_unordered && _compare_arrays(keys_or_combo, combo.keys)) || (!combo.is_unordered && _compare_arrays_sorted(keys_or_combo, combo.keys))) {\r\n            _results.push(unregister_combo(combo));\r\n          } else {\r\n            _results.push(void 0);\r\n          }\r\n        }\r\n        return _results;\r\n      }\r\n    };\r\n\r\n    Listener.prototype.unregister_many = function(combo_array) {\r\n      var combo, _i, _len, _results;\r\n      _results = [];\r\n      for (_i = 0, _len = combo_array.length; _i < _len; _i++) {\r\n        combo = combo_array[_i];\r\n        _results.push(this.unregister_combo(combo));\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    Listener.prototype.get_registered_combos = function() {\r\n      return this._registered_combos;\r\n    };\r\n\r\n    Listener.prototype.reset = function() {\r\n      return this._registered_combos = [];\r\n    };\r\n\r\n    Listener.prototype.listen = function() {\r\n      return this._prevent_capture = false;\r\n    };\r\n\r\n    Listener.prototype.stop_listening = function() {\r\n      return this._prevent_capture = true;\r\n    };\r\n\r\n    Listener.prototype.get_meta_key = function() {\r\n      return _metakey;\r\n    };\r\n\r\n    return Listener;\r\n\r\n  })();\r\n\r\n  _decide_meta_key = function() {\r\n    if (navigator.userAgent.indexOf(\"Mac OS X\") !== -1) {\r\n      _metakey = \"cmd\";\r\n    }\r\n  };\r\n\r\n  _change_keycodes_by_browser = function() {\r\n    if (navigator.userAgent.indexOf(\"Opera\") !== -1) {\r\n      _keycode_dictionary[\"17\"] = \"cmd\";\r\n    }\r\n  };\r\n\r\n  _convert_key_to_readable = function(k) {\r\n    return _keycode_dictionary[k];\r\n  };\r\n\r\n  _filter_array = function(array, callback) {\r\n    var element;\r\n    if (array.filter) {\r\n      return array.filter(callback);\r\n    } else {\r\n      return (function() {\r\n        var _i, _len, _results;\r\n        _results = [];\r\n        for (_i = 0, _len = array.length; _i < _len; _i++) {\r\n          element = array[_i];\r\n          if (callback(element)) {\r\n            _results.push(element);\r\n          }\r\n        }\r\n        return _results;\r\n      })();\r\n    }\r\n  };\r\n\r\n  _compare_arrays = function(a1, a2) {\r\n    var item, _i, _len;\r\n    if (a1.length !== a2.length) {\r\n      return false;\r\n    }\r\n    for (_i = 0, _len = a1.length; _i < _len; _i++) {\r\n      item = a1[_i];\r\n      if (__indexOf.call(a2, item) >= 0) {\r\n        continue;\r\n      }\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  _compare_arrays_sorted = function(a1, a2) {\r\n    var i, _i, _ref;\r\n    if (a1.length !== a2.length) {\r\n      return false;\r\n    }\r\n    for (i = _i = 0, _ref = a1.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n      if (a1[i] !== a2[i]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  _is_array_in_array = function(a1, a2) {\r\n    var item, _i, _len;\r\n    for (_i = 0, _len = a1.length; _i < _len; _i++) {\r\n      item = a1[_i];\r\n      if (__indexOf.call(a2, item) < 0) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  _index_of_in_array = Array.prototype.indexOf || function(a, item) {\r\n    var i, _i, _ref;\r\n    for (i = _i = 0, _ref = a.length; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n      if (a[i] === item) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  };\r\n\r\n  _is_array_in_array_sorted = function(a1, a2) {\r\n    var index, item, prev, _i, _len;\r\n    prev = 0;\r\n    for (_i = 0, _len = a1.length; _i < _len; _i++) {\r\n      item = a1[_i];\r\n      index = _index_of_in_array.call(a2, item);\r\n      if (index >= prev) {\r\n        prev = index;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  _log_error = function() {\r\n    if (keypress.debug) {\r\n      return console.log.apply(console, arguments);\r\n    }\r\n  };\r\n\r\n  _key_is_valid = function(key) {\r\n    var valid, valid_key, _;\r\n    valid = false;\r\n    for (_ in _keycode_dictionary) {\r\n      valid_key = _keycode_dictionary[_];\r\n      if (key === valid_key) {\r\n        valid = true;\r\n        break;\r\n      }\r\n    }\r\n    if (!valid) {\r\n      for (_ in _keycode_shifted_keys) {\r\n        valid_key = _keycode_shifted_keys[_];\r\n        if (key === valid_key) {\r\n          valid = true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return valid;\r\n  };\r\n\r\n  _validate_combo = function(combo) {\r\n    var alt_name, i, key, mod_key, non_modifier_keys, property, validated, value, _i, _j, _k, _len, _len1, _ref, _ref1;\r\n    validated = true;\r\n    if (!combo.keys.length) {\r\n      _log_error(\"You're trying to bind a combo with no keys:\", combo);\r\n    }\r\n    for (i = _i = 0, _ref = combo.keys.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n      key = combo.keys[i];\r\n      alt_name = _keycode_alternate_names[key];\r\n      if (alt_name) {\r\n        key = combo.keys[i] = alt_name;\r\n      }\r\n      if (key === \"meta\") {\r\n        combo.keys.splice(i, 1, _metakey);\r\n      }\r\n      if (key === \"cmd\") {\r\n        _log_error(\"Warning: use the \\\"meta\\\" key rather than \\\"cmd\\\" for Windows compatibility\");\r\n      }\r\n    }\r\n    _ref1 = combo.keys;\r\n    for (_j = 0, _len = _ref1.length; _j < _len; _j++) {\r\n      key = _ref1[_j];\r\n      if (!_key_is_valid(key)) {\r\n        _log_error(\"Do not recognize the key \\\"\" + key + \"\\\"\");\r\n        validated = false;\r\n      }\r\n    }\r\n    if (__indexOf.call(combo.keys, \"meta\") >= 0 || __indexOf.call(combo.keys, \"cmd\") >= 0) {\r\n      non_modifier_keys = combo.keys.slice();\r\n      for (_k = 0, _len1 = _modifier_keys.length; _k < _len1; _k++) {\r\n        mod_key = _modifier_keys[_k];\r\n        if ((i = _index_of_in_array.call(non_modifier_keys, mod_key)) > -1) {\r\n          non_modifier_keys.splice(i, 1);\r\n        }\r\n      }\r\n      if (non_modifier_keys.length > 1) {\r\n        _log_error(\"META and CMD key combos cannot have more than 1 non-modifier keys\", combo, non_modifier_keys);\r\n        validated = false;\r\n      }\r\n    }\r\n    for (property in combo) {\r\n      value = combo[property];\r\n      if (_factory_defaults[property] === \"undefined\") {\r\n        _log_error(\"The property \" + property + \" is not a valid combo property. Your combo has still been registered.\");\r\n      }\r\n    }\r\n    return validated;\r\n  };\r\n\r\n  _convert_to_shifted_key = function(key, e) {\r\n    var k;\r\n    if (!e.shiftKey) {\r\n      return false;\r\n    }\r\n    k = _keycode_shifted_keys[key];\r\n    if (k != null) {\r\n      return k;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  _modifier_event_mapping = {\r\n    \"cmd\": \"metaKey\",\r\n    \"ctrl\": \"ctrlKey\",\r\n    \"shift\": \"shiftKey\",\r\n    \"alt\": \"altKey\"\r\n  };\r\n\r\n  _keycode_alternate_names = {\r\n    \"escape\": \"esc\",\r\n    \"control\": \"ctrl\",\r\n    \"command\": \"cmd\",\r\n    \"break\": \"pause\",\r\n    \"windows\": \"cmd\",\r\n    \"option\": \"alt\",\r\n    \"caps_lock\": \"caps\",\r\n    \"apostrophe\": \"\\'\",\r\n    \"semicolon\": \";\",\r\n    \"tilde\": \"~\",\r\n    \"accent\": \"`\",\r\n    \"scroll_lock\": \"scroll\",\r\n    \"num_lock\": \"num\"\r\n  };\r\n\r\n  _keycode_shifted_keys = {\r\n    \"/\": \"?\",\r\n    \".\": \">\",\r\n    \",\": \"<\",\r\n    \"\\'\": \"\\\"\",\r\n    \";\": \":\",\r\n    \"[\": \"{\",\r\n    \"]\": \"}\",\r\n    \"\\\\\": \"|\",\r\n    \"`\": \"~\",\r\n    \"=\": \"+\",\r\n    \"-\": \"_\",\r\n    \"1\": \"!\",\r\n    \"2\": \"@\",\r\n    \"3\": \"#\",\r\n    \"4\": \"$\",\r\n    \"5\": \"%\",\r\n    \"6\": \"^\",\r\n    \"7\": \"&\",\r\n    \"8\": \"*\",\r\n    \"9\": \"(\",\r\n    \"0\": \")\"\r\n  };\r\n\r\n  _keycode_dictionary = {\r\n    0: \"\\\\\",\r\n    8: \"backspace\",\r\n    9: \"tab\",\r\n    12: \"num\",\r\n    13: \"enter\",\r\n    16: \"shift\",\r\n    17: \"ctrl\",\r\n    18: \"alt\",\r\n    19: \"pause\",\r\n    20: \"caps\",\r\n    27: \"esc\",\r\n    32: \"space\",\r\n    33: \"pageup\",\r\n    34: \"pagedown\",\r\n    35: \"end\",\r\n    36: \"home\",\r\n    37: \"left\",\r\n    38: \"up\",\r\n    39: \"right\",\r\n    40: \"down\",\r\n    44: \"print\",\r\n    45: \"insert\",\r\n    46: \"delete\",\r\n    48: \"0\",\r\n    49: \"1\",\r\n    50: \"2\",\r\n    51: \"3\",\r\n    52: \"4\",\r\n    53: \"5\",\r\n    54: \"6\",\r\n    55: \"7\",\r\n    56: \"8\",\r\n    57: \"9\",\r\n    65: \"a\",\r\n    66: \"b\",\r\n    67: \"c\",\r\n    68: \"d\",\r\n    69: \"e\",\r\n    70: \"f\",\r\n    71: \"g\",\r\n    72: \"h\",\r\n    73: \"i\",\r\n    74: \"j\",\r\n    75: \"k\",\r\n    76: \"l\",\r\n    77: \"m\",\r\n    78: \"n\",\r\n    79: \"o\",\r\n    80: \"p\",\r\n    81: \"q\",\r\n    82: \"r\",\r\n    83: \"s\",\r\n    84: \"t\",\r\n    85: \"u\",\r\n    86: \"v\",\r\n    87: \"w\",\r\n    88: \"x\",\r\n    89: \"y\",\r\n    90: \"z\",\r\n    91: \"cmd\",\r\n    92: \"cmd\",\r\n    93: \"cmd\",\r\n    96: \"num_0\",\r\n    97: \"num_1\",\r\n    98: \"num_2\",\r\n    99: \"num_3\",\r\n    100: \"num_4\",\r\n    101: \"num_5\",\r\n    102: \"num_6\",\r\n    103: \"num_7\",\r\n    104: \"num_8\",\r\n    105: \"num_9\",\r\n    106: \"num_multiply\",\r\n    107: \"num_add\",\r\n    108: \"num_enter\",\r\n    109: \"num_subtract\",\r\n    110: \"num_decimal\",\r\n    111: \"num_divide\",\r\n    112: \"f1\",\r\n    113: \"f2\",\r\n    114: \"f3\",\r\n    115: \"f4\",\r\n    116: \"f5\",\r\n    117: \"f6\",\r\n    118: \"f7\",\r\n    119: \"f8\",\r\n    120: \"f9\",\r\n    121: \"f10\",\r\n    122: \"f11\",\r\n    123: \"f12\",\r\n    124: \"print\",\r\n    144: \"num\",\r\n    145: \"scroll\",\r\n    186: \";\",\r\n    187: \"=\",\r\n    188: \",\",\r\n    189: \"-\",\r\n    190: \".\",\r\n    191: \"/\",\r\n    192: \"`\",\r\n    219: \"[\",\r\n    220: \"\\\\\",\r\n    221: \"]\",\r\n    222: \"\\'\",\r\n    223: \"`\",\r\n    224: \"cmd\",\r\n    225: \"alt\",\r\n    57392: \"ctrl\",\r\n    63289: \"num\",\r\n    59: \";\",\r\n    61: \"=\",\r\n    173: \"-\"\r\n  };\r\n\r\n  keypress._keycode_dictionary = _keycode_dictionary;\r\n\r\n  keypress._is_array_in_array_sorted = _is_array_in_array_sorted;\r\n\r\n  _decide_meta_key();\r\n\r\n  _change_keycodes_by_browser();\r\n\r\n  if (typeof define === \"function\" && define.amd) {\r\n    define([], function() {\r\n      return keypress;\r\n    });\r\n  } else if (typeof exports !== \"undefined\" && exports !== null) {\r\n    exports.keypress = keypress;\r\n  } else {\r\n    window.keypress = keypress;\r\n  }\r\n\r\n}).call(this);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/min-dependencies/lib/keypress.js","class Quality {\r\n    constructor(callback){\r\n        this.testCallback = callback;\r\n    }\r\n\r\n    Common(quality){\r\n        //                      0       1       2       3\r\n        var composer        = [ 0,      0,      0,      1       ];\r\n        var antialias       = [ 0,      1,      1,      0       ];\r\n        var shadows         = [ 0,      0,      1,      1       ];\r\n        var renderSizeMul   = [ .5,     1,      1,      1       ];\r\n        \r\n        var result = {\r\n            composer: Boolean(composer[quality]), \r\n            antialias: Boolean(antialias[quality]),\r\n            shadows: Boolean(shadows[quality]),\r\n            renderSizeMul: renderSizeMul[quality]\r\n        };\r\n        return result;\r\n    }\r\n\r\n    OnTestComplete(quality){\r\n        var result = this.Common(quality);\r\n        this.testCallback(result);\r\n    }\r\n\r\n    PerformanceTest1(){\r\n        var quality = 2;\r\n        // Test webgl supported shader precision, see WebGLRenderer, https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\r\n        this.OnTestComplete(quality);\r\n    }\r\n\r\n}\r\n\r\nexport default Quality;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Quality.js","import Utils from \"../utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef RendererParams\r\n * @property {Boolean} antialias\r\n * @property {Boolean} shadows\r\n * @property {Boolean} shadowsAutoUpdate\r\n * @property {Number} clearColor - hex color 0xff7f00\r\n * @property {Number} renderSizeMul\r\n * @property {Boolean} composer\r\n */\r\n\r\n/** @type {RendererParams} */\r\nconst defaultParams = {\r\n    antialias: true,\r\n    shadows: true,\r\n    shadowMapType: THREE.PCFSoftShadowMap,\r\n    shadowsAutoUpdate: true,\r\n    clearColor: 0xcfcfcf,\r\n    renderSizeMul: 1,\r\n    composer: false\r\n};\r\n\r\nclass Renderer {\r\n    /**\r\n     * @param {RendererParams} params \r\n     */\r\n    constructor(params) {\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n        this.renderer = new THREE.WebGLRenderer({antialias: this.params.antialias});\r\n\r\n        this.renderer.shadowMap.enabled = this.params.shadows;\r\n        this.renderer.shadowMap.type = this.params.shadowMapType;\r\n        this.renderer.shadowMap.autoUpdate = this.params.shadowsAutoUpdate;\r\n\r\n        this.renderer.physicallyCorrectLights = true;\r\n        this.renderer.gammaInput = true;\r\n        this.renderer.gammaOutput = true;\r\n        this.renderer.toneMapping = THREE.Uncharted2ToneMapping;\r\n        this.renderer.toneMappingExposure = 1.4;\r\n        //this.renderer.toneMappingExposure = ;\r\n        \r\n        this.maxTextureSize = this.renderer.context.getParameter(this.renderer.context.MAX_TEXTURE_SIZE);\r\n        this.pixelRatio = window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1;\r\n        this.renderer.setPixelRatio(this.pixelRatio);\r\n        this.renderer.setClearColor(new THREE.Color(this.params.clearColor), 1);\r\n\r\n        this.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * this.params.renderSizeMul;\r\n            var newHeight = screen.height * this.params.renderSizeMul;\r\n            this.renderer.setSize(newWidth, newHeight);\r\n        };\r\n\r\n        this.Render = function(scene, camera){\r\n            this.renderer.render(scene, camera);\r\n        };\r\n        \r\n        this.UpdateShadowMaps = function(){\r\n            this.renderer.shadowMap.needsUpdate = true;\r\n        };\r\n\r\n        this.ResizeDomElement = function(screen){\r\n            this.renderer.domElement.style.width = Math.floor(screen.width) + 'px';\r\n            this.renderer.domElement.style.height = Math.floor(screen.height) + 'px';\r\n        };\r\n\r\n        this.AdjustCamera = function(screen, camera){\r\n            camera.aspect = screen.width / screen.height;\r\n            camera.updateProjectionMatrix();\r\n        };\r\n\r\n        this.ReconfigureViewport = function(screen, camera){\r\n            this.AdjustCamera(screen, camera);\r\n\r\n            this.ResizeRenderer(screen);\r\n            this.ResizeDomElement(screen);\r\n        };\r\n\r\n        if(this.params.composer){\r\n            Renderer.UseComposer(this);\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        this.renderer.dispose();\r\n    }\r\n\r\n    static UseComposer (sceneRenderer){\r\n        sceneRenderer.composer = new THREE.EffectComposer(sceneRenderer.renderer);\r\n        sceneRenderer.renderPass = new THREE.RenderPass(undefined, undefined);\r\n        sceneRenderer.renderPass.renderToScreen = true;\r\n        sceneRenderer.composer.addPass(sceneRenderer.renderPass);\r\n        sceneRenderer.renderPasses = [sceneRenderer.renderPass];\r\n\r\n        sceneRenderer.UseCamera = function(camera){\r\n            sceneRenderer.camera = camera;\r\n            sceneRenderer.renderPass.camera = camera;\r\n        };\r\n\r\n        sceneRenderer.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * sceneRenderer.params.renderSizeMul;\r\n            var newHeight = screen.height * sceneRenderer.params.renderSizeMul;\r\n            sceneRenderer.renderer.setSize(newWidth, newHeight);\r\n\r\n            newWidth  = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tnewHeight = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tsceneRenderer.composer.setSize( newWidth, newHeight );\r\n        };\r\n\r\n        sceneRenderer.Render = function(scene){\r\n            sceneRenderer.renderPass.scene = scene;\r\n            sceneRenderer.composer.render();\r\n        };\r\n    }\r\n}\r\n\r\nexport default Renderer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Renderer.js","/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\r\n//    Pan - right mouse, or arrow keys / touch: three finger swipe\r\n\r\nTHREE.OrbitControls = function ( object, domElement ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// Rect areas that are ignored\r\n\tthis.ignoredAreas = [];\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new THREE.Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.25;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.panningMode = THREE.ScreenSpacePanning; // alternate THREE.HorizontalPanning\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new THREE.Vector3();\r\n\t\tvar lastQuaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new THREE.Spherical();\r\n\tvar sphericalDelta = new THREE.Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new THREE.Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new THREE.Vector2();\r\n\tvar rotateEnd = new THREE.Vector2();\r\n\tvar rotateDelta = new THREE.Vector2();\r\n\r\n\tvar panStart = new THREE.Vector2();\r\n\tvar panEnd = new THREE.Vector2();\r\n\tvar panDelta = new THREE.Vector2();\r\n\r\n\tvar dollyStart = new THREE.Vector2();\r\n\tvar dollyEnd = new THREE.Vector2();\r\n\tvar dollyDelta = new THREE.Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tswitch ( scope.panningMode ) {\r\n\r\n\t\t\t\tcase THREE.ScreenSpacePanning:\r\n\r\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.HorizontalPanning:\r\n\r\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\r\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownRotate' );\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownDolly' );\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownPan' );\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveDolly' );\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMovePan' );\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( event ) {\r\n\r\n\t\t// console.log( 'handleMouseUp' );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t// console.log( 'handleMouseWheel' );\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\t//console.log( 'handleKeyDown' );\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartRotate' );\r\n\r\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartDolly' );\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyStart.set( 0, distance );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartPan' );\r\n\r\n\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveDolly' );\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMovePan' );\r\n\r\n\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( event ) {\r\n\r\n\t\t//console.log( 'handleTouchEnd' );\r\n\r\n\t}\r\n\r\n\tfunction checkIgnoredAreas( event ){\r\n\r\n\t\tvar rects = scope.ignoredAreas;\r\n\t\tfor(var i = 0; i < rects.length; i++){\r\n\t\t\t\r\n\t\t\tif(rects[i].ContainsPoint(event.clientX, event.clientY))\r\n\t\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || checkIgnoredAreas( event ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase scope.mouseButtons.ORBIT:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.ZOOM:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.domElement.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tscope.domElement.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false  || checkIgnoredAreas( event ) ) return;\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\t// one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\t// two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleTouchStartDolly( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchStartPan( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1: // one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2: // two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\twindow.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\r\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\r\n\r\nObject.defineProperties( THREE.OrbitControls.prototype, {\r\n\r\n\tcenter: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\r\n\t\t\treturn this.target;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// backward compatibility\r\n\r\n\tnoZoom: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\treturn ! this.enableZoom;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\tthis.enableZoom = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoRotate: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\treturn ! this.enableRotate;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\tthis.enableRotate = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoPan: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\treturn ! this.enablePan;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\tthis.enablePan = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoKeys: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\treturn ! this.enableKeys;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\tthis.enableKeys = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tstaticMoving: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\treturn ! this.enableDamping;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\tthis.enableDamping = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdynamicDampingFactor: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\treturn this.dampingFactor;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\tthis.dampingFactor = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.ScreenSpacePanning = 0;\r\nTHREE.HorizontalPanning = 1;\n\n\n// WEBPACK FOOTER //\n// ./src/min-dependencies/lib/three/controls/OrbitControls.js","import Controller from \"../scene/Controller\";\r\nimport Camera from \"../scene/Camera\";\r\nimport Transform from \"../scene/Transform\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport EntryInputView, { EntryInputViewParams } from \"./EntryInputView\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport SceneSetup from \"./SceneSetup\";\r\n\r\n/**\r\n * @typedef {Object} HUDViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {SceneSetup} sceneSetup\r\n * @property {HTMLElement} container\r\n */\r\n\r\n/** @type {HUDViewParams} */\r\nconst defaultParams = {};\r\n\r\n// -11.3, 23.9, 215.5\r\nconst defaultCamTRS = new Transform( new THREE.Vector3(0, 100, 800), new THREE.Euler(0, Math.PI, 0) );\r\n\r\nclass HUDView extends Controller {\r\n    /**\r\n     * @param {HUDViewParams} params \r\n     * @param {import('../scene/Camera').CameraParams} cameraParams \r\n     */\r\n    constructor(params, cameraParams){\r\n        super(params);\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        let units = this.params.ux.params.units;\r\n\r\n        this.cameraController = new Camera(cameraParams);\r\n\r\n        this.cameraTransform = defaultCamTRS.Clone();\r\n        this.cameraTransform.position.multiplyScalar(units);\r\n        this.cameraTransform.Apply(this.cameraController);\r\n        this.cameraController.camera.updateMatrixWorld();\r\n        this.cameraController.OrbitControls(this.params.container);\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n        this.cameraController.Hold();\r\n\r\n        //var gridHelper = new THREE.GridHelper(100 * units, 20);\r\n        //this.AddDefault(gridHelper);\r\n\r\n        /** @type {EntryInputViewParams} */\r\n        let entryInputViewParams = {ux: this.params.ux, sceneSetup: this.params.sceneSetup, scaleFigure: this.params.ux.params.scaleRefFigure};\r\n        this.entryInputView = new EntryInputView(entryInputViewParams);\r\n        this.AddDefault(this.entryInputView.view);\r\n\r\n        this.lastUpdateTime = 0;\r\n\r\n        this.params.sceneSetup.input.onMouseUp.push(this.OnMouseUp.bind(this));\r\n    }\r\n\r\n    OnMouseUp(){\r\n        if(this.entryInputView.previewing){\r\n            this.entryInputView.Preview(false);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Preview(entry){\r\n        this.entryInputView.Preview(entry);\r\n    }\r\n\r\n    /** @param {Number} now */\r\n    Update(now){\r\n        let deltaTime = now - this.lastUpdateTime;\r\n        this.lastUpdateTime = now;\r\n        this.cameraController.Update();\r\n        \r\n        this.entryInputView.Update(now, deltaTime);\r\n    }\r\n}\r\n\r\nexport default HUDView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/HUDView.js","\r\nconst _position = Symbol('position');\r\nconst _rotation = Symbol('rotation');\r\n\r\nclass Transform {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} position \r\n     * @param {THREE.Euler} rotation \r\n     */\r\n    constructor(position, rotation){\r\n        this[_position] = position || new THREE.Vector3();\r\n        this[_rotation] = rotation || new THREE.Euler();\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get position(){\r\n        return this[_position];\r\n    }\r\n\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Euler}\r\n     */\r\n    get rotation(){\r\n        return this[_rotation];\r\n    }\r\n\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Object3D} target \r\n     */\r\n    Apply(target){\r\n        target.position.copy(this[_position]);\r\n        target.rotation.copy(this[_rotation]);\r\n    }\r\n\r\n    Clone(){\r\n        var transform = new Transform(this[_position].clone(), this[_rotation].clone());\r\n        return transform;\r\n    }\r\n}\r\n\r\nexport default Transform;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Transform.js","import Logger from \"../../utils/cik/Logger\";\r\n\r\nconst _enabled = Symbol('enabled');\r\n\r\nclass PackingProperty {\r\n    constructor(){\r\n        this[_enabled] = false;\r\n    }\r\n\r\n    /** @returns {Boolean} Is property enabled */\r\n    get enabled(){ return this[_enabled]; }\r\n    set enabled(value){\r\n        this[_enabled] = value;\r\n    }\r\n\r\n    Reset(){\r\n        this.enabled = false;\r\n    }\r\n\r\n    /**\r\n     * @param {PackingProperty} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('PackingProperty.Clone is not implemented');\r\n    }\r\n\r\n    static Assert(prop){\r\n        return prop instanceof PackingProperty;\r\n    }\r\n}\r\n\r\nclass StackingProperty extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n\r\n        /** Maximum stacking capacity (weight) */\r\n        this.capacity = Number.MAX_SAFE_INTEGER;\r\n    }\r\n\r\n    Reset(){\r\n        super.Reset();\r\n        this.capacity = Number.MAX_SAFE_INTEGER;\r\n    }\r\n\r\n    /**\r\n     * @param {StackingProperty} prop \r\n     */\r\n    Copy(prop){\r\n        super.Copy(prop);\r\n        this.capacity = prop.capacity;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new StackingProperty();\r\n        prop.Copy(this);\r\n        return prop;\r\n    }\r\n}\r\n\r\nclass Constraint extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    Copy(prop){\r\n        super.Copy(prop);\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('Constraint.Clone is not implemented');\r\n    }\r\n}\r\n\r\nconst orientations = { xyz: 'xyz', zyx: 'zyx', yxz: 'yxz', yzx: 'yzx', zxy: 'zxy', xzy: 'xzy' };\r\nconst _allowedOrientations = Symbol('allowedOrientations');\r\nclass RotationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    /** Enables each orientation enumeration in array\r\n     * @param {Array<orientations>} value */\r\n    set allowedOrientations(value){\r\n        this[_allowedOrientations] = value;\r\n    }\r\n    get allowedOrientations(){ return this[_allowedOrientations]; }\r\n\r\n    Reset(){\r\n        super.Reset();\r\n        if(this.allowedOrientations instanceof Array) this.allowedOrientations.length = 0;\r\n    }\r\n\r\n    /** @param {Boolean} allowX @param {Boolean} allowY @param {Boolean} allowZ */\r\n    SetOrientationsByAxis(allowX, allowY, allowZ){\r\n        let allowed = this.allowedOrientations;\r\n        if(allowed) allowed.length = 0;\r\n        else allowed = [];\r\n\r\n        if(allowY){\r\n            allowed.push(orientations.xyz, orientations.zyx);\r\n\r\n            if(allowX) allowed.push(orientations.yzx);\r\n            if(allowZ) allowed.push(orientations.zxy);\r\n        }\r\n        if(allowX) allowed.push(orientations.xzy);\r\n        if(allowZ) allowed.push(orientations.yxz);\r\n\r\n        this.allowedOrientations = allowed;\r\n    }\r\n\r\n    /** @param {Boolean} allowWH @param {Boolean} allowLH @param {Boolean} allowWL */\r\n    SetOrientationsBySide(allowWH, allowLH, allowWL){\r\n        let allowed = this.allowedOrientations;\r\n        if(allowed) allowed.length = 0;\r\n        else allowed = [];\r\n\r\n        if(allowWH) allowed.push(orientations.yxz, orientations.yzx);\r\n        if(allowLH) allowed.push(orientations.xzy, orientations.zxy);\r\n        if(allowWL) allowed.push(orientations.xyz, orientations.zyx);\r\n\r\n        this.allowedOrientations = allowed;\r\n    }\r\n\r\n    /**\r\n     * @param {RotationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        super.Copy(prop);\r\n        this.allowedOrientations = prop.allowedOrientations instanceof Array ? prop.allowedOrientations.slice() : undefined;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new RotationConstraint();\r\n        prop.Copy(this);\r\n        return prop;\r\n    }\r\n\r\n    /** Enumerations of orientation values, do not modify directly */\r\n    static get orientations(){\r\n        return orientations;\r\n    }\r\n}\r\n\r\nclass TranslationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n\r\n        /** Should be positioned on the platform surface (on the ground) */\r\n        this.grounded = false;\r\n    }\r\n\r\n    Reset(){\r\n        super.Reset();\r\n        this.grounded = false;\r\n    }\r\n\r\n    /**\r\n     * @param {TranslationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        super.Copy(prop);\r\n        this.grounded = prop.grounded;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new TranslationConstraint();\r\n        prop.Copy(this);\r\n        return prop;\r\n    }\r\n}\r\n\r\nexport {\r\n    PackingProperty,\r\n    StackingProperty,\r\n    RotationConstraint,\r\n    TranslationConstraint\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/PackingProperty.js","\r\nconst typeofNumber = 'number';\r\n\r\n/** @param {THREE.Color} source @param {Array<THREE.Color>} colors */\r\nfunction findNearest(source, colors){\r\n    var dMin = Number.MAX_SAFE_INTEGER;\r\n    var nearest = source;\r\n    colors.forEach(color => {\r\n        let vx = color.r - source.r,\r\n            vy = color.g - source.g,\r\n            vz = color.b - source.b;\r\n        let d = vx * vx + vy * vy + vz * vz;\r\n        if(d < dMin){\r\n            dMin = d;\r\n            nearest = color;\r\n        }\r\n    });\r\n\r\n    return nearest;\r\n}\r\n\r\nvar tempColor = new THREE.Color();\r\n\r\nclass ColorTemplate{\r\n    /**\r\n     * @param {Array<string|THREE.Color>} colors \r\n     */\r\n    constructor(...colors){\r\n        /** @type {Array<THREE.Color>} */\r\n        this.colors = [];\r\n        colors.forEach(color => {\r\n            if( !(color instanceof THREE.Color) ) color = new THREE.Color(color);\r\n            this.colors.push(color);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @template T\r\n     * @param {T} target \r\n     * @returns {T}\r\n     */\r\n    Apply(target){\r\n        var scope = this;\r\n        if(typeof target === typeofNumber){\r\n            let mapColor = findNearest(tempColor.setHex(target), this.colors);\r\n            target = mapColor.getHex();\r\n        }\r\n        else if(target instanceof THREE.Color){\r\n            let mapColor = findNearest(target, this.colors);\r\n            target.copy(mapColor);\r\n        }\r\n        else if(target instanceof THREE.Material){\r\n            let color = target.color;\r\n            if(color instanceof THREE.Color){\r\n                let mapColor = findNearest(color, this.colors);\r\n                color.copy(mapColor);\r\n            }\r\n        }\r\n        else if(target instanceof THREE.Object3D){\r\n            target.traverse(function(child){\r\n                if(child instanceof THREE.Mesh){\r\n                    scope.Apply(child.material);\r\n                }\r\n            });\r\n        }\r\n        return target;\r\n    }\r\n}\r\n\r\nexport default ColorTemplate;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/ColorTemplate.js","import Tween from \"../Tween\";\r\nimport Signaler from \"../Signaler\";\r\n\r\nvar tempBox3 = new THREE.Box3();\r\nvar tempVec3 = new THREE.Vector3();\r\nvar clock = new THREE.Clock();\r\n\r\nclass TransitionController{\r\n    constructor(){\r\n\r\n    }\r\n}\r\n\r\nclass Slide extends TransitionController{\r\n    /**\r\n     * Slide from, to. ie: slideFromLeft -> from = 1 & to = 0\r\n     * @param {string} property \r\n     * @param {Number} from \r\n     * @param {Number} to \r\n     */\r\n    constructor(property, from, to){\r\n        super();\r\n\r\n        this.tween = new Tween(Tween.functions.linear, 0, 0, 0);\r\n        this.property = property;\r\n        this.from = from;\r\n        this.to = to;\r\n    }\r\n\r\n    /** @param {Transition} transition */\r\n    Init(transition){\r\n\r\n        transition.bounds.getSize(tempVec3);\r\n        let offset = tempVec3.x;\r\n        transition.bounds.getCenter(tempVec3);\r\n        offset += transition.target.position.x - tempVec3.x;\r\n\r\n        this.tween.startValue = offset * this.from;\r\n        this.tween.delta = -(offset * this.from) + offset * this.to;\r\n        this.tween.duration = transition.duration;\r\n        this.tween.onComplete = transition.OnComplete.bind(transition);\r\n\r\n        this.tween.Hook(transition.target.position, this.property);\r\n    }\r\n\r\n    Start(){\r\n        this.tween.Update(0);\r\n    }\r\n\r\n    /** @param {Number} t */\r\n    Update(t){\r\n        this.tween.Update(t);\r\n    }\r\n}\r\n\r\nconst signals = {\r\n    complete: 'complete'\r\n};\r\n\r\nconst _controller = Symbol('controller');\r\n\r\nclass Transition extends Signaler{\r\n    /**\r\n     * @param {THREE.Object3D} boundsView object to calculate bounds from\r\n     * @param {THREE.Object3D} transformView object to transform\r\n     * @param {Number} duration\r\n     */\r\n    constructor(boundsView, transformView, duration){\r\n        super();\r\n        \r\n        this.bounds = new THREE.Box3();\r\n        this.bounds.setFromObject(boundsView);\r\n\r\n        this.target = transformView;\r\n        this.duration = duration;\r\n    }\r\n\r\n    /** @param {TransitionController} value */\r\n    set controller(value){\r\n        this[_controller] = value;\r\n    }\r\n\r\n    get controller(){ return this[_controller]; }\r\n\r\n    OnComplete(){\r\n        this.Dispatch(signals.complete, this.controller);\r\n    }\r\n\r\n    Start(){\r\n        this.startTime = clock.getElapsedTime();\r\n        if(this.controller) this.controller.Start();\r\n    }\r\n\r\n    Update(){\r\n        let t = clock.getElapsedTime() - this.startTime;\r\n        if(this.controller) this.controller.Update(t);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport {\r\n    Transition, \r\n    Slide\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/transitions/Transition.js","import App from \"../App\";\r\nimport LightDispatcher from \"./LightDispatcher\";\r\nimport Logger from \"../utils/cik/Logger\";\r\n\r\nconst _app = Symbol('app');\r\n\r\nconst typeofNumber = 'number';\r\n\r\nclass PackResults {\r\n    \r\n    /** @param {App} app */\r\n    constructor(app){\r\n\r\n        this[_app] = app;\r\n    }\r\n\r\n    get animationDuration(){ \r\n        /** @type {App} */\r\n        let app = this[_app];\r\n        return app.view.packResultView.params.animationDuration;\r\n    }\r\n    set animationDuration(value){\r\n\r\n        if(typeof value !== typeofNumber){\r\n            Logger.Warn('PackResults.animationDuration error, parameter is not a number:', value);\r\n            return;\r\n        }\r\n\r\n        /** @type {App} */\r\n        let app = this[_app];\r\n        app.view.packResultView.params.animationDuration = value; \r\n    }\r\n\r\n    /** Hides stacked boxes in viewer by vertical position\r\n     * 0: None - 1: All (over y span)\r\n     * @param {Number} value\r\n     */\r\n    SliceResults(value){\r\n\r\n        if(typeof value !== typeofNumber){\r\n            Logger.Warn('PackResults.SliceResults error, parameter is not a number:', value);\r\n            return;\r\n        }\r\n\r\n        /** @type {App} */\r\n        let app = this[_app];\r\n        app.view.packResultView.Slice(value);\r\n    }\r\n\r\n}\r\n\r\nconst visualizationSignals = {\r\n    \r\n};\r\n\r\nclass Visualization extends LightDispatcher{\r\n    \r\n    /** @param {App} app */\r\n    constructor(app){\r\n        super();\r\n\r\n        this[_app] = app;\r\n\r\n        this.packResults = new PackResults(app);\r\n    }\r\n\r\n    /** Selects an entry in the scene, optionally highlighting packed instances\r\n     *  @param {string | Boolean} [entryUID] default = false (deselect) @param {Boolean} [highlightPackedInstances] default = true */\r\n    SelectEntry(entryUID, highlightPackedInstances){\r\n        /** @type {App} */\r\n        let app = this[_app];\r\n\r\n        if(entryUID && !app.packer.cargoList.GetEntry(entryUID)){\r\n            Logger.Warn('Visualization.SelectEntry failed, entry not found for:', entryUID);\r\n            return;\r\n        }\r\n\r\n        app.view.cargoListView.Select(entryUID);\r\n\r\n        if(highlightPackedInstances === undefined) highlightPackedInstances = true;\r\n        if(highlightPackedInstances || !entryUID) app.view.packResultView.SelectEntry(entryUID);\r\n    }\r\n\r\n    /** Enumeration of dispatched types */\r\n    static get signals(){\r\n        return visualizationSignals;\r\n    }\r\n}\r\n\r\nexport default Visualization;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/Visualization.js","import LightDispatcher from \"./LightDispatcher\";\r\nimport App from \"../App\";\r\nimport CargoListView from \"../view/CargoListView\";\r\nimport CargoEntry from \"./common/CargoEntry\";\r\n\r\nconst _app = Symbol('app');\r\n\r\nconst signals = {\r\n    boxEntryInteract: 'beInteract0'\r\n};\r\n\r\nclass User extends LightDispatcher{\r\n    /** @param {App} app */\r\n    constructor(app){\r\n        super();\r\n\r\n        this[_app] = app;\r\n\r\n        let scope = this;\r\n        /** @param {CargoEntry} cargoEntry */\r\n        function onCargoInteract(cargoEntry){\r\n            scope.Dispatch(signals.boxEntryInteract, cargoEntry.uid);\r\n        }\r\n\r\n        app.view.cargoListView.On(CargoListView.signals.interact, onCargoInteract);\r\n    }\r\n\r\n    /** Enumeration of dispatched types */\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default User;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/User.js","import CargoGroup from \"./CargoGroup\";\r\n\r\nvar _position = Symbol('position');\r\nvar _rotation = Symbol('rotation');\r\n\r\nclass PackingItem {\r\n    constructor(){\r\n        this[_position] = new THREE.Vector3();\r\n        this[_rotation] = new THREE.Euler();\r\n    }\r\n\r\n    /** @returns {THREE.Vector3} */\r\n    get position(){ return this[_position]; }\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /** @returns {THREE.Euler} */\r\n    get rotation(){ return this[_position]; }\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n}\r\n\r\nclass Cargo extends PackingItem {\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group\r\n     */\r\n    constructor(group){\r\n        super();\r\n\r\n        this.group = group;\r\n    }\r\n\r\n    get entry(){\r\n        return this.group.entry;\r\n    }\r\n\r\n    Clone(){\r\n        var cargo = new Cargo(this.group);\r\n        return cargo;\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'Cargo(' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nexport default Cargo;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Cargo.js","import Utils from \"../../utils/cik/Utils\";\r\nimport Asset from \"../../components/assets/Asset\";\r\n\r\n/** @typedef FloatingShelfParams @property {THREE.Vector3} padding x z for padding, y for thickness @property {Number} colorHex */\r\n/** @type {FloatingShelfParams} */\r\nconst defaultParams = {\r\n    padding: new THREE.Vector3(0, .001, 0),\r\n    colorHex: 0xffffff\r\n};\r\n\r\nvar box3 = new THREE.Box3();\r\nvar vec3 = new THREE.Vector3();\r\n\r\nclass FloatingShelf{\r\n    /** @param {THREE.Object3D} targetView @param {FloatingShelfParams} params */\r\n    constructor(targetView, params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.targetView = targetView;\r\n        this.view = new THREE.Object3D();\r\n\r\n        let planeGeom = new THREE.BoxGeometry(1, 1, 1, 1, 1, 1);\r\n        let planeMaterial = new Asset.CreateSolidMaterialMatte(this.params.colorHex);\r\n        this.platformMesh = new THREE.Mesh(planeGeom, planeMaterial);\r\n        Asset.ReceiveShadow(this.platformMesh);\r\n\r\n        this.view.add(this.platformMesh);\r\n\r\n        this.Update();\r\n    }\r\n\r\n    Update(){\r\n        box3.setFromObject(this.targetView);\r\n        const worldToLocal = new THREE.Matrix4().getInverse(this.targetView.matrixWorld);\r\n        box3.applyMatrix4(worldToLocal);\r\n        box3.getSize(vec3);\r\n        let height = vec3.y;\r\n\r\n        let padding = this.params.padding;\r\n        let thickness = Math.max(.0001, padding.y);\r\n        this.platformMesh.scale.set(Math.max(.0001, vec3.x + padding.x * 2), thickness, Math.max(.0001, vec3.z + padding.z * 2));\r\n\r\n        box3.getCenter(vec3);\r\n        this.platformMesh.position.set(vec3.x, vec3.y - height / 2 - thickness, vec3.z);\r\n    }\r\n}\r\n\r\nexport default FloatingShelf;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/FloatingShelf.js","import Utils from \"../../utils/cik/Utils\";\r\n\r\n\r\nconst cubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst outlineMaterial = new THREE.MeshBasicMaterial({side: THREE.BackSide, depthWrite:false, depthTest:true});\r\nconst boxOutlineMaterial = new THREE.MeshBasicMaterial({side: THREE.BackSide});\r\n\r\n/** @typedef OutlineParams @property {Number} color @property {Number} opacity @property {Number} offsetFactor @property {Number} offsetUnits */\r\n/** @type {OutlineParams} */\r\nconst defaultParams = {\r\n    color: 0x000000,\r\n    opacity: 1,\r\n    offsetFactor: 1,\r\n    offsetUnits: 1\r\n};\r\n\r\nvar tempBox3 = new THREE.Box3();\r\nvar tempMatrix4 = new THREE.Matrix4();\r\n\r\nclass Outline{\r\n\r\n    /** @param {OutlineParams} params */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view = new THREE.Object3D();\r\n\r\n        /** @type {Map<THREE.Object3D, THREE.Object3D>} */\r\n        this.outlines = new Map();\r\n    }\r\n\r\n    /** @param {THREE.Object3D} value */\r\n    set object3d(value){\r\n        if(!value) return this.Disable();\r\n\r\n        this.view.visible = true;\r\n\r\n        if(this.material === undefined) this.material = outlineMaterial.clone();\r\n        let material = this.material;\r\n            material.color.setHex(this.params.color);\r\n            material.opacity = THREE.Math.clamp(this.params.opacity, 0, 1);\r\n            material.transparent = true;//material.opacity < .999;\r\n            material.polygonOffset = true;\r\n            material.polygonOffsetFactor = -this.params.offsetFactor;\r\n            material.polygonOffsetUnits = this.params.offsetUnits;\r\n\r\n        let outline = this.outlines.get(value);\r\n        if(!outline){\r\n            outline = value.clone(true);\r\n            if(outline instanceof THREE.Mesh){\r\n                outline.material = material;\r\n            }\r\n            else{\r\n                outline.children.forEach(oChild => oChild.traverse(function(child){\r\n                    if(child instanceof THREE.Mesh){\r\n                        let outlineReady = child.clone();\r\n                        outlineReady.material = material;\r\n                        if(child.parent){\r\n                            // Assuming end of hierarchical tree\r\n                            child.parent.add(outlineReady);\r\n                            child.parent.remove(child);\r\n                        }\r\n                    }\r\n                }));\r\n            }\r\n\r\n            this.outlines.set(value, outline);\r\n        }\r\n\r\n        value.updateMatrixWorld();\r\n        outline.matrixWorld.copy(value.matrixWorld);\r\n\r\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\r\n        this.view.add(outline);\r\n    }\r\n\r\n    /** @param {THREE.Object3D} value */\r\n    set box(value){\r\n        if(!value) return this.Disable();\r\n\r\n        this.view.visible = true;\r\n\r\n        if(this.boxMaterial === undefined) this.boxMaterial = boxOutlineMaterial.clone();\r\n        this.boxMaterial.color.setHex(this.params.color);\r\n        this.boxMaterial.opacity = THREE.Math.clamp(this.params.opacity, 0, 1);\r\n        this.boxMaterial.transparent = this.boxMaterial.opacity < .999;\r\n\r\n        if(this.boxMesh === undefined){\r\n            this.boxMesh = new THREE.Mesh(cubeGeometry, this.boxMaterial);\r\n        }\r\n\r\n        value.updateMatrixWorld();\r\n        tempBox3.setFromObject(value);\r\n        tempBox3.getSize(this.view.scale);\r\n        this.view.scale.addScalar(this.params.offsetFactor);\r\n        tempBox3.getCenter(this.view.position);\r\n\r\n        let parent = this.view.parent;\r\n        if(parent){\r\n            parent.updateMatrixWorld();\r\n            let inverse = tempMatrix4.getInverse(parent.matrixWorld);\r\n            this.view.applyMatrix(inverse);\r\n        }\r\n\r\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\r\n        this.view.add(this.boxMesh);\r\n    }\r\n\r\n    Disable(){\r\n        this.view.visible = false;\r\n    }\r\n    \r\n}\r\n\r\nexport default Outline;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/Outline.js","/**\r\n * @author arodic / https://github.com/arodic\r\n */\r\n\r\n( function () {\r\n\r\n\t'use strict';\r\n\r\n\tvar GizmoMaterial = function ( parameters ) {\r\n\r\n\t\tTHREE.MeshBasicMaterial.call( this );\r\n\r\n\t\tthis.depthTest = false;\r\n\t\tthis.depthWrite = false;\r\n\t\tthis.side = THREE.FrontSide;\r\n\t\tthis.transparent = true;\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t\tthis.oldColor = this.color.clone();\r\n\t\tthis.oldOpacity = this.opacity;\r\n\r\n\t\tthis.highlight = function( highlighted ) {\r\n\r\n\t\t\tif ( highlighted ) {\r\n\r\n\t\t\t\tthis.color.setRGB( 1, 1, 0 );\r\n\t\t\t\tthis.opacity = 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.color.copy( this.oldColor );\r\n\t\t\t\tthis.opacity = this.oldOpacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGizmoMaterial.prototype = Object.create( THREE.MeshBasicMaterial.prototype );\r\n\tGizmoMaterial.prototype.constructor = GizmoMaterial;\r\n\r\n\r\n\tvar GizmoLineMaterial = function ( parameters ) {\r\n\r\n\t\tTHREE.LineBasicMaterial.call( this );\r\n\r\n\t\tthis.depthTest = false;\r\n\t\tthis.depthWrite = false;\r\n\t\tthis.transparent = true;\r\n\t\tthis.linewidth = 1;\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t\tthis.oldColor = this.color.clone();\r\n\t\tthis.oldOpacity = this.opacity;\r\n\r\n\t\tthis.highlight = function( highlighted ) {\r\n\r\n\t\t\tif ( highlighted ) {\r\n\r\n\t\t\t\tthis.color.setRGB( 1, 1, 0 );\r\n\t\t\t\tthis.opacity = 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.color.copy( this.oldColor );\r\n\t\t\t\tthis.opacity = this.oldOpacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGizmoLineMaterial.prototype = Object.create( THREE.LineBasicMaterial.prototype );\r\n\tGizmoLineMaterial.prototype.constructor = GizmoLineMaterial;\r\n\r\n\r\n\tvar pickerMaterial = new GizmoMaterial( { visible: false, transparent: false } );\r\n\r\n\r\n\tTHREE.TransformGizmo = function () {\r\n\r\n\t\tthis.init = function () {\r\n\r\n\t\t\tTHREE.Object3D.call( this );\r\n\r\n\t\t\tthis.handles = new THREE.Object3D();\r\n\t\t\tthis.pickers = new THREE.Object3D();\r\n\t\t\tthis.planes = new THREE.Object3D();\r\n\r\n\t\t\tthis.add( this.handles );\r\n\t\t\tthis.add( this.pickers );\r\n\t\t\tthis.add( this.planes );\r\n\r\n\t\t\t//// PLANES\r\n\r\n\t\t\tvar planeGeometry = new THREE.PlaneBufferGeometry( 50, 50, 2, 2 );\r\n\t\t\tvar planeMaterial = new THREE.MeshBasicMaterial( { visible: false, side: THREE.DoubleSide } );\r\n\r\n\t\t\tvar planes = {\r\n\t\t\t\t\"XY\":   new THREE.Mesh( planeGeometry, planeMaterial ),\r\n\t\t\t\t\"YZ\":   new THREE.Mesh( planeGeometry, planeMaterial ),\r\n\t\t\t\t\"XZ\":   new THREE.Mesh( planeGeometry, planeMaterial ),\r\n\t\t\t\t\"XYZE\": new THREE.Mesh( planeGeometry, planeMaterial )\r\n\t\t\t};\r\n\r\n\t\t\tthis.activePlane = planes[ \"XYZE\" ];\r\n\r\n\t\t\tplanes[ \"YZ\" ].rotation.set( 0, Math.PI / 2, 0 );\r\n\t\t\tplanes[ \"XZ\" ].rotation.set( - Math.PI / 2, 0, 0 );\r\n\r\n\t\t\tfor ( var i in planes ) {\r\n\r\n\t\t\t\tplanes[ i ].name = i;\r\n\t\t\t\tthis.planes.add( planes[ i ] );\r\n\t\t\t\tthis.planes[ i ] = planes[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//// HANDLES AND PICKERS\r\n\r\n\t\t\tvar setupGizmos = function( gizmoMap, parent ) {\r\n\r\n\t\t\t\tfor ( var name in gizmoMap ) {\r\n\r\n\t\t\t\t\tfor ( i = gizmoMap[ name ].length; i --; ) {\r\n\r\n\t\t\t\t\t\tvar object = gizmoMap[ name ][ i ][ 0 ];\r\n\t\t\t\t\t\tvar position = gizmoMap[ name ][ i ][ 1 ];\r\n\t\t\t\t\t\tvar rotation = gizmoMap[ name ][ i ][ 2 ];\r\n\r\n\t\t\t\t\t\tobject.name = name;\r\n\r\n\t\t\t\t\t\tif ( position ) object.position.set( position[ 0 ], position[ 1 ], position[ 2 ] );\r\n\t\t\t\t\t\tif ( rotation ) object.rotation.set( rotation[ 0 ], rotation[ 1 ], rotation[ 2 ] );\r\n\r\n\t\t\t\t\t\tparent.add( object );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\tsetupGizmos( this.handleGizmos, this.handles );\r\n\t\t\tsetupGizmos( this.pickerGizmos, this.pickers );\r\n\r\n\t\t\t// reset Transformations\r\n\r\n\t\t\tthis.traverse( function ( child ) {\r\n\r\n\t\t\t\tif ( child instanceof THREE.Mesh ) {\r\n\r\n\t\t\t\t\tchild.updateMatrix();\r\n\r\n\t\t\t\t\tvar tempGeometry = child.geometry.clone();\r\n\t\t\t\t\ttempGeometry.applyMatrix( child.matrix );\r\n\t\t\t\t\tchild.geometry = tempGeometry;\r\n\r\n\t\t\t\t\tchild.position.set( 0, 0, 0 );\r\n\t\t\t\t\tchild.rotation.set( 0, 0, 0 );\r\n\t\t\t\t\tchild.scale.set( 1, 1, 1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t};\r\n\r\n\t\tthis.highlight = function ( axis ) {\r\n\r\n\t\t\tthis.traverse( function( child ) {\r\n\r\n\t\t\t\tif ( child.material && child.material.highlight ) {\r\n\r\n\t\t\t\t\tif ( child.name === axis ) {\r\n\r\n\t\t\t\t\t\tchild.material.highlight( true );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tchild.material.highlight( false );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tTHREE.TransformGizmo.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.TransformGizmo.prototype.constructor = THREE.TransformGizmo;\r\n\r\n\tTHREE.TransformGizmo.prototype.update = function ( rotation, eye ) {\r\n\r\n\t\tvar vec1 = new THREE.Vector3( 0, 0, 0 );\r\n\t\tvar vec2 = new THREE.Vector3( 0, 1, 0 );\r\n\t\tvar lookAtMatrix = new THREE.Matrix4();\r\n\r\n\t\tthis.traverse( function( child ) {\r\n\r\n\t\t\tif ( child.name.search( \"E\" ) !== - 1 ) {\r\n\r\n\t\t\t\tchild.quaternion.setFromRotationMatrix( lookAtMatrix.lookAt( eye, vec1, vec2 ) );\r\n\r\n\t\t\t} else if ( child.name.search( \"X\" ) !== - 1 || child.name.search( \"Y\" ) !== - 1 || child.name.search( \"Z\" ) !== - 1 ) {\r\n\r\n\t\t\t\tchild.quaternion.setFromEuler( rotation );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tTHREE.TransformGizmoTranslate = function () {\r\n\r\n\t\tTHREE.TransformGizmo.call( this );\r\n\r\n\t\tvar arrowGeometry = new THREE.Geometry();\r\n\t\tvar mesh = new THREE.Mesh( new THREE.CylinderGeometry( 0, 0.05, 0.2, 12, 1, false ) );\r\n\t\tmesh.position.y = 0.5;\r\n\t\tmesh.updateMatrix();\r\n\r\n\t\tarrowGeometry.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t\tvar lineXGeometry = new THREE.BufferGeometry();\r\n\t\tlineXGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  1, 0, 0 ], 3 ) );\r\n\r\n\t\tvar lineYGeometry = new THREE.BufferGeometry();\r\n\t\tlineYGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  0, 1, 0 ], 3 ) );\r\n\r\n\t\tvar lineZGeometry = new THREE.BufferGeometry();\r\n\t\tlineZGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  0, 0, 1 ], 3 ) );\r\n\r\n\t\tthis.handleGizmos = {\r\n\r\n\t\t\tX: [\r\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xff0000 } ) ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ] ],\r\n\t\t\t\t[ new THREE.Line( lineXGeometry, new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\r\n\t\t\t],\r\n\r\n\t\t\tY: [\r\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x00ff00 } ) ), [ 0, 0.5, 0 ] ],\r\n\t\t\t\t[\tnew THREE.Line( lineYGeometry, new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\r\n\t\t\t],\r\n\r\n\t\t\tZ: [\r\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ] ],\r\n\t\t\t\t[ new THREE.Line( lineZGeometry, new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\r\n\t\t\t],\r\n\r\n\t\t\tXYZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.OctahedronGeometry( 0.1, 0 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, 0, 0 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tXY: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0xffff00, opacity: 0.25 } ) ), [ 0.15, 0.15, 0 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tYZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tXZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ] ]\r\n\t\t\t]\r\n\r\n\t\t};\r\n\r\n\t\tthis.pickerGizmos = {\r\n\r\n\t\t\tX: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0.6, 0, 0 ], [ 0, 0, - Math.PI / 2 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tY: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0, 0.6, 0 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0, 0, 0.6 ], [ Math.PI / 2, 0, 0 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tXYZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.OctahedronGeometry( 0.2, 0 ), pickerMaterial ) ]\r\n\t\t\t],\r\n\r\n\t\t\tXY: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), pickerMaterial ), [ 0.2, 0.2, 0 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tYZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), pickerMaterial ), [ 0, 0.2, 0.2 ], [ 0, Math.PI / 2, 0 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tXZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), pickerMaterial ), [ 0.2, 0, 0.2 ], [ - Math.PI / 2, 0, 0 ] ]\r\n\t\t\t]\r\n\r\n\t\t};\r\n\r\n\t\tthis.setActivePlane = function ( axis, eye ) {\r\n\r\n\t\t\tvar tempMatrix = new THREE.Matrix4();\r\n\t\t\teye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \"XY\" ].matrixWorld ) ) );\r\n\r\n\t\t\tif ( axis === \"X\" ) {\r\n\r\n\t\t\t\tthis.activePlane = this.planes[ \"XY\" ];\r\n\r\n\t\t\t\tif ( Math.abs( eye.y ) > Math.abs( eye.z ) ) this.activePlane = this.planes[ \"XZ\" ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( axis === \"Y\" ) {\r\n\r\n\t\t\t\tthis.activePlane = this.planes[ \"XY\" ];\r\n\r\n\t\t\t\tif ( Math.abs( eye.x ) > Math.abs( eye.z ) ) this.activePlane = this.planes[ \"YZ\" ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( axis === \"Z\" ) {\r\n\r\n\t\t\t\tthis.activePlane = this.planes[ \"XZ\" ];\r\n\r\n\t\t\t\tif ( Math.abs( eye.x ) > Math.abs( eye.y ) ) this.activePlane = this.planes[ \"YZ\" ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( axis === \"XYZ\" ) this.activePlane = this.planes[ \"XYZE\" ];\r\n\r\n\t\t\tif ( axis === \"XY\" ) this.activePlane = this.planes[ \"XY\" ];\r\n\r\n\t\t\tif ( axis === \"YZ\" ) this.activePlane = this.planes[ \"YZ\" ];\r\n\r\n\t\t\tif ( axis === \"XZ\" ) this.activePlane = this.planes[ \"XZ\" ];\r\n\r\n\t\t};\r\n\r\n\t\tthis.init();\r\n\r\n\t};\r\n\r\n\tTHREE.TransformGizmoTranslate.prototype = Object.create( THREE.TransformGizmo.prototype );\r\n\tTHREE.TransformGizmoTranslate.prototype.constructor = THREE.TransformGizmoTranslate;\r\n\r\n\tTHREE.TransformGizmoRotate = function () {\r\n\r\n\t\tTHREE.TransformGizmo.call( this );\r\n\r\n\t\tvar CircleGeometry = function ( radius, facing, arc ) {\r\n\r\n\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\t\tvar vertices = [];\r\n\t\t\tarc = arc ? arc : 1;\r\n\r\n\t\t\tfor ( var i = 0; i <= 64 * arc; ++ i ) {\r\n\r\n\t\t\t\tif ( facing === 'x' ) vertices.push( 0, Math.cos( i / 32 * Math.PI ) * radius, Math.sin( i / 32 * Math.PI ) * radius );\r\n\t\t\t\tif ( facing === 'y' ) vertices.push( Math.cos( i / 32 * Math.PI ) * radius, 0, Math.sin( i / 32 * Math.PI ) * radius );\r\n\t\t\t\tif ( facing === 'z' ) vertices.push( Math.sin( i / 32 * Math.PI ) * radius, Math.cos( i / 32 * Math.PI ) * radius, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( vertices, 3 ) );\r\n\t\t\treturn geometry;\r\n\r\n\t\t};\r\n\r\n\t\tthis.handleGizmos = {\r\n\r\n\t\t\tX: [\r\n\t\t\t\t[ new THREE.Line( new CircleGeometry( 1, 'x', 0.5 ), new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\r\n\t\t\t],\r\n\r\n\t\t\tY: [\r\n\t\t\t\t[ new THREE.Line( new CircleGeometry( 1, 'y', 0.5 ), new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\r\n\t\t\t],\r\n\r\n\t\t\tZ: [\r\n\t\t\t\t[ new THREE.Line( new CircleGeometry( 1, 'z', 0.5 ), new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\r\n\t\t\t],\r\n\r\n\t\t\tE: [\r\n\t\t\t\t[ new THREE.Line( new CircleGeometry( 1.25, 'z', 1 ), new GizmoLineMaterial( { color: 0xcccc00 } ) ) ]\r\n\t\t\t],\r\n\r\n\t\t\tXYZE: [\r\n\t\t\t\t[ new THREE.Line( new CircleGeometry( 1, 'z', 1 ), new GizmoLineMaterial( { color: 0x787878 } ) ) ]\r\n\t\t\t]\r\n\r\n\t\t};\r\n\r\n\t\tthis.pickerGizmos = {\r\n\r\n\t\t\tX: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.TorusBufferGeometry( 1, 0.12, 4, 12, Math.PI ), pickerMaterial ), [ 0, 0, 0 ], [ 0, - Math.PI / 2, - Math.PI / 2 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tY: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.TorusBufferGeometry( 1, 0.12, 4, 12, Math.PI ), pickerMaterial ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.TorusBufferGeometry( 1, 0.12, 4, 12, Math.PI ), pickerMaterial ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tE: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.TorusBufferGeometry( 1.25, 0.12, 2, 24 ), pickerMaterial ) ]\r\n\t\t\t],\r\n\r\n\t\t\tXYZE: [\r\n\t\t\t\t[ new THREE.Mesh() ]// TODO\r\n\t\t\t]\r\n\r\n\t\t};\r\n\r\n\t\tthis.setActivePlane = function ( axis ) {\r\n\r\n\t\t\tif ( axis === \"E\" ) this.activePlane = this.planes[ \"XYZE\" ];\r\n\r\n\t\t\tif ( axis === \"X\" ) this.activePlane = this.planes[ \"YZ\" ];\r\n\r\n\t\t\tif ( axis === \"Y\" ) this.activePlane = this.planes[ \"XZ\" ];\r\n\r\n\t\t\tif ( axis === \"Z\" ) this.activePlane = this.planes[ \"XY\" ];\r\n\r\n\t\t};\r\n\r\n\t\tthis.update = function ( rotation, eye2 ) {\r\n\r\n\t\t\tTHREE.TransformGizmo.prototype.update.apply( this, arguments );\r\n\r\n\t\t\tvar tempMatrix = new THREE.Matrix4();\r\n\t\t\tvar worldRotation = new THREE.Euler( 0, 0, 1 );\r\n\t\t\tvar tempQuaternion = new THREE.Quaternion();\r\n\t\t\tvar unitX = new THREE.Vector3( 1, 0, 0 );\r\n\t\t\tvar unitY = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar unitZ = new THREE.Vector3( 0, 0, 1 );\r\n\t\t\tvar quaternionX = new THREE.Quaternion();\r\n\t\t\tvar quaternionY = new THREE.Quaternion();\r\n\t\t\tvar quaternionZ = new THREE.Quaternion();\r\n\t\t\tvar eye = eye2.clone();\r\n\r\n\t\t\tworldRotation.copy( this.planes[ \"XY\" ].rotation );\r\n\t\t\ttempQuaternion.setFromEuler( worldRotation );\r\n\r\n\t\t\ttempMatrix.makeRotationFromQuaternion( tempQuaternion ).getInverse( tempMatrix );\r\n\t\t\teye.applyMatrix4( tempMatrix );\r\n\r\n\t\t\tthis.traverse( function( child ) {\r\n\r\n\t\t\t\ttempQuaternion.setFromEuler( worldRotation );\r\n\r\n\t\t\t\tif ( child.name === \"X\" ) {\r\n\r\n\t\t\t\t\tquaternionX.setFromAxisAngle( unitX, Math.atan2( - eye.y, eye.z ) );\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\r\n\t\t\t\t\tchild.quaternion.copy( tempQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( child.name === \"Y\" ) {\r\n\r\n\t\t\t\t\tquaternionY.setFromAxisAngle( unitY, Math.atan2( eye.x, eye.z ) );\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\r\n\t\t\t\t\tchild.quaternion.copy( tempQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( child.name === \"Z\" ) {\r\n\r\n\t\t\t\t\tquaternionZ.setFromAxisAngle( unitZ, Math.atan2( eye.y, eye.x ) );\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\r\n\t\t\t\t\tchild.quaternion.copy( tempQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t};\r\n\r\n\t\tthis.init();\r\n\r\n\t};\r\n\r\n\tTHREE.TransformGizmoRotate.prototype = Object.create( THREE.TransformGizmo.prototype );\r\n\tTHREE.TransformGizmoRotate.prototype.constructor = THREE.TransformGizmoRotate;\r\n\r\n\tTHREE.TransformGizmoScale = function () {\r\n\r\n\t\tTHREE.TransformGizmo.call( this );\r\n\r\n\t\tvar arrowGeometry = new THREE.Geometry();\r\n\t\tvar mesh = new THREE.Mesh( new THREE.BoxGeometry( 0.125, 0.125, 0.125 ) );\r\n\t\tmesh.position.y = 0.5;\r\n\t\tmesh.updateMatrix();\r\n\r\n\t\tarrowGeometry.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t\tvar lineXGeometry = new THREE.BufferGeometry();\r\n\t\tlineXGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  1, 0, 0 ], 3 ) );\r\n\r\n\t\tvar lineYGeometry = new THREE.BufferGeometry();\r\n\t\tlineYGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  0, 1, 0 ], 3 ) );\r\n\r\n\t\tvar lineZGeometry = new THREE.BufferGeometry();\r\n\t\tlineZGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  0, 0, 1 ], 3 ) );\r\n\r\n\t\tthis.handleGizmos = {\r\n\r\n\t\t\tX: [\r\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xff0000 } ) ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ] ],\r\n\t\t\t\t[ new THREE.Line( lineXGeometry, new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\r\n\t\t\t],\r\n\r\n\t\t\tY: [\r\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x00ff00 } ) ), [ 0, 0.5, 0 ] ],\r\n\t\t\t\t[ new THREE.Line( lineYGeometry, new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\r\n\t\t\t],\r\n\r\n\t\t\tZ: [\r\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ] ],\r\n\t\t\t\t[ new THREE.Line( lineZGeometry, new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\r\n\t\t\t],\r\n\r\n\t\t\tXYZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.BoxBufferGeometry( 0.125, 0.125, 0.125 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\r\n\t\t\t]\r\n\r\n\t\t};\r\n\r\n\t\tthis.pickerGizmos = {\r\n\r\n\t\t\tX: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0.6, 0, 0 ], [ 0, 0, - Math.PI / 2 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tY: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0, 0.6, 0 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0, 0, 0.6 ], [ Math.PI / 2, 0, 0 ] ]\r\n\t\t\t],\r\n\r\n\t\t\tXYZ: [\r\n\t\t\t\t[ new THREE.Mesh( new THREE.BoxBufferGeometry( 0.4, 0.4, 0.4 ), pickerMaterial ) ]\r\n\t\t\t]\r\n\r\n\t\t};\r\n\r\n\t\tthis.setActivePlane = function ( axis, eye ) {\r\n\r\n\t\t\tvar tempMatrix = new THREE.Matrix4();\r\n\t\t\teye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \"XY\" ].matrixWorld ) ) );\r\n\r\n\t\t\tif ( axis === \"X\" ) {\r\n\r\n\t\t\t\tthis.activePlane = this.planes[ \"XY\" ];\r\n\t\t\t\tif ( Math.abs( eye.y ) > Math.abs( eye.z ) ) this.activePlane = this.planes[ \"XZ\" ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( axis === \"Y\" ) {\r\n\r\n\t\t\t\tthis.activePlane = this.planes[ \"XY\" ];\r\n\t\t\t\tif ( Math.abs( eye.x ) > Math.abs( eye.z ) ) this.activePlane = this.planes[ \"YZ\" ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( axis === \"Z\" ) {\r\n\r\n\t\t\t\tthis.activePlane = this.planes[ \"XZ\" ];\r\n\t\t\t\tif ( Math.abs( eye.x ) > Math.abs( eye.y ) ) this.activePlane = this.planes[ \"YZ\" ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( axis === \"XYZ\" ) this.activePlane = this.planes[ \"XYZE\" ];\r\n\r\n\t\t};\r\n\r\n\t\tthis.init();\r\n\r\n\t};\r\n\r\n\tTHREE.TransformGizmoScale.prototype = Object.create( THREE.TransformGizmo.prototype );\r\n\tTHREE.TransformGizmoScale.prototype.constructor = THREE.TransformGizmoScale;\r\n\r\n\tTHREE.TransformControls = function ( camera, domElement ) {\r\n\r\n\t\t// TODO: Make non-uniform scale and rotate play nice in hierarchies\r\n\t\t// TODO: ADD RXYZ contol\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tdomElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t\tthis.camera = camera;\r\n\t\tthis.object = undefined;\r\n\t\tthis.visible = false;\r\n\t\tthis.translationSnap = null;\r\n\t\tthis.rotationSnap = null;\r\n\t\tthis.space = \"world\";\r\n\t\tthis.size = 1;\r\n\t\tthis.axis = null;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar _mode = \"translate\";\r\n\t\tvar _dragging = false;\r\n\t\tvar _gizmo = {\r\n\r\n\t\t\t\"translate\": new THREE.TransformGizmoTranslate(),\r\n\t\t\t\"rotate\": new THREE.TransformGizmoRotate(),\r\n\t\t\t\"scale\": new THREE.TransformGizmoScale()\r\n\t\t};\r\n\r\n\t\tfor ( var type in _gizmo ) {\r\n\r\n\t\t\tvar gizmoObj = _gizmo[ type ];\r\n\r\n\t\t\tgizmoObj.visible = ( type === _mode );\r\n\t\t\tthis.add( gizmoObj );\r\n\r\n\t\t}\r\n\r\n\t\tvar changeEvent = { type: \"change\" };\r\n\t\tvar mouseDownEvent = { type: \"mouseDown\" };\r\n\t\tvar mouseUpEvent = { type: \"mouseUp\", mode: _mode };\r\n\t\tvar objectChangeEvent = { type: \"objectChange\" };\r\n\r\n\t\tvar ray = new THREE.Raycaster();\r\n\t\tvar pointerVector = new THREE.Vector2();\r\n\r\n\t\tvar point = new THREE.Vector3();\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\tvar rotation = new THREE.Vector3();\r\n\t\tvar offsetRotation = new THREE.Vector3();\r\n\t\tvar scale = 1;\r\n\r\n\t\tvar lookAtMatrix = new THREE.Matrix4();\r\n\t\tvar eye = new THREE.Vector3();\r\n\r\n\t\tvar tempMatrix = new THREE.Matrix4();\r\n\t\tvar tempVector = new THREE.Vector3();\r\n\t\tvar tempQuaternion = new THREE.Quaternion();\r\n\t\tvar unitX = new THREE.Vector3( 1, 0, 0 );\r\n\t\tvar unitY = new THREE.Vector3( 0, 1, 0 );\r\n\t\tvar unitZ = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\tvar quaternionXYZ = new THREE.Quaternion();\r\n\t\tvar quaternionX = new THREE.Quaternion();\r\n\t\tvar quaternionY = new THREE.Quaternion();\r\n\t\tvar quaternionZ = new THREE.Quaternion();\r\n\t\tvar quaternionE = new THREE.Quaternion();\r\n\r\n\t\tvar oldPosition = new THREE.Vector3();\r\n\t\tvar oldScale = new THREE.Vector3();\r\n\t\tvar oldRotationMatrix = new THREE.Matrix4();\r\n\r\n\t\tvar parentRotationMatrix  = new THREE.Matrix4();\r\n\t\tvar parentScale = new THREE.Vector3();\r\n\r\n\t\tvar worldPosition = new THREE.Vector3();\r\n\t\tvar worldRotation = new THREE.Euler();\r\n\t\tvar worldRotationMatrix  = new THREE.Matrix4();\r\n\t\tvar camPosition = new THREE.Vector3();\r\n\t\tvar camRotation = new THREE.Euler();\r\n\r\n\t\tdomElement.addEventListener( \"mousedown\", onPointerDown, false );\r\n\t\tdomElement.addEventListener( \"touchstart\", onPointerDown, false );\r\n\r\n\t\tdomElement.addEventListener( \"mousemove\", onPointerHover, false );\r\n\t\tdomElement.addEventListener( \"touchmove\", onPointerHover, false );\r\n\r\n\t\tdomElement.addEventListener( \"mousemove\", onPointerMove, false );\r\n\t\tdomElement.addEventListener( \"touchmove\", onPointerMove, false );\r\n\r\n\t\tdomElement.addEventListener( \"mouseup\", onPointerUp, false );\r\n\t\tdomElement.addEventListener( \"mouseout\", onPointerUp, false );\r\n\t\tdomElement.addEventListener( \"touchend\", onPointerUp, false );\r\n\t\tdomElement.addEventListener( \"touchcancel\", onPointerUp, false );\r\n\t\tdomElement.addEventListener( \"touchleave\", onPointerUp, false );\r\n\r\n\t\tthis.dispose = function () {\r\n\r\n\t\t\tdomElement.removeEventListener( \"mousedown\", onPointerDown );\r\n\t\t\tdomElement.removeEventListener( \"touchstart\", onPointerDown );\r\n\r\n\t\t\tdomElement.removeEventListener( \"mousemove\", onPointerHover );\r\n\t\t\tdomElement.removeEventListener( \"touchmove\", onPointerHover );\r\n\r\n\t\t\tdomElement.removeEventListener( \"mousemove\", onPointerMove );\r\n\t\t\tdomElement.removeEventListener( \"touchmove\", onPointerMove );\r\n\r\n\t\t\tdomElement.removeEventListener( \"mouseup\", onPointerUp );\r\n\t\t\tdomElement.removeEventListener( \"mouseout\", onPointerUp );\r\n\t\t\tdomElement.removeEventListener( \"touchend\", onPointerUp );\r\n\t\t\tdomElement.removeEventListener( \"touchcancel\", onPointerUp );\r\n\t\t\tdomElement.removeEventListener( \"touchleave\", onPointerUp );\r\n\r\n\t\t};\r\n\r\n\t\tthis.attach = function ( object ) {\r\n\r\n\t\t\tthis.object = object;\r\n\t\t\tthis.visible = true;\r\n\t\t\tthis.update();\r\n\r\n\t\t};\r\n\r\n\t\tthis.detach = function () {\r\n\r\n\t\t\tthis.object = undefined;\r\n\t\t\tthis.visible = false;\r\n\t\t\tthis.axis = null;\r\n\r\n\t\t};\r\n\r\n\t\tthis.getMode = function () {\r\n\r\n\t\t\treturn _mode;\r\n\r\n\t\t};\r\n\r\n\t\tthis.setMode = function ( mode ) {\r\n\r\n\t\t\t_mode = mode ? mode : _mode;\r\n\r\n\t\t\tif ( _mode === \"scale\" ) scope.space = \"local\";\r\n\r\n\t\t\tfor ( var type in _gizmo ) _gizmo[ type ].visible = ( type === _mode );\r\n\r\n\t\t\tthis.update();\r\n\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t};\r\n\r\n\t\tthis.setTranslationSnap = function ( translationSnap ) {\r\n\r\n\t\t\tscope.translationSnap = translationSnap;\r\n\r\n\t\t};\r\n\r\n\t\tthis.setRotationSnap = function ( rotationSnap ) {\r\n\r\n\t\t\tscope.rotationSnap = rotationSnap;\r\n\r\n\t\t};\r\n\r\n\t\tthis.setSize = function ( size ) {\r\n\r\n\t\t\tscope.size = size;\r\n\t\t\tthis.update();\r\n\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t};\r\n\r\n\t\tthis.setSpace = function ( space ) {\r\n\r\n\t\t\tscope.space = space;\r\n\t\t\tthis.update();\r\n\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t};\r\n\r\n\t\tthis.update = function () {\r\n\r\n\t\t\tif ( scope.object === undefined ) return;\r\n\r\n\t\t\tscope.object.updateMatrixWorld();\r\n\t\t\tworldPosition.setFromMatrixPosition( scope.object.matrixWorld );\r\n\t\t\tworldRotation.setFromRotationMatrix( tempMatrix.extractRotation( scope.object.matrixWorld ) );\r\n\r\n\t\t\tscope.camera.updateMatrixWorld();\r\n\t\t\tcamPosition.setFromMatrixPosition( scope.camera.matrixWorld );\r\n\t\t\tcamRotation.setFromRotationMatrix( tempMatrix.extractRotation( scope.camera.matrixWorld ) );\r\n\r\n\t\t\tscale = worldPosition.distanceTo( camPosition ) / 6 * scope.size;\r\n\t\t\tthis.position.copy( worldPosition );\r\n\t\t\tthis.scale.set( scale, scale, scale );\r\n\r\n\t\t\tif ( scope.camera instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\teye.copy( camPosition ).sub( worldPosition ).normalize();\r\n\r\n\t\t\t} else if ( scope.camera instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\teye.copy( camPosition ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( scope.space === \"local\" ) {\r\n\r\n\t\t\t\t_gizmo[ _mode ].update( worldRotation, eye );\r\n\r\n\t\t\t} else if ( scope.space === \"world\" ) {\r\n\r\n\t\t\t\t_gizmo[ _mode ].update( new THREE.Euler(), eye );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gizmo[ _mode ].highlight( scope.axis );\r\n\r\n\t\t};\r\n\r\n\t\tfunction onPointerHover( event ) {\r\n\r\n\t\t\tif ( scope.object === undefined || _dragging === true || ( event.button !== undefined && event.button !== 0 ) ) return;\r\n\r\n\t\t\tvar pointer = event.changedTouches ? event.changedTouches[ 0 ] : event;\r\n\r\n\t\t\tvar intersect = intersectObjects( pointer, _gizmo[ _mode ].pickers.children );\r\n\r\n\t\t\tvar axis = null;\r\n\r\n\t\t\tif ( intersect ) {\r\n\r\n\t\t\t\taxis = intersect.object.name;\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( scope.axis !== axis ) {\r\n\r\n\t\t\t\tscope.axis = axis;\r\n\t\t\t\tscope.update();\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerDown( event ) {\r\n\r\n\t\t\tif ( scope.object === undefined || _dragging === true || ( event.button !== undefined && event.button !== 0 ) ) return;\r\n\r\n\t\t\tvar pointer = event.changedTouches ? event.changedTouches[ 0 ] : event;\r\n\r\n\t\t\tif ( pointer.button === 0 || pointer.button === undefined ) {\r\n\r\n\t\t\t\tvar intersect = intersectObjects( pointer, _gizmo[ _mode ].pickers.children );\r\n\r\n\t\t\t\tif ( intersect ) {\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.stopPropagation();\r\n\r\n\t\t\t\t\tscope.dispatchEvent( mouseDownEvent );\r\n\r\n\t\t\t\t\tscope.axis = intersect.object.name;\r\n\r\n\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\teye.copy( camPosition ).sub( worldPosition ).normalize();\r\n\r\n\t\t\t\t\t_gizmo[ _mode ].setActivePlane( scope.axis, eye );\r\n\r\n\t\t\t\t\tvar planeIntersect = intersectObjects( pointer, [ _gizmo[ _mode ].activePlane ] );\r\n\r\n\t\t\t\t\tif ( planeIntersect ) {\r\n\r\n\t\t\t\t\t\toldPosition.copy( scope.object.position );\r\n\t\t\t\t\t\toldScale.copy( scope.object.scale );\r\n\r\n\t\t\t\t\t\toldRotationMatrix.extractRotation( scope.object.matrix );\r\n\t\t\t\t\t\tworldRotationMatrix.extractRotation( scope.object.matrixWorld );\r\n\r\n\t\t\t\t\t\tparentRotationMatrix.extractRotation( scope.object.parent.matrixWorld );\r\n\t\t\t\t\t\tparentScale.setFromMatrixScale( tempMatrix.getInverse( scope.object.parent.matrixWorld ) );\r\n\r\n\t\t\t\t\t\toffset.copy( planeIntersect.point );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_dragging = true;\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerMove( event ) {\r\n\r\n\t\t\tif ( scope.object === undefined || scope.axis === null || _dragging === false || ( event.button !== undefined && event.button !== 0 ) ) return;\r\n\r\n\t\t\tvar pointer = event.changedTouches ? event.changedTouches[ 0 ] : event;\r\n\r\n\t\t\tvar planeIntersect = intersectObjects( pointer, [ _gizmo[ _mode ].activePlane ] );\r\n\r\n\t\t\tif ( planeIntersect === false ) return;\r\n\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\tpoint.copy( planeIntersect.point );\r\n\r\n\t\t\tif ( _mode === \"translate\" ) {\r\n\r\n\t\t\t\tpoint.sub( offset );\r\n\t\t\t\tpoint.multiply( parentScale );\r\n\r\n\t\t\t\tif ( scope.space === \"local\" ) {\r\n\r\n\t\t\t\t\tpoint.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\r\n\r\n\t\t\t\t\tif ( scope.axis.search( \"X\" ) === - 1 ) point.x = 0;\r\n\t\t\t\t\tif ( scope.axis.search( \"Y\" ) === - 1 ) point.y = 0;\r\n\t\t\t\t\tif ( scope.axis.search( \"Z\" ) === - 1 ) point.z = 0;\r\n\r\n\t\t\t\t\tpoint.applyMatrix4( oldRotationMatrix );\r\n\r\n\t\t\t\t\tscope.object.position.copy( oldPosition );\r\n\t\t\t\t\tscope.object.position.add( point );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( scope.space === \"world\" || scope.axis.search( \"XYZ\" ) !== - 1 ) {\r\n\r\n\t\t\t\t\tif ( scope.axis.search( \"X\" ) === - 1 ) point.x = 0;\r\n\t\t\t\t\tif ( scope.axis.search( \"Y\" ) === - 1 ) point.y = 0;\r\n\t\t\t\t\tif ( scope.axis.search( \"Z\" ) === - 1 ) point.z = 0;\r\n\r\n\t\t\t\t\tpoint.applyMatrix4( tempMatrix.getInverse( parentRotationMatrix ) );\r\n\r\n\t\t\t\t\tscope.object.position.copy( oldPosition );\r\n\t\t\t\t\tscope.object.position.add( point );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( scope.translationSnap !== null ) {\r\n\r\n\t\t\t\t\tif ( scope.space === \"local\" ) {\r\n\r\n\t\t\t\t\t\tscope.object.position.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( scope.axis.search( \"X\" ) !== - 1 ) scope.object.position.x = Math.round( scope.object.position.x / scope.translationSnap ) * scope.translationSnap;\r\n\t\t\t\t\tif ( scope.axis.search( \"Y\" ) !== - 1 ) scope.object.position.y = Math.round( scope.object.position.y / scope.translationSnap ) * scope.translationSnap;\r\n\t\t\t\t\tif ( scope.axis.search( \"Z\" ) !== - 1 ) scope.object.position.z = Math.round( scope.object.position.z / scope.translationSnap ) * scope.translationSnap;\r\n\r\n\t\t\t\t\tif ( scope.space === \"local\" ) {\r\n\r\n\t\t\t\t\t\tscope.object.position.applyMatrix4( worldRotationMatrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( _mode === \"scale\" ) {\r\n\r\n\t\t\t\tpoint.sub( offset );\r\n\t\t\t\tpoint.multiply( parentScale );\r\n\r\n\t\t\t\tif ( scope.space === \"local\" ) {\r\n\r\n\t\t\t\t\tif ( scope.axis === \"XYZ\" ) {\r\n\r\n\t\t\t\t\t\tscale = 1 + ( ( point.y ) / Math.max( oldScale.x, oldScale.y, oldScale.z ) );\r\n\r\n\t\t\t\t\t\tscope.object.scale.x = oldScale.x * scale;\r\n\t\t\t\t\t\tscope.object.scale.y = oldScale.y * scale;\r\n\t\t\t\t\t\tscope.object.scale.z = oldScale.z * scale;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tpoint.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\r\n\r\n\t\t\t\t\t\tif ( scope.axis === \"X\" ) scope.object.scale.x = oldScale.x * ( 1 + point.x / oldScale.x );\r\n\t\t\t\t\t\tif ( scope.axis === \"Y\" ) scope.object.scale.y = oldScale.y * ( 1 + point.y / oldScale.y );\r\n\t\t\t\t\t\tif ( scope.axis === \"Z\" ) scope.object.scale.z = oldScale.z * ( 1 + point.z / oldScale.z );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( _mode === \"rotate\" ) {\r\n\r\n\t\t\t\tpoint.sub( worldPosition );\r\n\t\t\t\tpoint.multiply( parentScale );\r\n\t\t\t\ttempVector.copy( offset ).sub( worldPosition );\r\n\t\t\t\ttempVector.multiply( parentScale );\r\n\r\n\t\t\t\tif ( scope.axis === \"E\" ) {\r\n\r\n\t\t\t\t\tpoint.applyMatrix4( tempMatrix.getInverse( lookAtMatrix ) );\r\n\t\t\t\t\ttempVector.applyMatrix4( tempMatrix.getInverse( lookAtMatrix ) );\r\n\r\n\t\t\t\t\trotation.set( Math.atan2( point.z, point.y ), Math.atan2( point.x, point.z ), Math.atan2( point.y, point.x ) );\r\n\t\t\t\t\toffsetRotation.set( Math.atan2( tempVector.z, tempVector.y ), Math.atan2( tempVector.x, tempVector.z ), Math.atan2( tempVector.y, tempVector.x ) );\r\n\r\n\t\t\t\t\ttempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\r\n\r\n\t\t\t\t\tquaternionE.setFromAxisAngle( eye, rotation.z - offsetRotation.z );\r\n\t\t\t\t\tquaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\r\n\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionE );\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\r\n\r\n\t\t\t\t\tscope.object.quaternion.copy( tempQuaternion );\r\n\r\n\t\t\t\t} else if ( scope.axis === \"XYZE\" ) {\r\n\r\n\t\t\t\t\tquaternionE.setFromEuler( point.clone().cross( tempVector ).normalize() ); // rotation axis\r\n\r\n\t\t\t\t\ttempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\r\n\t\t\t\t\tquaternionX.setFromAxisAngle( quaternionE, - point.clone().angleTo( tempVector ) );\r\n\t\t\t\t\tquaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\r\n\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\r\n\r\n\t\t\t\t\tscope.object.quaternion.copy( tempQuaternion );\r\n\r\n\t\t\t\t} else if ( scope.space === \"local\" ) {\r\n\r\n\t\t\t\t\tpoint.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\r\n\r\n\t\t\t\t\ttempVector.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\r\n\r\n\t\t\t\t\trotation.set( Math.atan2( point.z, point.y ), Math.atan2( point.x, point.z ), Math.atan2( point.y, point.x ) );\r\n\t\t\t\t\toffsetRotation.set( Math.atan2( tempVector.z, tempVector.y ), Math.atan2( tempVector.x, tempVector.z ), Math.atan2( tempVector.y, tempVector.x ) );\r\n\r\n\t\t\t\t\tquaternionXYZ.setFromRotationMatrix( oldRotationMatrix );\r\n\r\n\t\t\t\t\tif ( scope.rotationSnap !== null ) {\r\n\r\n\t\t\t\t\t\tquaternionX.setFromAxisAngle( unitX, Math.round( ( rotation.x - offsetRotation.x ) / scope.rotationSnap ) * scope.rotationSnap );\r\n\t\t\t\t\t\tquaternionY.setFromAxisAngle( unitY, Math.round( ( rotation.y - offsetRotation.y ) / scope.rotationSnap ) * scope.rotationSnap );\r\n\t\t\t\t\t\tquaternionZ.setFromAxisAngle( unitZ, Math.round( ( rotation.z - offsetRotation.z ) / scope.rotationSnap ) * scope.rotationSnap );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tquaternionX.setFromAxisAngle( unitX, rotation.x - offsetRotation.x );\r\n\t\t\t\t\t\tquaternionY.setFromAxisAngle( unitY, rotation.y - offsetRotation.y );\r\n\t\t\t\t\t\tquaternionZ.setFromAxisAngle( unitZ, rotation.z - offsetRotation.z );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( scope.axis === \"X\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionX );\r\n\t\t\t\t\tif ( scope.axis === \"Y\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionY );\r\n\t\t\t\t\tif ( scope.axis === \"Z\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionZ );\r\n\r\n\t\t\t\t\tscope.object.quaternion.copy( quaternionXYZ );\r\n\r\n\t\t\t\t} else if ( scope.space === \"world\" ) {\r\n\r\n\t\t\t\t\trotation.set( Math.atan2( point.z, point.y ), Math.atan2( point.x, point.z ), Math.atan2( point.y, point.x ) );\r\n\t\t\t\t\toffsetRotation.set( Math.atan2( tempVector.z, tempVector.y ), Math.atan2( tempVector.x, tempVector.z ), Math.atan2( tempVector.y, tempVector.x ) );\r\n\r\n\t\t\t\t\ttempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\r\n\r\n\t\t\t\t\tif ( scope.rotationSnap !== null ) {\r\n\r\n\t\t\t\t\t\tquaternionX.setFromAxisAngle( unitX, Math.round( ( rotation.x - offsetRotation.x ) / scope.rotationSnap ) * scope.rotationSnap );\r\n\t\t\t\t\t\tquaternionY.setFromAxisAngle( unitY, Math.round( ( rotation.y - offsetRotation.y ) / scope.rotationSnap ) * scope.rotationSnap );\r\n\t\t\t\t\t\tquaternionZ.setFromAxisAngle( unitZ, Math.round( ( rotation.z - offsetRotation.z ) / scope.rotationSnap ) * scope.rotationSnap );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tquaternionX.setFromAxisAngle( unitX, rotation.x - offsetRotation.x );\r\n\t\t\t\t\t\tquaternionY.setFromAxisAngle( unitY, rotation.y - offsetRotation.y );\r\n\t\t\t\t\t\tquaternionZ.setFromAxisAngle( unitZ, rotation.z - offsetRotation.z );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tquaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\r\n\r\n\t\t\t\t\tif ( scope.axis === \"X\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\r\n\t\t\t\t\tif ( scope.axis === \"Y\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\r\n\t\t\t\t\tif ( scope.axis === \"Z\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\r\n\r\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\r\n\r\n\t\t\t\t\tscope.object.quaternion.copy( tempQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.update();\r\n\t\t\tscope.dispatchEvent( changeEvent );\r\n\t\t\tscope.dispatchEvent( objectChangeEvent );\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerUp( event ) {\r\n\r\n\t\t\tevent.preventDefault(); // Prevent MouseEvent on mobile\r\n\r\n\t\t\tif ( event.button !== undefined && event.button !== 0 ) return;\r\n\r\n\t\t\tif ( _dragging && ( scope.axis !== null ) ) {\r\n\r\n\t\t\t\tmouseUpEvent.mode = _mode;\r\n\t\t\t\tscope.dispatchEvent( mouseUpEvent );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_dragging = false;\r\n\r\n\t\t\tif ( 'TouchEvent' in window && event instanceof TouchEvent ) {\r\n\r\n\t\t\t\t// Force \"rollover\"\r\n\r\n\t\t\t\tscope.axis = null;\r\n\t\t\t\tscope.update();\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tonPointerHover( event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction intersectObjects( pointer, objects ) {\r\n\r\n\t\t\tvar rect = domElement.getBoundingClientRect();\r\n\t\t\tvar x = ( pointer.clientX - rect.left ) / rect.width;\r\n\t\t\tvar y = ( pointer.clientY - rect.top ) / rect.height;\r\n\r\n\t\t\tpointerVector.set( ( x * 2 ) - 1, - ( y * 2 ) + 1 );\r\n\t\t\tray.setFromCamera( pointerVector, scope.camera );\r\n\r\n\t\t\tvar intersections = ray.intersectObjects( objects, true );\r\n\t\t\treturn intersections[ 0 ] ? intersections[ 0 ] : false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tTHREE.TransformControls.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.TransformControls.prototype.constructor = THREE.TransformControls;\r\n\r\n}() );\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/min-dependencies/lib/three/controls/TransformControls.js","import Dimensions from \"../../components/box/Dimensions\";\r\nimport RuntimeTester from \"../../debug/RuntimeTester\";\r\n\r\nconst type = 'Volume';\r\nconst _box3 = Symbol('box3');\r\n\r\nclass Volume {\r\n    constructor(){\r\n        /**\r\n         * @type {THREE.Vector3}\r\n         */\r\n        this.position = new THREE.Vector3();\r\n\r\n        /**\r\n         * @type {Dimensions}\r\n         */\r\n        this.dimensions = new Dimensions();\r\n\r\n        this[_box3] = new THREE.Box3();\r\n    }\r\n\r\n    /** @returns {THREE.Box3} */\r\n    get box3(){\r\n        /** @type {THREE.Box3} */\r\n        let b = this[_box3];\r\n        b.setFromCenterAndSize(this.position, this.dimensions.vec3);\r\n        return b;\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            position: this.position,\r\n            dimensions: this.dimensions\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        return this.dimensions.ToString();\r\n    }\r\n\r\n    static FromJSON(data, volume){\r\n        if( ! volume ) {\r\n            if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n            volume = new Volume();\r\n        }\r\n\r\n        volume.position = new THREE.Vector3(data.position.x, data.position.y, data.position.z);\r\n        volume.dimensions = Dimensions.FromJSON(data.dimensions);\r\n\r\n        RuntimeTester.Test('Dimensions.FromJSON', () => {\r\n            return Dimensions.Assert(volume.dimensions);\r\n        }, true);\r\n\r\n        return volume;\r\n    }\r\n}\r\n\r\nexport default Volume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Volume.js","/** @author chadiik <http://chadiik.com/> */\r\n\r\nimport { epsilon, smallValue, smallValueSqrt } from \"./core/Math2D\";\r\nimport Region from \"./core/Region\";\r\nimport OccupiedRegion from \"./core/OccupiedRegion\";\r\nimport RegionsTree from \"./core/RegionsTree\";\r\nimport StackedRegion from \"./core/StackedRegion\";\r\nimport { Container, Item } from \"./core/Components\";\r\nimport { PackedItem, PackedContainer } from \"./core/PackedComponents\";\r\nimport Heuristic from \"./heuristics/Heuristic\";\r\nimport { debugLog, sleep } from './CUBDebug';\r\nimport HeuRegular from \"./heuristics/HeuRegular\";\r\nimport HeuParametric1 from \"./heuristics/HeuParametric1\";\r\n\r\nconst heuristics = {\r\n    HeuRegular: HeuRegular,\r\n    HeuParametric1: HeuParametric1\r\n};\r\n\r\nvar tempRegion = new Region();\r\n\r\n\r\nclass CUB{\r\n    /**\r\n     * @param {Container} container \r\n     */\r\n    constructor(container){\r\n        \r\n        this.container = container;\r\n        this.packedContainer = new PackedContainer(container);\r\n\r\n        let firstRegion = new Region(0, 0, 0, container.width, container.height, container.length, 0);\r\n            firstRegion.SetWeights(0, container.weightCapacity, 0);\r\n        this.regionsTree = new RegionsTree(firstRegion);\r\n        let firstOccupiedRegion = new OccupiedRegion(0, 0, 0, container.width, 0, container.length, container, 0 , 0);\r\n        firstOccupiedRegion.SetWeights(0, container.weightCapacity, 0);\r\n        this.occupiedRegionsTree = new RegionsTree(firstOccupiedRegion);       \r\n        \r\n    }        \r\n\r\n    /** @param {PackedItem} packedItem @param {Boolean} [harsh] default = false */\r\n    ProcessRegionsPerPackedItem(packedItem, harsh){\r\n        let regions = this.regionsTree.regions;\r\n        let itemVolume = packedItem.ref.volume;\r\n        \r\n        // Creates temporary region for following calculations\r\n        let packedRegion = tempRegion.Set(packedItem.x, packedItem.y, packedItem.z, packedItem.packedWidth, packedItem.packedHeight, packedItem.packedLength, 0);\r\n        packedRegion.SetWeights(packedItem.ref.weight, 0, packedItem.ref.stackingCapacity);\r\n\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let region = regions[iRegion];\r\n\r\n            if(itemVolume > region.volume && packedRegion.ContainsRegion(smallValue, region)){\r\n                regions.splice(iRegion, 1);\r\n                iRegion--;\r\n                console.log('Contained region' + iRegion + ' deleted');\r\n                continue;\r\n            }\r\n\r\n            if(packedRegion.Intersects(-smallValue, region)){\r\n\r\n                if(harsh){\r\n                    console.log('\\tIntersecting region' + iRegion + ' deleted (!)');\r\n                    regions.slice(iRegion, 1);\r\n                    iRegion--;\r\n                    continue;\r\n                }\r\n                \r\n                let regionRemains = this.regionsTree.Occupy(region, packedRegion);\r\n                iRegion --;\r\n            }\r\n        }\r\n    }\r\n\r\n    ProcessRegionsForPackedItems(harsh){\r\n        let packedItems = this.packedContainer.packedItems;\r\n        let numPackedItems = packedItems.length;\r\n\r\n        for(let iItem = 0; iItem < numPackedItems; iItem++){\r\n            let packedItem = packedItems[iItem];\r\n            this.ProcessRegionsPerPackedItem(packedItem, harsh);\r\n        }\r\n    }\r\n    \r\n      \r\n\r\n    ProcessRegions(){\r\n\r\n        let containerWidth = this.container.width,\r\n            containerHeight = this.container.height;\r\n\r\n        // Recalculate preferred insertion side per region (left or right)\r\n        // this.regionsTree.ProcessRegionsPreferredX(containerWidth);\r\n\r\n        // Merge and expand free regions (can span several packed item tops)\r\n        this.regionsTree.ProcessRegionsMergeExpand(containerWidth, containerHeight);        \r\n        \r\n        // Removes regions that are completely enclosed in packed volumes, and correct any intersecting ones\r\n        this.ProcessRegionsForPackedItems(false);\r\n\r\n        // Removes unuseable regions\r\n        this.regionsTree.ProcessRegionsForZeroRegions();\r\n\r\n        // Removes regions that are completely enclosed in larger regions\r\n        this.regionsTree.ProcessRegionsEnclosed();\r\n\r\n        // Recalculate preferred insertion side per region (left or right)\r\n        //this.regionsTree.ProcessRegionsPreferredX(containerWidth);\r\n\r\n        // Sort by z (first) and volume (second)\r\n        this.regionsTree.Sort(Region.SortDeepestSmallest);\r\n    }\r\n\r\n    /** @param {Item} item @param {Heuristic} heuristic */\r\n    FitUsingHeuristic(item, heuristic){\r\n            \r\n        let result = heuristic.Fit(item);\r\n        if(result){\r\n            let placement = result.packedRegion;\r\n            placement.SetWeights(item.weight, 0, item.stackingCapacity);\r\n\r\n            // Create a new packed item\r\n            let packedItem = new PackedItem(item, placement.x, placement.y, placement.z, placement.width, placement.height, placement.length, result.orientation);\r\n                        \r\n            let packedRegion = new OccupiedRegion(packedItem.x, packedItem.y, packedItem.z, packedItem.packedWidth, packedItem.packedHeight, packedItem.packedLength, packedItem.ref, 0);\r\n            packedRegion.SetWeights(packedItem.ref.weight, 0, packedItem.ref.stackingCapacity);\r\n            // Reserve the tested sub region: regionFitTest from the containing region: region\r\n            let regionRemains = this.regionsTree.Occupy(result.containingRegion, placement, packedItem);\r\n            let OccupiedRemains = this.occupiedRegionsTree.AddRegion(packedRegion)\r\n            // console.log(this.occupiedRegionsTree.regions, 'Occupied Regions')                    \r\n            return packedItem;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Heuristic} heuristic @param {Heuristic} fallback */\r\n    async Solve(heuristic){\r\n        \r\n        let scope = this;\r\n        let packedContainer = this.packedContainer;\r\n\r\n        let log = { successful: 0, failed: 0, heuristic: 0 };\r\n\r\n        // Helper function\r\n        /** @param {Item} item @param {Heuristic} workingHeuristic @param {Boolean} final */\r\n        function unpackItem(item, workingHeuristic, final){\r\n            if(final) packedContainer.Unpack(item);\r\n            workingHeuristic.Unpack(item);\r\n\r\n            if(final) log.failed++;\r\n        }\r\n\r\n        // Helper function\r\n        /** @param {PackedItem} packedItem @param {Heuristic} workingHeuristic */\r\n        function packItem(packedItem, workingHeuristic){\r\n            packedContainer.Pack(packedItem);\r\n            packedItem.ref.quantity--;\r\n\r\n            if(workingHeuristic === heuristic) log.heuristic++;\r\n            \r\n\r\n            log.successful++;\r\n        }\r\n\r\n        let nextItem;\r\n\r\n        /** @param {Heuristic} workingHeuristic @param {Boolean} final */\r\n        async function fitWith(workingHeuristic, final){\r\n            while( nextItem = await workingHeuristic.NextItem() ){\r\n\r\n                scope.ProcessRegions();\r\n                //packedContainer.packedItems.sort(PackedItem.Sort);\r\n                // Try to pack item\r\n                let packedItem = scope.FitUsingHeuristic(nextItem, workingHeuristic);\r\n    \r\n                if( packedItem === false ){\r\n                    unpackItem(nextItem, workingHeuristic, final);\r\n                }\r\n                else{\r\n                    packItem(packedItem, workingHeuristic);\r\n                }\r\n    \r\n                /**/await sleep(30);\r\n            }\r\n        }\r\n        \r\n        await fitWith(heuristic, true);\r\n        packedContainer.packedItems.sort(PackedItem.Sort);\r\n        //console.log('Solved it:', log);\r\n\r\n        return packedContainer;\r\n    }\r\n}\r\nasync function pack(container, items, heuristic){   \r\n                                                    \r\n    let cub = new CUB(container);\r\n                       \r\n    heuristic.workingSet.SetItems(items);           \r\n    heuristic.workingSet.SetPackedContainer(cub.packedContainer);\r\n    heuristic.workingSet.SetRegionsTree(cub.regionsTree);\r\n    heuristic.workingSet.SetOccupiedRegionsTree(cub.occupiedRegionsTree);\r\n    \r\n    let result = await cub.Solve(heuristic);    \r\n    return result;\r\n}\r\n\r\nexport {\r\n    Item,\r\n    Container,\r\n    pack,\r\n    heuristics\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/CUB.js","import Item from \"./components/Item\";\r\nimport Container from \"./components/Container\";\r\n\r\n\r\n/**\r\n * @param {Array<Object>} objects \r\n * @param {Array<string>} m - mapping to Item.constructor, ie: [ID, Length, ...]\r\n */\r\nfunction toItems(objects, m){\r\n    var items = [];\r\n    objects.forEach(o => {\r\n        items.push(new Item(o[m[0]], o[m[1]], o[m[2]], o[m[3]], o[m[4]]));\r\n    });\r\n    return items;\r\n}\r\n\r\nclass TestData{\r\n    /**\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n    constructor(container, items){\r\n        this.container = container;\r\n        this.items = items;\r\n    }\r\n}\r\n\r\nclass AFitTest{\r\n\r\n    static GenerateDataSample1(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 15, Width: 13, Height: 9 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 5,  Width: 4, Height: 2, Quantity: 1 },\r\n\t\t    { ID: 1001, Name: 'Item2', Length: 2,  Width: 1, Height: 1, Quantity: 3 },\r\n\t\t    { ID: 1002, Name: 'Item3', Length: 9,  Width: 7, Height: 3, Quantity: 4 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 8 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 1 },\r\n            { ID: 1005, Name: 'Item6', Length: 3,  Width: 3, Height: 2, Quantity: 2 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSample2(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 60, Width: 35, Height: 25 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 30,  Width: 50, Height: 20, Quantity: 1 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 6 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 3 },\r\n            { ID: 1005, Name: 'Item6', Length: 5,  Width: 5, Height: 2, Quantity: 16 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSampleFlatdeck(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 20, Height: 30, Quantity: 4 },\r\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 20, Height: 30, Quantity: 20 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSampleFlatdeck2(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102, WeightCapacity: 48000 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7, StackingCapacity: 0 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 28, Height: 30, Quantity: 4 },\r\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 23, Height: 34, Quantity: 20 },\r\n            { ID: 1005, Name: 'Item6', Length: 45,  Width: 20, Height: 30, Quantity: 30 },\r\n            { ID: 1005, Name: 'Item6', Length: 35,  Width: 22, Height: 18, Quantity: 27 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n}\r\n\r\nexport default AFitTest;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/AFitTest.js","\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\nclass Item{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} dim1 \r\n     * @param {Number} dim2 \r\n     * @param {Number} dim3 \r\n     * @param {Number} quantity \r\n     */\r\n    constructor(id, dim1, dim2, dim3, quantity){\r\n        this.ID = id;\r\n        this.IsPacked = false;\r\n        this.Dim1 = dim2;\r\n        this.Dim2 = dim1;\r\n        this.Dim3 = dim3;\r\n        this.CoordX = 0;\r\n        this.CoordY = 0;\r\n        this.CoordZ = 0;\r\n        this.Quantity = quantity;\r\n        this.PackDimX = 0;\r\n        this.PackDimY = 0;\r\n        this.PackDimZ = 0;\r\n        this.Volume = this.Dim1 * this.Dim2 * this.Dim3;\r\n    }\r\n\r\n    /** \r\n     * @param {Item} item\r\n     * @returns {string} - axis order (xyz, xzy, yxz, yzx, zxy or zyx)\r\n     */\r\n    static ResolveOrientation(item){\r\n        var w = item.Dim1, l = item.Dim2, h = item.Dim3;\r\n\r\n        if(almost(item.PackDimX, w)){ // x\r\n            if(almost(item.PackDimY, h)){ // y\r\n                return 'xyz';\r\n            }\r\n            else if(almost(item.PackDimY, l)){ // z\r\n                return 'xzy';\r\n            }\r\n        }\r\n        else if(almost(item.PackDimX, h)){ // y\r\n            if(almost(item.PackDimY, w)){ // x\r\n                return 'yxz';\r\n            }\r\n            else if(almost(item.PackDimY, l)){ // z\r\n                return 'yzx';\r\n            }\r\n        }\r\n        else if(almost(item.PackDimX, l)){ // z\r\n            if(almost(item.PackDimY, w)){ // x\r\n                return 'zxy';\r\n            }\r\n            else if(almost(item.PackDimY, h)){ // y\r\n                return 'zyx';\r\n            }\r\n        }\r\n\r\n        return 'xyz';\r\n    }\r\n}\r\n\r\nexport default Item;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Item.js","\r\nclass Container{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(id, width, length, height){\r\n        this.ID = id;\r\n\r\n        this.Width = length || 0;\r\n        this.Length = width || 0;\r\n        this.Height = height || 0;\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Container.js","import OccupiedRegions from \"./OccupiedRegion\";\r\n\r\nconst maxWeightValue = Number.MAX_SAFE_INTEGER;\r\nclass StackedRegions extends OccupiedRegions{\r\n    constructor(x, y, z, width, height, length, item,  preferredX){\r\n        super()\r\n        this.Set(x, y, z, width, height, length,  item, preferredX);\r\n        this.SetWeights(0, maxWeightValue, maxWeightValue);\r\n        this.stackCount = 1;\r\n        return this;\r\n    }\r\n    SetStack(value){\r\n        this.stackCount = this.stackCount+value;\r\n    }\r\n    UpdateStack(x, y, z, width, height, length, item, count, preferredX){          \r\n        this.Set(x, y, z, width, height, length,  item, preferredX)\r\n        this.SetStack(count)\r\n    }\r\n    \r\n    Set(x, y, z, width, height, length,  item, preferredX){\r\n        this.x = x; this.y = y; this.z = z;\r\n        this.width = width; this.height = height; this.length = length;\r\n        this.ref = item;        \r\n        this.preferredX = preferredX;        \r\n        return this;\r\n    }\r\n    SetWeights(weight, weightCapacity, stackingCapacity){\r\n        this.weight = weight;\r\n        this.weightCapacity = weightCapacity;\r\n        this.stackingCapacity = stackingCapacity;\r\n    } \r\n}\r\nexport default StackedRegions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/StackedRegion.js","import { epsilon, smallValue, smallValueSqrt } from \"../core/Math2D\";\r\nimport Heuristic from \"./Heuristic\";\r\nimport { Item } from \"../core/Components\";\r\nimport Region from \"../core/Region\";\r\n\r\nclass HeuRegularParams extends Heuristic.Params{\r\n    constructor(){ super(); }\r\n}\r\n\r\nvar tempRegion = new Region();\r\n\r\nclass HeuRegularSet extends Heuristic.WorkingSet{\r\n    constructor(...args){\r\n        super(...args);\r\n    }\r\n\r\n    /** @param {Array<Item>} items */\r\n    SetItems(items){\r\n        super.SetItems(items);\r\n        \r\n        this.items.sort(Item.VolumeSort);\r\n    }\r\n    Fit(){\r\n        console.log('Stacked Regions in HeuRegular')\r\n        console.log(this.stackedRegionsTree)   \r\n        let result = this.regionsTree.Find(this.FitFunction, this);\r\n        return result;\r\n    }\r\n    OnStack(Topregion, stack){\r\n        for(let iRegion = 0; iRegion < stack.regions.length; iRegion++){             \r\n            let checkRegionTop = tempRegion.OnTopRegion(smallValue, Topregion.region, stack.regions[iRegion]);\r\n            if(checkRegionTop) return stack.regions[iRegion].stackCount;                           \r\n        }\r\n        return 0;\r\n    }\r\n\r\n    /** @param {Region} region */\r\n    FitFunction(region){\r\n        let item = this.workingItem;\r\n        let validOrientations = item.validOrientations;\r\n        for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\r\n            let orientation = validOrientations[iOrient];\r\n\r\n            let dimensions = item.GetOrientedDimensions(orientation);\r\n\r\n            // Fit test (success: Region, failure: false)\r\n            let regionFitTest = region.FitTest(smallValue, \r\n                dimensions[0], dimensions[1], dimensions[2],\r\n                item.weight, item.grounded,\r\n                tempRegion);\r\n            if(regionFitTest !== false){\r\n\r\n                let result = new Heuristic.Result(region, regionFitTest, orientation);\r\n                return result;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nclass HeuRegular extends Heuristic{\r\n    constructor(){\r\n\r\n        let params = undefined;\r\n        super(params, HeuRegularSet);\r\n\r\n        /** @type {HeuRegularSet} */\r\n        this.workingSet;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    Fit(item){\r\n        let result = false;\r\n        let validItem = this.workingSet.SetWorkingItem(item);\r\n\r\n        if(validItem){\r\n            result = this.workingSet.Fit();\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nHeuRegular.Params = HeuRegularParams;\r\nHeuRegular.WorkingSet = HeuRegularSet;\r\n\r\nexport default HeuRegular;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/heuristics/HeuRegular.js","import { epsilon, smallValue, smallValueSqrt } from \"../core/Math2D\";\r\nimport Heuristic from \"./Heuristic\";\r\nimport { Item } from \"../core/Components\";\r\nimport Region from \"../core/Region\";\r\nimport RegionsTree from \"../core/RegionsTree\";\r\n\r\nclass ScoringParams {\r\n    /** Scoring weights\r\n     * @param {Number} minZ score for tightly packing in length (Z)\r\n     * @param {Number} minWaste score for minimizing wasted space\r\n     */\r\n    constructor(minZ, minWaste) {\r\n        this.minZ = minZ;\r\n        this.minWaste = minWaste;\r\n    }\r\n}\r\n\r\nclass HeuParametric1Params extends Heuristic.Params {\r\n    constructor() {\r\n        super();\r\n\r\n        /** Defaults minZ = .9, minWaste = .1 \r\n         * @type {ScoringParams} */\r\n        this.scoring = new ScoringParams(.9, .1);\r\n    }\r\n}\r\n\r\n/** @typedef Score @property {Region} region region index @property {Number} orientation orientation index @property {Number} n score */\r\n/** @param {Region} region region index @param {Number} orientation orientation index @param {Number} n score */\r\nfunction scoreConstructor(region, orientation, n) { return { region: region, orientation: orientation, n: n }; }\r\n\r\nfunction sortByN(a, b) {\r\n    if (isNaN(a.n) || isNaN(b.n)) return 0;\r\n\r\n    if (a.n < b.n) return -1;\r\n    if (a.n > b.n) return 1;\r\n    return 0;\r\n}\r\n\r\nconst minRegionAxis = smallValue;\r\n\r\nvar tempRegion = new Region();\r\n\r\n\r\n/** @type {Array<Score>} */\r\nvar orientationScoreTable = [];\r\nclass HeuParametric1Set extends Heuristic.WorkingSet {\r\n    constructor(...args) {\r\n        super(...args);\r\n\r\n        /** @type {HeuParametric1Params} */\r\n        this.params;\r\n        this.ItemIDS = [];\r\n\r\n    }\r\n\r\n    /** @param {Array<Item>} items */\r\n    SetItems(items) {\r\n        super.SetItems(items);\r\n\r\n        //this.items.sort(Item.VolumeSort);\r\n\r\n        this.minDimensions = Item.GetMinDimensions(this.items);\r\n        this.minDimensionsNoWasteFactor = [1, 1, 1];\r\n\r\n        /** @type {Array<Score>} */\r\n        this.regionScoreTable = [];\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * @param {Region} fit \r\n     * @param {Array<Region>} newRegions \r\n     */\r\n    RateFit(fit, newRegions) {\r\n\r\n        // Try out a recursive deep rate fit\r\n        let containerLength = this.packedContainer.container.length;\r\n        let containerHeight = this.packedContainer.container.height;\r\n        let containerWidth = this.packedContainer.container.width;\r\n        let minDimensions = this.minDimensions;\r\n        let minDimensionsNoWasteFactor = this.minDimensionsNoWasteFactor;\r\n        let minZScore = 1 - (fit.z + fit.length) / containerLength; // 0-1\r\n        let minYScore = 1 - (fit.y + fit.height) / containerHeight; // 0-1\r\n        let minXScore = 1 - (fit.x + fit.width) / containerWidth; // 0-1\r\n\r\n        // new regions usability score\r\n        let minWasteScore = 1; // have completely filled the region if newRegions.length === 0\r\n        if (newRegions.length > 0) {\r\n            minWasteScore = 0;\r\n            for (let iRegion = 0; iRegion < newRegions.length; iRegion++) {\r\n                let region = newRegions[iRegion]; \r\n\r\n                let scoreW = 0, scoreH = 0, scoreL = 0;\r\n                if (region.width >= minDimensions[0] && (region.height - minDimensions[0]) < minDimensions[0] * minDimensionsNoWasteFactor[0]) scoreW += 1;\r\n                if (region.height >= minDimensions[1] && (region.height - minDimensions[1]) < minDimensions[1] * minDimensionsNoWasteFactor[1]) scoreH += 1;\r\n                if (region.length >= minDimensions[2] && (region.height - minDimensions[2]) < minDimensions[2] * minDimensionsNoWasteFactor[2]) scoreL += 1;\r\n\r\n                minWasteScore += scoreW * .5  + scoreH * .3   + scoreL * .2;\r\n            }\r\n            minWasteScore /= newRegions.length;\r\n        }\r\n\r\n        let minZWeight = this.params.scoring.minZ;\r\n        let minWasteWeight = this.params.scoring.minWaste;\r\n        let score = minZScore //* minZWeight + minWasteScore * minWasteWeight;\r\n        //let scoreX = minXScore * minZWeight + minWasteScore * minWasteWeight;\r\n        // if(scoreX > scoreZ) score = scoreX;\r\n        // else score = scoreZ;\r\n        \r\n        return score;\r\n    }    \r\n\r\n    /** @param {Region} region */\r\n    FitFunction(region) {\r\n        let item = this.workingItem;\r\n        \r\n        let validOrientations = item.validOrientations;\r\n       \r\n            if (region.volume > item.volume) {\r\n                let dummyRegion = tempRegion.Copy(region);\r\n\r\n                orientationScoreTable.length = 0;\r\n                for (let iOrient = 0; iOrient < validOrientations.length; iOrient++) {\r\n                    let orientation = validOrientations[iOrient]; //[0,5]\r\n                    let dimensions = item.GetOrientedDimensions(orientation);\r\n                    let regionFitTest = region.FitTest(smallValue,\r\n                        dimensions[0], dimensions[1], dimensions[2],\r\n                        item.weight, item.grounded, this.occupiedRegionsTree.regions, item.category);\r\n\r\n                    if (regionFitTest !== false) {\r\n\r\n                        // Subtracts fit from region and calculates new bounding regions\r\n                        let newRegions = dummyRegion.Subtract(regionFitTest, minRegionAxis);\r\n                        if (newRegions === undefined) newRegions = [];\r\n                        if (dummyRegion.length > minRegionAxis)\r\n                            newRegions.push(dummyRegion);\r\n\r\n                        let score = this.RateFit(regionFitTest, newRegions)\r\n                        let orientationScore = scoreConstructor(region, orientation, score);\r\n                        orientationScoreTable.push(orientationScore);\r\n                    }\r\n                }\r\n\r\n                if (orientationScoreTable.length > 0) {\r\n                    orientationScoreTable.sort(sortByN);\r\n                    let regionScore = orientationScoreTable.pop();\r\n                    if (regionScore) this.regionScoreTable.push(regionScore);\r\n\r\n                }\r\n            }\r\n\r\n        \r\n        return false;\r\n    }\r\n\r\n    /** @returns {Heuristic.Result} */\r\n    Fit(ItemIDs) {\r\n        this.ItemIDS = ItemIDs;\r\n        let numRegions = this.regionsTree.regions.length;\r\n        for (let iRegion = 0; iRegion < numRegions; iRegion++) {\r\n            let region = this.regionsTree.regions[iRegion];\r\n            this.FitFunction(region)\r\n        }\r\n\r\n\r\n        if (this.regionScoreTable.length > 0) {\r\n\r\n            this.regionScoreTable.sort(sortByN);\r\n            let highestScore = this.regionScoreTable.pop();\r\n            let containingRegion = highestScore.region,\r\n                orientation = highestScore.orientation;\r\n            let dimensions = this.workingItem.GetOrientedDimensions(orientation);\r\n\r\n            // Fit test (success: Region, failure: false)\r\n            let regionFitTest = containingRegion.FitTest(smallValue,\r\n                dimensions[0], dimensions[1], dimensions[2],\r\n                this.workingItem.weight, this.workingItem.grounded, this.occupiedRegionsTree.regions,  this.workingItem.category);\r\n\r\n\r\n            if (regionFitTest !== false) {\r\n\r\n                let result = new Heuristic.Result(containingRegion, regionFitTest, orientation);\r\n                this.regionScoreTable = [];\r\n                return result;\r\n\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nclass HeuParametric1 extends Heuristic {\r\n    /** @param {HeuParametric1Params} params */\r\n    constructor(params, ItemIDs) {\r\n\r\n        super(params || (new HeuParametric1Params()), HeuParametric1Set);\r\n\r\n        /** @type {HeuParametric1Set} */\r\n        this.workingSet;\r\n        this.ItemIDS = ItemIDs;\r\n\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    Fit(item) {\r\n        let result = false;\r\n        let validItem = this.workingSet.SetWorkingItem(item);\r\n        if (validItem) {\r\n            result = this.workingSet.Fit(this.ItemIDS);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nHeuParametric1.Params = HeuParametric1Params;\r\nHeuParametric1.WorkingSet = HeuParametric1Set;\r\n\r\nexport default HeuParametric1;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/heuristics/HeuParametric1.js","import CargoListView from \"./CargoListView\";\r\nimport Packer from \"../packer/Packer\";\r\nimport CargoList from \"../packer/CargoList\";\r\nimport PackingSpaceView from \"./PackingSpaceView\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport SceneSetup from \"../view/SceneSetup\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport PackResultView from \"./PackResultView\";\r\nimport UpdateComponent from \"../utils/cik/input/UpdateComponent\";\r\nimport Container from \"../packer/container/Container\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport DomUI from \"./dom/DomUI\";\r\nimport OrthoviewsNavigator from \"./OrthoviewsNavigator\";\r\nimport Camera from \"../scene/Camera\";\r\n\r\n/**\r\n * @typedef {Object} ViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Number} transitionDuration\r\n * @property {Object} cargoListView\r\n * @property {Number} cargoListView.paddingZ\r\n * @property {Number} cargoListView.paddingY\r\n * @property {import('./CargoListView').CargoListViewParams} cargoListView.params\r\n * @property {Object} packResultView\r\n * @property {import('./PackResultView').PackResultViewParams} packResultView.params\r\n */\r\n\r\n /** @type {ViewParams} */\r\nconst defaultParams = {\r\n    ux: undefined,\r\n    transitionDuration: 1.5,\r\n    cargoListView: {\r\n        paddingZ: 120,\r\n        paddingY: 40,\r\n        params: {}\r\n    },\r\n    packResultView: {\r\n        params: {\r\n            animationDuration: 1\r\n        }\r\n    }\r\n};\r\n\r\nvar tempBox3 = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass View {\r\n    /**\r\n     * Constructor\r\n     * @param {Packer} packer \r\n     * @param {DomUI} domUI; \r\n     * @param {SceneSetup} sceneSetup \r\n     * @param {ViewParams} params \r\n     */\r\n    constructor(packer, sceneSetup, domUI, params){\r\n\r\n        this.sceneSetup = sceneSetup;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.domUI = domUI;\r\n        this.domUI.CreateOrthoViewsIcons();\r\n        this.domUI.On(DomUI.signals.orthoViewSelected, this.OnOrthoViewSelected.bind(this));\r\n\r\n        var scope = this;\r\n        var units = this.params.ux.params.units;\r\n\r\n        // Fill lights\r\n        if(true){\r\n            let lights = this.sceneSetup.DefaultLights(this.sceneSetup.sceneController, true, true);\r\n\r\n            let dl = lights.filter(light => light instanceof THREE.DirectionalLight)[0];\r\n            let dlData = {\"color\":\"0xfceeee\",\"intensity\":1,\"castShadow\":true,\"shadow.bias\":0.00001,\"shadow.radius\":4,\"shadow.mapSize.x\":4096,\"shadow.mapSize.y\":4096,\"shadow.camera.left\":-400,\"shadow.camera.top\":300,\"shadow.camera.right\":400,\"shadow.camera.bottom\":-300,\"shadow.camera.near\":20,\"shadow.camera.far\":800};\r\n            let Config = require('../utils/cik/config/Config').default;\r\n            Config.Load(dl, dlData);\r\n\r\n            if(this.sceneSetup.ux.params.hud){\r\n                this.sceneSetup.DefaultLights(this.sceneSetup.hud);\r\n            }\r\n\r\n            let dlComp = lights.filter(light => light instanceof THREE.DirectionalLight)[1];\r\n            dlComp.castShadow = true;\r\n        }\r\n\r\n        let orthoviewsNavParams = {ux: this.params.ux};\r\n        this.orthoviewsNavigator = new OrthoviewsNavigator(this.sceneSetup.cameraController, orthoviewsNavParams);\r\n\r\n        // Packing space\r\n        this.packingSpaceView = new PackingSpaceView();\r\n        this.sceneSetup.sceneController.AddDefault(this.packingSpaceView.view);\r\n        /** @param {Container} container */\r\n        function onContainerAdded(container){\r\n            scope.packingSpaceView.Add(container);\r\n\r\n            tempBox3.setFromObject(scope.packingSpaceView.view);\r\n            tempBox3.getSize(tempVec);\r\n\r\n            /** @type {THREE.Box3} */\r\n            let box3 = container.combinedVolume.box3;\r\n            scope.sceneSetup.cameraController.TransitionToFrame(scope.params.transitionDuration, tempBox3);\r\n\r\n            let containerSize = Math.max(tempVec.x, tempVec.y, tempVec.z);\r\n            scope.cargoListView.view.position.z = containerSize / 2 + scope.params.cargoListView.paddingZ * units;\r\n            scope.cargoListView.view.position.y = scope.params.cargoListView.paddingY * units;\r\n        }\r\n        packer.packingSpace.On(PackingSpace.signals.containerAdded, onContainerAdded);\r\n\r\n        // Cargo list\r\n        this.params.cargoListView.params.ux = this.params.ux;\r\n        this.cargoListView = new CargoListView(this.params.cargoListView.params);\r\n\r\n        this.sceneSetup.input.AddRaycastGroup('OnClick', 'cargoListView', this.cargoListView.raycastGroup);\r\n\r\n        this.sceneSetup.sceneController.AddDefault(this.cargoListView.view);\r\n\r\n        function onCargoListViewChanged(){\r\n            tempBox3.setFromObject(scope.cargoListView.view);\r\n            tempBox3.getCenter(tempVec);\r\n            let listViewCenterX = tempVec.x;\r\n            scope.cargoListView.view.getWorldPosition(tempVec);\r\n            let offsetX = listViewCenterX - tempVec.x;\r\n\r\n            /** @type {THREE.Box3} */\r\n            let box3 = tempBox3;\r\n            scope.sceneSetup.cameraController.TransitionToFrame(scope.params.transitionDuration, box3, .7);\r\n\r\n            tempBox3.setFromObject(scope.packingSpaceView.view);\r\n            tempBox3.getCenter(tempVec);\r\n            let centerX = tempVec.x;\r\n\r\n            scope.cargoListView.view.position.x = centerX - offsetX;\r\n        }\r\n        function onCargoGroupAdded(group){\r\n            scope.cargoListView.Add(group);\r\n            onCargoListViewChanged();\r\n        }\r\n        packer.cargoList.On(CargoList.signals.groupAdded, onCargoGroupAdded);\r\n        function onCargoGroupRemoved(group){\r\n            scope.cargoListView.Remove(group);\r\n            onCargoListViewChanged();\r\n        }\r\n        packer.cargoList.On(CargoList.signals.groupRemoved, onCargoGroupRemoved);\r\n        function onCargoGroupModified(group){\r\n            scope.cargoListView.UpdateGroup(group);\r\n            onCargoListViewChanged();\r\n        }\r\n        packer.cargoList.On(CargoList.signals.groupModified, onCargoGroupModified);\r\n\r\n        // Packing result\r\n        this.params.packResultView.params.ux = this.params.ux;\r\n        this.packResultView = new PackResultView(this.cargoListView, this.packingSpaceView, this.params.packResultView.params);\r\n        this.sceneSetup.sceneController.AddDefault(this.packResultView.view);\r\n\r\n        /** @param {Packer.PackingResult} packingResult */\r\n        async function onPackUpdate(packingResult){\r\n            scope.orthoviewsNavigator.Navigate(OrthoviewsNavigator.orthoviews.home, false);\r\n            await scope.packResultView.DisplayPackingResult(packingResult);\r\n        }\r\n        packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n\r\n        var updateComponent = new UpdateComponent(true, 1/30, this.Update.bind(this));\r\n        this.sceneSetup.input.updateComponents.push(updateComponent);\r\n\r\n        this.orthoviewsNavigator.boundingView = this.packingSpaceView.view;\r\n        this.orthoviewsNavigator.cargoListView = this.cargoListView;\r\n\r\n        if(this.params.ux.params.hud){\r\n            this.HUDSetup();\r\n        }\r\n\r\n        if(this.params.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n    }\r\n\r\n    /** @param {Number} now */\r\n    Update(now){\r\n        this.packResultView.Update();\r\n        this.cargoListView.Update();\r\n    }\r\n\r\n    HUDSetup(){\r\n        var units = this.params.ux.params.units;\r\n        var input = this.sceneSetup.input;\r\n        var hud = this.sceneSetup.hud;\r\n        var scope = this;\r\n\r\n\r\n    }\r\n\r\n    ClearPackingResults(){\r\n        this.packResultView.Clear();\r\n    }\r\n\r\n    /** @param {DomUI.orthoviews} viewType */\r\n    OnOrthoViewSelected(viewType){\r\n        switch(viewType){\r\n            case DomUI.orthoviews.home:     this.orthoviewsNavigator.Navigate(OrthoviewsNavigator.orthoviews.home);     break;\r\n            case DomUI.orthoviews.top:      this.orthoviewsNavigator.Navigate(OrthoviewsNavigator.orthoviews.top);      break;\r\n            case DomUI.orthoviews.front:    this.orthoviewsNavigator.Navigate(OrthoviewsNavigator.orthoviews.front);    break;\r\n            case DomUI.orthoviews.side:     this.orthoviewsNavigator.Navigate(OrthoviewsNavigator.orthoviews.side);     break;\r\n        }\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n        var input = this.sceneSetup.input;\r\n\r\n        if(this.params.ux.params.hud){\r\n            var hudControl3D = Control3D.Request('hud');\r\n\r\n            Config.MakeShortcut('Configure', 'Show HUDControl3D', function(){\r\n                hudControl3D.Toggle(scope.cargoListView.view);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/View.js","import CargoBoxView from \"./CargoBoxView\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Asset from \"../components/assets/Asset\";\r\n\r\nconst unitCubeEdgeGeometry = new THREE.EdgesGeometry(new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1));\r\nconst wireframeMaterialTemplate = new THREE.LineBasicMaterial({color: 0xffffff, flatShading: true});\r\n\r\nconst _wireMaterialSettings = Symbol('wireMatSet');\r\n\r\nclass PackedCargoBoxView extends CargoBoxView {\r\n    /**\r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var meshMaterial = this.mesh.material;\r\n        meshMaterial.polygonOffset = true;\r\n        meshMaterial.polygonOffsetFactor = 2;\r\n        meshMaterial.polygonOffsetUnits = 1;\r\n        meshMaterial.transparent = true;\r\n        meshMaterial.opacity = .5;\r\n        meshMaterial.blending = THREE.NormalBlending;\r\n        meshMaterial.depthTest = true;\r\n        meshMaterial.depthWrite = false;\r\n\r\n        this.mesh.castShadow = this.mesh.receiveShadow = true;\r\n\r\n        var material = wireframeMaterialTemplate.clone();\r\n        this.wireMesh = new THREE.LineSegments(unitCubeEdgeGeometry, material);\r\n        this.wireMesh.renderOrder = Number.MAX_SAFE_INTEGER - 1;\r\n        this.wireMesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view.add(this.wireMesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        this.scale = value.dimensions.vec3;\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    set focus(value){\r\n        super.focus = value;\r\n\r\n        if(this[_wireMaterialSettings]) Asset.RestoreMaterial(this.wireMesh.material, this[_wireMaterialSettings]);\r\n\r\n        if(Math.abs(1 - value) > .0001){\r\n            if(this[_wireMaterialSettings] === undefined){\r\n                this.wireMesh.material = this.wireMesh.material.clone();\r\n                this[_wireMaterialSettings] = {};\r\n                Asset.SetMaterialFocus(this.wireMesh.material, value, this[_wireMaterialSettings]);\r\n            }\r\n            else{\r\n                Asset.SetMaterialFocus(this.wireMesh.material, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    get focus(){ return super.focus; }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n        this.wireMesh.scale.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x in radians\r\n     * @param {Number} y in radians\r\n     * @param {Number} z in radians\r\n     */\r\n    SetRotationAngles(x, y, z){\r\n        this.mesh.rotation.set(x, y, z);\r\n        this.wireMesh.rotation.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoBoxView} cargoView \r\n     */\r\n    Extend(cargoView){\r\n        this.entry = cargoView.entry;\r\n        this.mesh.material.color = cargoView.mesh.material.color;\r\n    }\r\n}\r\n\r\nexport default PackedCargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackedCargoBoxView.js","import PackResultView from \"../PackResultView\";\r\nimport Packer from \"../../packer/Packer\";\r\nimport Pool from \"../../utils/cik/Pool\";\r\n\r\nvar tempRange = [];\r\n\r\nclass Range{\r\n    /**\r\n     * \r\n     * @param {Array<Number>} args [min,max...] pairs\r\n     */\r\n    constructor(...args){\r\n        /** @type {Array<Number>} */\r\n        this.min = [];\r\n        /** @type {Array<Number>} */\r\n        this.max = [];\r\n\r\n        for(let i = 0, halfLength = args.length; i < halfLength; i++){\r\n            this.min.push(args[i * 2]);\r\n            this.max.push(args[i * 2 + 1]);\r\n        }\r\n    }\r\n\r\n    /** @param {Array<Number>} args */\r\n    Min(...args){\r\n        this.min.length = 0;\r\n        this.min.push(...args);\r\n        return this;\r\n    }\r\n\r\n    /** @param {Array<Number>} args */\r\n    Max(...args){\r\n        this.max.length = 0;\r\n        this.max.push(...args);\r\n        return this;\r\n    }\r\n\r\n    /** @param {Number} index @returns {Number} */\r\n    Length(index){\r\n        return this.max[index] - this.min[index];\r\n    }\r\n\r\n    /** @param {Array<Number>} args */\r\n    Evaluate(...args){\r\n        tempRange.length = 0;\r\n        for(let i = 0; i < args.length; i++){\r\n            let min = this.min[i],\r\n                max = this.max[i],\r\n                v = args[i];\r\n            let value = v * (max - min) + min;\r\n            tempRange.push(value);\r\n        }\r\n        return tempRange;\r\n    }\r\n}\r\n\r\nconst range = {\r\n    frequency: 0,\r\n    volume: 1\r\n};\r\n\r\nconst _playing = Symbol('playing');\r\nconst _iid = Symbol('iid');\r\n\r\nclass Note{\r\n    constructor(){\r\n        this.wave = new Pizzicato.Sound({ \r\n            source: 'wave', \r\n            options: {\r\n                type: 'sine',\r\n                frequency: 440\r\n            }\r\n        });\r\n\r\n        this[_playing] = false;\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    set frequency(value){\r\n        this.wave.frequency = value;\r\n    }\r\n\r\n    /** @returns {Boolean} */\r\n    get playing(){ return this[_playing]; }\r\n\r\n    Play(duration){\r\n        this[_playing] = true;\r\n        this.wave.play();\r\n        let scope = this;\r\n        function onNoteComplete(){ scope.Stop(); }\r\n        this[_iid] = window.setTimeout(onNoteComplete, Math.floor(duration * 1000));\r\n    }\r\n\r\n    Stop(){\r\n        if(this[_iid] !== undefined) window.clearTimeout(this[_iid]);\r\n        this[_iid] = undefined;\r\n\r\n        this.wave.stop();\r\n        this[_playing] = false;\r\n    }\r\n}\r\n\r\n/**\r\n * @returns {Note}\r\n */\r\nfunction poolNewFN(){\r\n    let note = new Note();\r\n    return note;\r\n}\r\n\r\n/**\r\n * @param {Note} object \r\n * @returns {Note}\r\n */\r\nfunction poolResetFN(object){\r\n    return object;\r\n}\r\n\r\nclass Toner{\r\n    constructor(){\r\n\r\n        this.pool = new Pool(poolNewFN, poolResetFN);\r\n        \r\n        this.ranges = new Range(\r\n            100, 900, // freq\r\n            0, 1, // volume\r\n            0.2, 0.8 // duration\r\n        );\r\n\r\n        window.Toner = this;\r\n    }\r\n\r\n    GetNote(){\r\n        /** @type {Note} */\r\n        let note = this.pool.Request();\r\n        return note;\r\n    }\r\n\r\n    RelaseNote(note){\r\n        this.pool.Return(note);\r\n    }\r\n\r\n    /** @param {Number} x @param {Number} y @param {Number} z */\r\n    Coords(x, y, z){\r\n\r\n        const divs = 6;\r\n        let divLength = this.ranges.Length(range.frequency) / divs;\r\n        let values = this.ranges.Evaluate(x, y, z);\r\n\r\n        let frequency = Math.floor(values[0]),\r\n            volume = values[1],\r\n            duration = values[2];\r\n\r\n        let note = this.GetNote();\r\n        note.frequency = frequency;\r\n        note.Play(duration);\r\n\r\n        let scope = this;\r\n        function onNoteComplete(){\r\n            scope.RelaseNote(note);\r\n        }\r\n        window.setInterval(onNoteComplete, Math.floor(duration * 1000));\r\n    }\r\n}\r\n\r\nclass Musipack{\r\n    /**\r\n     * \r\n     * @param {PackResultView} packResultView \r\n     */\r\n    constructor(packResultView){\r\n\r\n        console.log('Musicpack hooked in!');\r\n\r\n        this.toner = new Toner();\r\n\r\n        packResultView.Once(PackResultView.signals.packVizStart, function(){\r\n            packResultView.params.animationDuration = 8;\r\n        });\r\n        \r\n        packResultView.On(PackResultView.signals.cargoVizPack, this.OnItemPacked.bind(this));\r\n        packResultView.On(PackResultView.signals.cargoVizUnpack, this.OnItemUnpacked.bind(this));\r\n    }\r\n\r\n    /** @param {Packer.PackedCargo} item */\r\n    OnItemPacked(item){\r\n        this.EvaluateItem(item);\r\n    }\r\n\r\n    /** @param {Packer.PackedCargo} item */\r\n    OnItemUnpacked(item){\r\n        this.EvaluateItem(item);\r\n    }\r\n\r\n    /** @param {Packer.PackedCargo} item */\r\n    EvaluateItem(item){\r\n        if(item && item.position){\r\n            let x = item.position.x,\r\n                y = item.position.y,\r\n                z = item.position.z;\r\n\r\n            let w = item.containingVolume.dimensions.width,\r\n                h = item.containingVolume.dimensions.height,\r\n                l = item.containingVolume.dimensions.length;\r\n            \r\n            this.toner.Coords(x / w, y / h, z / l);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Musipack;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/Musipack.js","import UX from \"../UX\";\r\nimport Camera from \"../scene/Camera\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport CargoListView from \"./CargoListView\";\r\nimport NaNRecovery from \"../utils/cik/NaNRecovery\";\r\n\r\n/** @typedef OrthoviewsNavigatorParams @property {UX} ux @property {Number} transitionDuration */\r\n/** @type {OrthoviewsNavigatorParams} */\r\nconst defaultParams = {\r\n    transitionDuration: 1\r\n};\r\n\r\nconst orthoviews = {\r\n    home: 'home',\r\n    top: 'top',\r\n    front: 'front',\r\n    side: 'side'\r\n};\r\n\r\nvar tempBox3 = new THREE.Box3(),\r\n    tempVec3 = new THREE.Vector3(),\r\n    tempCamOffset = new THREE.Vector3();\r\n\r\n/** @type {import('../scene/Camera').FrameCoords} */\r\nvar tempCoords = {position: new THREE.Vector3(), center: new THREE.Vector3()};\r\n\r\nconst _cargoListView = Symbol('cargoListView'),\r\n    _boundingView = Symbol('boundingView'),\r\n    _recovery = Symbol('recovery');\r\n\r\nclass OrthoviewsNavigator{\r\n    /** @param {Camera} cameraController @param {OrthoviewsNavigatorParams} params */\r\n    constructor(cameraController, params){\r\n        \r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n        this.cameraController = cameraController;\r\n\r\n        this.nanRecovery = new NaNRecovery(this.cameraController, 'position.x', 'position.y', 'position.z', 'rotation.x', 'rotation.y', 'rotation.z', 'camera.fov');\r\n\r\n        const Smart = require('../utils/cik/config/Smart').default;\r\n\r\n        let scope = this;\r\n        let smart = new Smart(this.cameraController.camera, 'FOV');\r\n        smart.MakeShortcut('Configure');\r\n        function onChange(){\r\n            scope.cameraController.camera.updateProjectionMatrix();\r\n        }\r\n        smart.Config(null, this.cameraController.camera, onChange, Smart.serializeModes.none,\r\n            'fov'\r\n        );\r\n    }\r\n\r\n    /** @param {THREE.Object3D} boundingView */\r\n    set boundingView(value){\r\n        this[_boundingView] = value;\r\n    }\r\n\r\n    get boundingView(){ return this[_boundingView]; }\r\n\r\n    /** @param {CargoListView} value */\r\n    set cargoListView(value){\r\n        this[_cargoListView] = value;\r\n    }\r\n\r\n    get cargoListView(){ return this[_cargoListView]; }\r\n\r\n    /** @param {orthoviews} viewType @param {Boolean} [changeFOV] true by default */\r\n    Navigate(viewType, changeFOV){\r\n\r\n        let neededRecovery = this.nanRecovery.AssertUpdateRecover();\r\n        console.log('Navigating to: ' + viewType + (neededRecovery ? ', recovered from NaN.' : '.'));\r\n\r\n        const duration = 1;\r\n\r\n        var distanceMultiplier = .3;\r\n        if(changeFOV === undefined) changeFOV = true;\r\n        var fov = changeFOV ? 8 : this.params.ux.params.fov;\r\n        var slideDown = true;\r\n\r\n        tempBox3.setFromObject(this.boundingView);\r\n        \r\n        let orientation = tempCamOffset;\r\n        switch(viewType){\r\n            case orthoviews.home:  \r\n                orientation.set(1, -1, 1);\r\n                fov = this.params.ux.params.fov;\r\n                distanceMultiplier = .5;\r\n                break;\r\n\r\n            case orthoviews.top:\r\n                orientation.set(0.01, -1, 0);\r\n                distanceMultiplier = .3;\r\n                break;\r\n\r\n            case orthoviews.front:\r\n                this.cargoListView.SlideUp(tempBox3.max.y + 40 * this.params.ux.params.units, duration);\r\n                distanceMultiplier = .2;\r\n                slideDown = false;\r\n                orientation.set(0, 0, 1);\r\n                break;\r\n\r\n            case orthoviews.side:\r\n                distanceMultiplier = .3;\r\n                orientation.set(1, 0, 0);\r\n                break;\r\n        }\r\n\r\n        if(slideDown) this.cargoListView.SlideDown(duration);\r\n\r\n        this.cameraController.TransitionToFOV(duration * 1.5, fov);\r\n\r\n        let endCoords = this.cameraController.CalcFrameCoords(tempBox3, distanceMultiplier, orientation, fov);\r\n        this.cameraController.TransitionFromToCoords(this.params.transitionDuration, undefined, endCoords);\r\n    }\r\n\r\n    static get orthoviews(){\r\n        return orthoviews;\r\n    }\r\n}\r\n\r\nexport default OrthoviewsNavigator;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/OrthoviewsNavigator.js","\r\n/** @param {*} obj @param {string} key */\r\nfunction getKey(obj, key){\r\n    return key.split('.').reduce(function(a, b){\r\n        return a && a[b];\r\n    }, obj);\r\n}\r\n\r\n/** @param {*} obj @param {string} key */\r\nfunction setKey(obj, key, val){\r\n    key = key.split('.');\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    let endKey = key.shift();\r\n    obj[endKey] = val;\r\n    return obj[endKey];\r\n}\r\n\r\nconst typeofNumber = 'number';\r\n\r\nclass NaNRecovery{\r\n    /**\r\n     * Properties that needs to be considered\r\n     * @param {*} root\r\n     * @param  {...string} keys \r\n     */\r\n    constructor(root, ...keys){\r\n        this.root = root;\r\n        /** @type {Map<string, Number>} */\r\n        this.properties = new Map();\r\n        this.Watch(...keys);\r\n    }\r\n\r\n    /**\r\n     * Properties that needs to be considered\r\n     * @param  {...string} keys \r\n     */\r\n    Watch(...keys){\r\n        if(keys !== undefined && keys.length > 0){\r\n            keys.forEach(key => {\r\n                let value = getKey(this.root, key);\r\n                this.properties.set(key, value);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Checks the current values, recover any NaN (or typeof != number), otherwise update the stored number\r\n     */\r\n    AssertUpdateRecover(){\r\n        let neededRecovery = false;\r\n        let keys = this.properties.keys();\r\n        for(let key of keys){\r\n            // get the current value\r\n            let value = getKey(this.root, key);\r\n            // recover if not a number\r\n            if(isNaN(value) || (typeof value !== typeofNumber)){\r\n                neededRecovery = true;\r\n                value = this.properties.get(key);\r\n            }\r\n            // update\r\n            this.properties.set(key, value);\r\n            setKey(this.root, key, value);\r\n        };\r\n\r\n        return neededRecovery;\r\n    }\r\n}\r\n\r\nexport default NaNRecovery;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/NaNRecovery.js"],"sourceRoot":""}